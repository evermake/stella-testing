import{createRequire as r7} from"node:module";var d7=Object.create;var{defineProperty:s6,getPrototypeOf:p7,getOwnPropertyNames:i7}=Object;var n7=Object.prototype.hasOwnProperty;var v0=(Q,X,$)=>{$=Q!=null?d7(p7(Q)):{};const Z=X||!Q||!Q.__esModule?s6($,"default",{value:Q,enumerable:!0}):$;for(let J of i7(Q))if(!n7.call(Z,J))s6(Z,J,{get:()=>Q[J],enumerable:!0});return Z};var M=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var k=r7(import.meta.url);var X8=M((GX,Q8)=>{var o7=function(Q,X){var $=X.pathExt!==void 0?X.pathExt:process.env.PATHEXT;if(!$)return!0;if($=$.split(";"),$.indexOf("")!==-1)return!0;for(var Z=0;Z<$.length;Z++){var J=$[Z].toLowerCase();if(J&&Q.substr(-J.length).toLowerCase()===J)return!0}return!1},t6=function(Q,X,$){if(!Q.isSymbolicLink()&&!Q.isFile())return!1;return o7(X,$)},e6=function(Q,X,$){a6.stat(Q,function(Z,J){$(Z,Z?!1:t6(J,Q,X))})},s7=function(Q,X){return t6(a6.statSync(Q),Q,X)};Q8.exports=e6;e6.sync=s7;var a6=k("fs")});var Y8=M((zX,q8)=>{var Z8=function(Q,X,$){$8.stat(Q,function(Z,J){$(Z,Z?!1:J8(J,X))})},a7=function(Q,X){return J8($8.statSync(Q),X)},J8=function(Q,X){return Q.isFile()&&t7(Q,X)},t7=function(Q,X){var{mode:$,uid:Z,gid:J}=Q,q=X.uid!==void 0?X.uid:process.getuid&&process.getuid(),Y=X.gid!==void 0?X.gid:process.getgid&&process.getgid(),K=parseInt("100",8),H=parseInt("010",8),_=parseInt("001",8),V=K|H,W=$&_||$&H&&J===Y||$&K&&Z===q||$&V&&q===0;return W};q8.exports=Z8;Z8.sync=a7;var $8=k("fs")});var H8=M((MX,K8)=>{var Z6=function(Q,X,$){if(typeof X==="function")$=X,X={};if(!$){if(typeof Promise!=="function")throw new TypeError("callback not provided");return new Promise(function(Z,J){Z6(Q,X||{},function(q,Y){if(q)J(q);else Z(Y)})})}y0(Q,X||{},function(Z,J){if(Z){if(Z.code==="EACCES"||X&&X.ignoreErrors)Z=null,J=!1}$(Z,J)})},e7=function(Q,X){try{return y0.sync(Q,X||{})}catch($){if(X&&X.ignoreErrors||$.code==="EACCES")return!1;else throw $}},BX=k("fs"),y0;if(process.platform==="win32"||global.TESTING_WINDOWS)y0=X8();else y0=Y8();K8.exports=Z6;Z6.sync=e7});var z8=M((LX,G8)=>{var q0=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",_8=k("path"),Q2=q0?";":":",V8=H8(),j8=(Q)=>Object.assign(new Error(`not found: ${Q}`),{code:"ENOENT"}),W8=(Q,X)=>{const $=X.colon||Q2,Z=Q.match(/\//)||q0&&Q.match(/\\/)?[""]:[...q0?[process.cwd()]:[],...(X.path||process.env.PATH||"").split($)],J=q0?X.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",q=q0?J.split($):[""];if(q0){if(Q.indexOf(".")!==-1&&q[0]!=="")q.unshift("")}return{pathEnv:Z,pathExt:q,pathExtExe:J}},U8=(Q,X,$)=>{if(typeof X==="function")$=X,X={};if(!X)X={};const{pathEnv:Z,pathExt:J,pathExtExe:q}=W8(Q,X),Y=[],K=(_)=>new Promise((V,W)=>{if(_===Z.length)return X.all&&Y.length?V(Y):W(j8(Q));const j=Z[_],U=/^".*"$/.test(j)?j.slice(1,-1):j,G=_8.join(U,Q),z=!U&&/^\.[\\\/]/.test(Q)?Q.slice(0,2)+G:G;V(H(z,_,0))}),H=(_,V,W)=>new Promise((j,U)=>{if(W===J.length)return j(K(V+1));const G=J[W];V8(_+G,{pathExt:q},(z,B)=>{if(!z&&B)if(X.all)Y.push(_+G);else return j(_+G);return j(H(_,V,W+1))})});return $?K(0).then((_)=>$(null,_),$):K(0)},X2=(Q,X)=>{X=X||{};const{pathEnv:$,pathExt:Z,pathExtExe:J}=W8(Q,X),q=[];for(let Y=0;Y<$.length;Y++){const K=$[Y],H=/^".*"$/.test(K)?K.slice(1,-1):K,_=_8.join(H,Q),V=!H&&/^\.[\\\/]/.test(Q)?Q.slice(0,2)+_:_;for(let W=0;W<Z.length;W++){const j=V+Z[W];try{if(V8.sync(j,{pathExt:J}))if(X.all)q.push(j);else return j}catch(U){}}}if(X.all&&q.length)return q;if(X.nothrow)return null;throw j8(Q)};G8.exports=U8;U8.sync=X2});var M8=M((RX,J6)=>{var B8=(Q={})=>{const X=Q.env||process.env;if((Q.platform||process.platform)!=="win32")return"PATH";return Object.keys(X).reverse().find((Z)=>Z.toUpperCase()==="PATH")||"Path"};J6.exports=B8;J6.exports.default=B8});var I8=M((wX,w8)=>{var R8=function(Q,X){const $=Q.options.env||process.env,Z=process.cwd(),J=Q.options.cwd!=null,q=J&&process.chdir!==void 0&&!process.chdir.disabled;if(q)try{process.chdir(Q.options.cwd)}catch(K){}let Y;try{Y=$2.sync(Q.command,{path:$[Z2({env:$})],pathExt:X?L8.delimiter:void 0})}catch(K){}finally{if(q)process.chdir(Z)}if(Y)Y=L8.resolve(J?Q.options.cwd:"",Y);return Y},J2=function(Q){return R8(Q)||R8(Q,!0)},L8=k("path"),$2=z8(),Z2=M8();w8.exports=J2});var C8=M((K2,Y6)=>{var q2=function(Q){return Q=Q.replace(q6,"^$1"),Q},Y2=function(Q,X){if(Q=`${Q}`,Q=Q.replace(/(\\*)"/g,'$1$1\\"'),Q=Q.replace(/(\\*)$/,"$1$1"),Q=`"${Q}"`,Q=Q.replace(q6,"^$1"),X)Q=Q.replace(q6,"^$1");return Q},q6=/([()\][%!^"`<>&|;, *?])/g;K2.command=q2;K2.argument=Y2});var A8=M((IX,D8)=>{D8.exports=/^#!(.*)/});var N8=M((CX,F8)=>{var V2=A8();F8.exports=(Q="")=>{const X=Q.match(V2);if(!X)return null;const[$,Z]=X[0].replace(/#! ?/,"").split(" "),J=$.split("/").pop();if(J==="env")return Z;return Z?`${J} ${Z}`:J}});var P8=M((DX,T8)=>{var W2=function(Q){const $=Buffer.alloc(150);let Z;try{Z=K6.openSync(Q,"r"),K6.readSync(Z,$,0,150,0),K6.closeSync(Z)}catch(J){}return j2($.toString())},K6=k("fs"),j2=N8();T8.exports=W2});var E8=M((AX,k8)=>{var L2=function(Q){Q.file=S8(Q);const X=Q.file&&G2(Q.file);if(X)return Q.args.unshift(Q.file),Q.command=X,S8(Q);return Q.file},R2=function(Q){if(!z2)return Q;const X=L2(Q),$=!B2.test(X);if(Q.options.forceShell||$){const Z=M2.test(X);Q.command=U2.normalize(Q.command),Q.command=O8.command(Q.command),Q.args=Q.args.map((q)=>O8.argument(q,Z));const J=[Q.command].concat(Q.args).join(" ");Q.args=["/d","/s","/c",`"${J}"`],Q.command=process.env.comspec||"cmd.exe",Q.options.windowsVerbatimArguments=!0}return Q},w2=function(Q,X,$){if(X&&!Array.isArray(X))$=X,X=null;X=X?X.slice(0):[],$=Object.assign({},$);const Z={command:Q,args:X,options:$,file:void 0,original:{command:Q,args:X}};return $.shell?Z:R2(Z)},U2=k("path"),S8=I8(),O8=C8(),G2=P8(),z2=process.platform==="win32",B2=/\.(?:com|exe)$/i,M2=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;k8.exports=w2});var x8=M((FX,y8)=>{var _6=function(Q,X){return Object.assign(new Error(`${X} ${Q.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${X} ${Q.command}`,path:Q.command,spawnargs:Q.args})},I2=function(Q,X){if(!H6)return;const $=Q.emit;Q.emit=function(Z,J){if(Z==="exit"){const q=v8(J,X,"spawn");if(q)return $.call(Q,"error",q)}return $.apply(Q,arguments)}},v8=function(Q,X){if(H6&&Q===1&&!X.file)return _6(X.original,"spawn");return null},C2=function(Q,X){if(H6&&Q===1&&!X.file)return _6(X.original,"spawnSync");return null},H6=process.platform==="win32";y8.exports={hookChildProcess:I2,verifyENOENT:v8,verifyENOENTSync:C2,notFoundError:_6}});var u8=M((NX,Y0)=>{var f8=function(Q,X,$){const Z=V6(Q,X,$),J=b8.spawn(Z.command,Z.args,Z.options);return j6.hookChildProcess(J,Z),J},D2=function(Q,X,$){const Z=V6(Q,X,$),J=b8.spawnSync(Z.command,Z.args,Z.options);return J.error=J.error||j6.verifyENOENTSync(J.status,Z),J},b8=k("child_process"),V6=E8(),j6=x8();Y0.exports=f8;Y0.exports.spawn=f8;Y0.exports.sync=D2;Y0.exports._parse=V6;Y0.exports._enoent=j6});var G0=M((A2)=>{class W6 extends Error{constructor(Q,X,$){super($);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=X,this.exitCode=Q,this.nestedError=void 0}}class h8 extends W6{constructor(Q){super(1,"commander.invalidArgument",Q);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}A2.CommanderError=W6;A2.InvalidArgumentError=h8});var x0=M((S2)=>{var P2=function(Q){const X=Q.name()+(Q.variadic===!0?"...":"");return Q.required?"<"+X+">":"["+X+"]"},{InvalidArgumentError:T2}=G0();class g8{constructor(Q,X){switch(this.description=X||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,Q[0]){case"<":this.required=!0,this._name=Q.slice(1,-1);break;case"[":this.required=!1,this._name=Q.slice(1,-1);break;default:this.required=!0,this._name=Q;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(Q,X){if(X===this.defaultValue||!Array.isArray(X))return[Q];return X.concat(Q)}default(Q,X){return this.defaultValue=Q,this.defaultValueDescription=X,this}argParser(Q){return this.parseArg=Q,this}choices(Q){return this.argChoices=Q.slice(),this.parseArg=(X,$)=>{if(!this.argChoices.includes(X))throw new T2(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(X,$);return X},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}S2.Argument=g8;S2.humanReadableArgName=P2});var U6=M((v2)=>{var{humanReadableArgName:E2}=x0();class m8{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(Q){const X=Q.commands.filter(($)=>!$._hidden);if(Q._hasImplicitHelpCommand()){const[,$,Z]=Q._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),J=Q.createCommand($).helpOption(!1);if(J.description(Q._helpCommandDescription),Z)J.arguments(Z);X.push(J)}if(this.sortSubcommands)X.sort(($,Z)=>{return $.name().localeCompare(Z.name())});return X}compareOptions(Q,X){const $=(Z)=>{return Z.short?Z.short.replace(/^-/,""):Z.long.replace(/^--/,"")};return $(Q).localeCompare($(X))}visibleOptions(Q){const X=Q.options.filter((J)=>!J.hidden),$=Q._hasHelpOption&&Q._helpShortFlag&&!Q._findOption(Q._helpShortFlag),Z=Q._hasHelpOption&&!Q._findOption(Q._helpLongFlag);if($||Z){let J;if(!$)J=Q.createOption(Q._helpLongFlag,Q._helpDescription);else if(!Z)J=Q.createOption(Q._helpShortFlag,Q._helpDescription);else J=Q.createOption(Q._helpFlags,Q._helpDescription);X.push(J)}if(this.sortOptions)X.sort(this.compareOptions);return X}visibleGlobalOptions(Q){if(!this.showGlobalOptions)return[];const X=[];for(let $=Q.parent;$;$=$.parent){const Z=$.options.filter((J)=>!J.hidden);X.push(...Z)}if(this.sortOptions)X.sort(this.compareOptions);return X}visibleArguments(Q){if(Q._argsDescription)Q.registeredArguments.forEach((X)=>{X.description=X.description||Q._argsDescription[X.name()]||""});if(Q.registeredArguments.find((X)=>X.description))return Q.registeredArguments;return[]}subcommandTerm(Q){const X=Q.registeredArguments.map(($)=>E2($)).join(" ");return Q._name+(Q._aliases[0]?"|"+Q._aliases[0]:"")+(Q.options.length?" [options]":"")+(X?" "+X:"")}optionTerm(Q){return Q.flags}argumentTerm(Q){return Q.name()}longestSubcommandTermLength(Q,X){return X.visibleCommands(Q).reduce(($,Z)=>{return Math.max($,X.subcommandTerm(Z).length)},0)}longestOptionTermLength(Q,X){return X.visibleOptions(Q).reduce(($,Z)=>{return Math.max($,X.optionTerm(Z).length)},0)}longestGlobalOptionTermLength(Q,X){return X.visibleGlobalOptions(Q).reduce(($,Z)=>{return Math.max($,X.optionTerm(Z).length)},0)}longestArgumentTermLength(Q,X){return X.visibleArguments(Q).reduce(($,Z)=>{return Math.max($,X.argumentTerm(Z).length)},0)}commandUsage(Q){let X=Q._name;if(Q._aliases[0])X=X+"|"+Q._aliases[0];let $="";for(let Z=Q.parent;Z;Z=Z.parent)$=Z.name()+" "+$;return $+X+" "+Q.usage()}commandDescription(Q){return Q.description()}subcommandDescription(Q){return Q.summary()||Q.description()}optionDescription(Q){const X=[];if(Q.argChoices)X.push(`choices: ${Q.argChoices.map(($)=>JSON.stringify($)).join(", ")}`);if(Q.defaultValue!==void 0){if(Q.required||Q.optional||Q.isBoolean()&&typeof Q.defaultValue==="boolean")X.push(`default: ${Q.defaultValueDescription||JSON.stringify(Q.defaultValue)}`)}if(Q.presetArg!==void 0&&Q.optional)X.push(`preset: ${JSON.stringify(Q.presetArg)}`);if(Q.envVar!==void 0)X.push(`env: ${Q.envVar}`);if(X.length>0)return`${Q.description} (${X.join(", ")})`;return Q.description}argumentDescription(Q){const X=[];if(Q.argChoices)X.push(`choices: ${Q.argChoices.map(($)=>JSON.stringify($)).join(", ")}`);if(Q.defaultValue!==void 0)X.push(`default: ${Q.defaultValueDescription||JSON.stringify(Q.defaultValue)}`);if(X.length>0){const $=`(${X.join(", ")})`;if(Q.description)return`${Q.description} ${$}`;return $}return Q.description}formatHelp(Q,X){const $=X.padWidth(Q,X),Z=X.helpWidth||80;function Y(U,G){if(G){const z=`${U.padEnd($+2)}${G}`;return X.wrap(z,Z-2,$+2)}return U}function K(U){return U.join("\n").replace(/^/gm," ".repeat(2))}let H=[`Usage: ${X.commandUsage(Q)}`,""];const _=X.commandDescription(Q);if(_.length>0)H=H.concat([X.wrap(_,Z,0),""]);const V=X.visibleArguments(Q).map((U)=>{return Y(X.argumentTerm(U),X.argumentDescription(U))});if(V.length>0)H=H.concat(["Arguments:",K(V),""]);const W=X.visibleOptions(Q).map((U)=>{return Y(X.optionTerm(U),X.optionDescription(U))});if(W.length>0)H=H.concat(["Options:",K(W),""]);if(this.showGlobalOptions){const U=X.visibleGlobalOptions(Q).map((G)=>{return Y(X.optionTerm(G),X.optionDescription(G))});if(U.length>0)H=H.concat(["Global Options:",K(U),""])}const j=X.visibleCommands(Q).map((U)=>{return Y(X.subcommandTerm(U),X.subcommandDescription(U))});if(j.length>0)H=H.concat(["Commands:",K(j),""]);return H.join("\n")}padWidth(Q,X){return Math.max(X.longestOptionTermLength(Q,X),X.longestGlobalOptionTermLength(Q,X),X.longestSubcommandTermLength(Q,X),X.longestArgumentTermLength(Q,X))}wrap(Q,X,$,Z=40){const q=new RegExp(`[\\n][${" \\f\\t\\v\xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF"}]+`);if(Q.match(q))return Q;const Y=X-$;if(Y<Z)return Q;const K=Q.slice(0,$),H=Q.slice($).replace("\r\n","\n"),_=" ".repeat($),W=`\\s${"\u200B"}`,j=new RegExp(`\n|.{1,${Y-1}}([${W}]|\$)|[^${W}]+?([${W}]|\$)`,"g"),U=H.match(j)||[];return K+U.map((G,z)=>{if(G==="\n")return"";return(z>0?_:"")+G.trimEnd()}).join("\n")}}v2.Help=m8});var G6=M((f2)=>{var b2=function(Q){return Q.split("-").reduce((X,$)=>{return X+$[0].toUpperCase()+$.slice(1)})},d8=function(Q){let X,$;const Z=Q.split(/[ |,]+/);if(Z.length>1&&!/^[[<]/.test(Z[1]))X=Z.shift();if($=Z.shift(),!X&&/^-[^-]$/.test($))X=$,$=void 0;return{shortFlag:X,longFlag:$}},{InvalidArgumentError:x2}=G0();class c8{constructor(Q,X){this.flags=Q,this.description=X||"",this.required=Q.includes("<"),this.optional=Q.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(Q),this.mandatory=!1;const $=d8(Q);if(this.short=$.shortFlag,this.long=$.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(Q,X){return this.defaultValue=Q,this.defaultValueDescription=X,this}preset(Q){return this.presetArg=Q,this}conflicts(Q){return this.conflictsWith=this.conflictsWith.concat(Q),this}implies(Q){let X=Q;if(typeof Q==="string")X={[Q]:!0};return this.implied=Object.assign(this.implied||{},X),this}env(Q){return this.envVar=Q,this}argParser(Q){return this.parseArg=Q,this}makeOptionMandatory(Q=!0){return this.mandatory=!!Q,this}hideHelp(Q=!0){return this.hidden=!!Q,this}_concatValue(Q,X){if(X===this.defaultValue||!Array.isArray(X))return[Q];return X.concat(Q)}choices(Q){return this.argChoices=Q.slice(),this.parseArg=(X,$)=>{if(!this.argChoices.includes(X))throw new x2(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(X,$);return X},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){return b2(this.name().replace(/^no-/,""))}is(Q){return this.short===Q||this.long===Q}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class l8{constructor(Q){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,Q.forEach((X)=>{if(X.negate)this.negativeOptions.set(X.attributeName(),X);else this.positiveOptions.set(X.attributeName(),X)}),this.negativeOptions.forEach((X,$)=>{if(this.positiveOptions.has($))this.dualOptions.add($)})}valueFromOption(Q,X){const $=X.attributeName();if(!this.dualOptions.has($))return!0;const Z=this.negativeOptions.get($).presetArg,J=Z!==void 0?Z:!1;return X.negate===(J===Q)}}f2.Option=c8;f2.splitOptionFlags=d8;f2.DualOptions=l8});var p8=M((l2)=>{var m2=function(Q,X){if(Math.abs(Q.length-X.length)>3)return Math.max(Q.length,X.length);const $=[];for(let Z=0;Z<=Q.length;Z++)$[Z]=[Z];for(let Z=0;Z<=X.length;Z++)$[0][Z]=Z;for(let Z=1;Z<=X.length;Z++)for(let J=1;J<=Q.length;J++){let q=1;if(Q[J-1]===X[Z-1])q=0;else q=1;if($[J][Z]=Math.min($[J-1][Z]+1,$[J][Z-1]+1,$[J-1][Z-1]+q),J>1&&Z>1&&Q[J-1]===X[Z-2]&&Q[J-2]===X[Z-1])$[J][Z]=Math.min($[J][Z],$[J-2][Z-2]+1)}return $[Q.length][X.length]},c2=function(Q,X){if(!X||X.length===0)return"";X=Array.from(new Set(X));const $=Q.startsWith("--");if($)Q=Q.slice(2),X=X.map((Y)=>Y.slice(2));let Z=[],J=3;const q=0.4;if(X.forEach((Y)=>{if(Y.length<=1)return;const K=m2(Q,Y),H=Math.max(Q.length,Y.length);if((H-K)/H>q){if(K<J)J=K,Z=[Y];else if(K===J)Z.push(Y)}}),Z.sort((Y,K)=>Y.localeCompare(K)),$)Z=Z.map((Y)=>`--${Y}`);if(Z.length>1)return`\n(Did you mean one of ${Z.join(", ")}?)`;if(Z.length===1)return`\n(Did you mean ${Z[0]}?)`;return""};l2.suggestSimilar=c2});var s8=M((a2)=>{var r8=function(Q,X){if(Q._hasHelpOption&&X.find((Z)=>Z===Q._helpLongFlag||Z===Q._helpShortFlag))Q.outputHelp(),Q._exit(0,"commander.helpDisplayed","(outputHelp)")},o8=function(Q){return Q.map((X)=>{if(!X.startsWith("--inspect"))return X;let $,Z="127.0.0.1",J="9229",q;if((q=X.match(/^(--inspect(-brk)?)$/))!==null)$=q[1];else if((q=X.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if($=q[1],/^\d+$/.test(q[3]))J=q[3];else Z=q[3];else if((q=X.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)$=q[1],Z=q[3],J=q[4];if($&&J!=="0")return`${$}=${Z}:${parseInt(J)+1}`;return X})},p2=k("events").EventEmitter,z6=k("child_process"),s=k("path"),B6=k("fs"),C=k("process"),{Argument:i2,humanReadableArgName:n2}=x0(),{CommanderError:M6}=G0(),{Help:r2}=U6(),{Option:i8,splitOptionFlags:o2,DualOptions:s2}=G6(),{suggestSimilar:n8}=p8();class L6 extends p2{constructor(Q){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=Q||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:(X)=>C.stdout.write(X),writeErr:(X)=>C.stderr.write(X),getOutHelpWidth:()=>C.stdout.isTTY?C.stdout.columns:void 0,getErrHelpWidth:()=>C.stderr.isTTY?C.stderr.columns:void 0,outputError:(X,$)=>$(X)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(Q){return this._outputConfiguration=Q._outputConfiguration,this._hasHelpOption=Q._hasHelpOption,this._helpFlags=Q._helpFlags,this._helpDescription=Q._helpDescription,this._helpShortFlag=Q._helpShortFlag,this._helpLongFlag=Q._helpLongFlag,this._helpCommandName=Q._helpCommandName,this._helpCommandnameAndArgs=Q._helpCommandnameAndArgs,this._helpCommandDescription=Q._helpCommandDescription,this._helpConfiguration=Q._helpConfiguration,this._exitCallback=Q._exitCallback,this._storeOptionsAsProperties=Q._storeOptionsAsProperties,this._combineFlagAndOptionalValue=Q._combineFlagAndOptionalValue,this._allowExcessArguments=Q._allowExcessArguments,this._enablePositionalOptions=Q._enablePositionalOptions,this._showHelpAfterError=Q._showHelpAfterError,this._showSuggestionAfterError=Q._showSuggestionAfterError,this}_getCommandAndAncestors(){const Q=[];for(let X=this;X;X=X.parent)Q.push(X);return Q}command(Q,X,$){let Z=X,J=$;if(typeof Z==="object"&&Z!==null)J=Z,Z=null;J=J||{};const[,q,Y]=Q.match(/([^ ]+) *(.*)/),K=this.createCommand(q);if(Z)K.description(Z),K._executableHandler=!0;if(J.isDefault)this._defaultCommandName=K._name;if(K._hidden=!!(J.noHelp||J.hidden),K._executableFile=J.executableFile||null,Y)K.arguments(Y);if(this.commands.push(K),K.parent=this,K.copyInheritedSettings(this),Z)return this;return K}createCommand(Q){return new L6(Q)}createHelp(){return Object.assign(new r2,this.configureHelp())}configureHelp(Q){if(Q===void 0)return this._helpConfiguration;return this._helpConfiguration=Q,this}configureOutput(Q){if(Q===void 0)return this._outputConfiguration;return Object.assign(this._outputConfiguration,Q),this}showHelpAfterError(Q=!0){if(typeof Q!=="string")Q=!!Q;return this._showHelpAfterError=Q,this}showSuggestionAfterError(Q=!0){return this._showSuggestionAfterError=!!Q,this}addCommand(Q,X){if(!Q._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(X=X||{},X.isDefault)this._defaultCommandName=Q._name;if(X.noHelp||X.hidden)Q._hidden=!0;return this.commands.push(Q),Q.parent=this,this}createArgument(Q,X){return new i2(Q,X)}argument(Q,X,$,Z){const J=this.createArgument(Q,X);if(typeof $==="function")J.default(Z).argParser($);else J.default($);return this.addArgument(J),this}arguments(Q){return Q.trim().split(/ +/).forEach((X)=>{this.argument(X)}),this}addArgument(Q){const X=this.registeredArguments.slice(-1)[0];if(X&&X.variadic)throw new Error(`only the last argument can be variadic '${X.name()}'`);if(Q.required&&Q.defaultValue!==void 0&&Q.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${Q.name()}'`);return this.registeredArguments.push(Q),this}addHelpCommand(Q,X){if(Q===!1)this._addImplicitHelpCommand=!1;else{if(this._addImplicitHelpCommand=!0,typeof Q==="string")this._helpCommandName=Q.split(" ")[0],this._helpCommandnameAndArgs=Q;this._helpCommandDescription=X||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===void 0)return this.commands.length&&!this._actionHandler&&!this._findCommand("help");return this._addImplicitHelpCommand}hook(Q,X){const $=["preSubcommand","preAction","postAction"];if(!$.includes(Q))throw new Error(`Unexpected value for event passed to hook : '${Q}'.
Expecting one of '${$.join("', '")}'`);if(this._lifeCycleHooks[Q])this._lifeCycleHooks[Q].push(X);else this._lifeCycleHooks[Q]=[X];return this}exitOverride(Q){if(Q)this._exitCallback=Q;else this._exitCallback=(X)=>{if(X.code!=="commander.executeSubCommandAsync")throw X};return this}_exit(Q,X,$){if(this._exitCallback)this._exitCallback(new M6(Q,X,$));C.exit(Q)}action(Q){const X=($)=>{const Z=this.registeredArguments.length,J=$.slice(0,Z);if(this._storeOptionsAsProperties)J[Z]=this;else J[Z]=this.opts();return J.push(this),Q.apply(this,J)};return this._actionHandler=X,this}createOption(Q,X){return new i8(Q,X)}_callParseArg(Q,X,$,Z){try{return Q.parseArg(X,$)}catch(J){if(J.code==="commander.invalidArgument"){const q=`${Z} ${J.message}`;this.error(q,{exitCode:J.exitCode,code:J.code})}throw J}}addOption(Q){const X=Q.name(),$=Q.attributeName();if(Q.negate){const J=Q.long.replace(/^--no-/,"--");if(!this._findOption(J))this.setOptionValueWithSource($,Q.defaultValue===void 0?!0:Q.defaultValue,"default")}else if(Q.defaultValue!==void 0)this.setOptionValueWithSource($,Q.defaultValue,"default");this.options.push(Q);const Z=(J,q,Y)=>{if(J==null&&Q.presetArg!==void 0)J=Q.presetArg;const K=this.getOptionValue($);if(J!==null&&Q.parseArg)J=this._callParseArg(Q,J,K,q);else if(J!==null&&Q.variadic)J=Q._concatValue(J,K);if(J==null)if(Q.negate)J=!1;else if(Q.isBoolean()||Q.optional)J=!0;else J="";this.setOptionValueWithSource($,J,Y)};if(this.on("option:"+X,(J)=>{const q=`error: option '${Q.flags}' argument '${J}' is invalid.`;Z(J,q,"cli")}),Q.envVar)this.on("optionEnv:"+X,(J)=>{const q=`error: option '${Q.flags}' value '${J}' from env '${Q.envVar}' is invalid.`;Z(J,q,"env")});return this}_optionEx(Q,X,$,Z,J){if(typeof X==="object"&&X instanceof i8)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const q=this.createOption(X,$);if(q.makeOptionMandatory(!!Q.mandatory),typeof Z==="function")q.default(J).argParser(Z);else if(Z instanceof RegExp){const Y=Z;Z=(K,H)=>{const _=Y.exec(K);return _?_[0]:H},q.default(J).argParser(Z)}else q.default(Z);return this.addOption(q)}option(Q,X,$,Z){return this._optionEx({},Q,X,$,Z)}requiredOption(Q,X,$,Z){return this._optionEx({mandatory:!0},Q,X,$,Z)}combineFlagAndOptionalValue(Q=!0){return this._combineFlagAndOptionalValue=!!Q,this}allowUnknownOption(Q=!0){return this._allowUnknownOption=!!Q,this}allowExcessArguments(Q=!0){return this._allowExcessArguments=!!Q,this}enablePositionalOptions(Q=!0){return this._enablePositionalOptions=!!Q,this}passThroughOptions(Q=!0){if(this._passThroughOptions=!!Q,!!this.parent&&Q&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(Q=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!Q,this}getOptionValue(Q){if(this._storeOptionsAsProperties)return this[Q];return this._optionValues[Q]}setOptionValue(Q,X){return this.setOptionValueWithSource(Q,X,void 0)}setOptionValueWithSource(Q,X,$){if(this._storeOptionsAsProperties)this[Q]=X;else this._optionValues[Q]=X;return this._optionValueSources[Q]=$,this}getOptionValueSource(Q){return this._optionValueSources[Q]}getOptionValueSourceWithGlobals(Q){let X;return this._getCommandAndAncestors().forEach(($)=>{if($.getOptionValueSource(Q)!==void 0)X=$.getOptionValueSource(Q)}),X}_prepareUserArgs(Q,X){if(Q!==void 0&&!Array.isArray(Q))throw new Error("first parameter to parse must be array or undefined");if(X=X||{},Q===void 0){if(Q=C.argv,C.versions&&C.versions.electron)X.from="electron"}this.rawArgs=Q.slice();let $;switch(X.from){case void 0:case"node":this._scriptPath=Q[1],$=Q.slice(2);break;case"electron":if(C.defaultApp)this._scriptPath=Q[1],$=Q.slice(2);else $=Q.slice(1);break;case"user":$=Q.slice(0);break;default:throw new Error(`unexpected parse option { from: '${X.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",$}parse(Q,X){const $=this._prepareUserArgs(Q,X);return this._parseCommand([],$),this}async parseAsync(Q,X){const $=this._prepareUserArgs(Q,X);return await this._parseCommand([],$),this}_executeSubCommand(Q,X){X=X.slice();let $=!1;const Z=[".js",".ts",".tsx",".mjs",".cjs"];function J(_,V){const W=s.resolve(_,V);if(B6.existsSync(W))return W;if(Z.includes(s.extname(V)))return;const j=Z.find((U)=>B6.existsSync(`${W}${U}`));if(j)return`${W}${j}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let q=Q._executableFile||`${this._name}-${Q._name}`,Y=this._executableDir||"";if(this._scriptPath){let _;try{_=B6.realpathSync(this._scriptPath)}catch(V){_=this._scriptPath}Y=s.resolve(s.dirname(_),Y)}if(Y){let _=J(Y,q);if(!_&&!Q._executableFile&&this._scriptPath){const V=s.basename(this._scriptPath,s.extname(this._scriptPath));if(V!==this._name)_=J(Y,`${V}-${Q._name}`)}q=_||q}$=Z.includes(s.extname(q));let K;if(C.platform!=="win32")if($)X.unshift(q),X=o8(C.execArgv).concat(X),K=z6.spawn(C.argv[0],X,{stdio:"inherit"});else K=z6.spawn(q,X,{stdio:"inherit"});else X.unshift(q),X=o8(C.execArgv).concat(X),K=z6.spawn(C.execPath,X,{stdio:"inherit"});if(!K.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((V)=>{C.on(V,()=>{if(K.killed===!1&&K.exitCode===null)K.kill(V)})});const H=this._exitCallback;if(!H)K.on("close",C.exit.bind(C));else K.on("close",()=>{H(new M6(C.exitCode||0,"commander.executeSubCommandAsync","(close)"))});K.on("error",(_)=>{if(_.code==="ENOENT"){const V=Y?`searched for local subcommand relative to directory '${Y}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",W=`'${q}' does not exist
 - if '${Q._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${V}`;throw new Error(W)}else if(_.code==="EACCES")throw new Error(`'${q}' not executable`);if(!H)C.exit(1);else{const V=new M6(1,"commander.executeSubCommandAsync","(error)");V.nestedError=_,H(V)}}),this.runningCommand=K}_dispatchSubcommand(Q,X,$){const Z=this._findCommand(Q);if(!Z)this.help({error:!0});let J;return J=this._chainOrCallSubCommandHook(J,Z,"preSubcommand"),J=this._chainOrCall(J,()=>{if(Z._executableHandler)this._executeSubCommand(Z,X.concat($));else return Z._parseCommand(X,$)}),J}_dispatchHelpCommand(Q){if(!Q)this.help();const X=this._findCommand(Q);if(X&&!X._executableHandler)X.help();return this._dispatchSubcommand(Q,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((Q,X)=>{if(Q.required&&this.args[X]==null)this.missingArgument(Q.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){const Q=($,Z,J)=>{let q=Z;if(Z!==null&&$.parseArg){const Y=`error: command-argument value '${Z}' is invalid for argument '${$.name()}'.`;q=this._callParseArg($,Z,J,Y)}return q};this._checkNumberOfArguments();const X=[];this.registeredArguments.forEach(($,Z)=>{let J=$.defaultValue;if($.variadic){if(Z<this.args.length){if(J=this.args.slice(Z),$.parseArg)J=J.reduce((q,Y)=>{return Q($,Y,q)},$.defaultValue)}else if(J===void 0)J=[]}else if(Z<this.args.length){if(J=this.args[Z],$.parseArg)J=Q($,J,$.defaultValue)}X[Z]=J}),this.processedArgs=X}_chainOrCall(Q,X){if(Q&&Q.then&&typeof Q.then==="function")return Q.then(()=>X());return X()}_chainOrCallHooks(Q,X){let $=Q;const Z=[];if(this._getCommandAndAncestors().reverse().filter((J)=>J._lifeCycleHooks[X]!==void 0).forEach((J)=>{J._lifeCycleHooks[X].forEach((q)=>{Z.push({hookedCommand:J,callback:q})})}),X==="postAction")Z.reverse();return Z.forEach((J)=>{$=this._chainOrCall($,()=>{return J.callback(J.hookedCommand,this)})}),$}_chainOrCallSubCommandHook(Q,X,$){let Z=Q;if(this._lifeCycleHooks[$]!==void 0)this._lifeCycleHooks[$].forEach((J)=>{Z=this._chainOrCall(Z,()=>{return J(this,X)})});return Z}_parseCommand(Q,X){const $=this.parseOptions(X);if(this._parseOptionsEnv(),this._parseOptionsImplied(),Q=Q.concat($.operands),X=$.unknown,this.args=Q.concat(X),Q&&this._findCommand(Q[0]))return this._dispatchSubcommand(Q[0],Q.slice(1),X);if(this._hasImplicitHelpCommand()&&Q[0]===this._helpCommandName)return this._dispatchHelpCommand(Q[1]);if(this._defaultCommandName)return r8(this,X),this._dispatchSubcommand(this._defaultCommandName,Q,X);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});r8(this,$.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const Z=()=>{if($.unknown.length>0)this.unknownOption($.unknown[0])},J=`command:${this.name()}`;if(this._actionHandler){Z(),this._processArguments();let q;if(q=this._chainOrCallHooks(q,"preAction"),q=this._chainOrCall(q,()=>this._actionHandler(this.processedArgs)),this.parent)q=this._chainOrCall(q,()=>{this.parent.emit(J,Q,X)});return q=this._chainOrCallHooks(q,"postAction"),q}if(this.parent&&this.parent.listenerCount(J))Z(),this._processArguments(),this.parent.emit(J,Q,X);else if(Q.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",Q,X);if(this.listenerCount("command:*"))this.emit("command:*",Q,X);else if(this.commands.length)this.unknownCommand();else Z(),this._processArguments()}else if(this.commands.length)Z(),this.help({error:!0});else Z(),this._processArguments()}_findCommand(Q){if(!Q)return;return this.commands.find((X)=>X._name===Q||X._aliases.includes(Q))}_findOption(Q){return this.options.find((X)=>X.is(Q))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((Q)=>{Q.options.forEach((X)=>{if(X.mandatory&&Q.getOptionValue(X.attributeName())===void 0)Q.missingMandatoryOptionValue(X)})})}_checkForConflictingLocalOptions(){const Q=this.options.filter(($)=>{const Z=$.attributeName();if(this.getOptionValue(Z)===void 0)return!1;return this.getOptionValueSource(Z)!=="default"});Q.filter(($)=>$.conflictsWith.length>0).forEach(($)=>{const Z=Q.find((J)=>$.conflictsWith.includes(J.attributeName()));if(Z)this._conflictingOption($,Z)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((Q)=>{Q._checkForConflictingLocalOptions()})}parseOptions(Q){const X=[],$=[];let Z=X;const J=Q.slice();function q(K){return K.length>1&&K[0]==="-"}let Y=null;while(J.length){const K=J.shift();if(K==="--"){if(Z===$)Z.push(K);Z.push(...J);break}if(Y&&!q(K)){this.emit(`option:${Y.name()}`,K);continue}if(Y=null,q(K)){const H=this._findOption(K);if(H){if(H.required){const _=J.shift();if(_===void 0)this.optionMissingArgument(H);this.emit(`option:${H.name()}`,_)}else if(H.optional){let _=null;if(J.length>0&&!q(J[0]))_=J.shift();this.emit(`option:${H.name()}`,_)}else this.emit(`option:${H.name()}`);Y=H.variadic?H:null;continue}}if(K.length>2&&K[0]==="-"&&K[1]!=="-"){const H=this._findOption(`-${K[1]}`);if(H){if(H.required||H.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${H.name()}`,K.slice(2));else this.emit(`option:${H.name()}`),J.unshift(`-${K.slice(2)}`);continue}}if(/^--[^=]+=/.test(K)){const H=K.indexOf("="),_=this._findOption(K.slice(0,H));if(_&&(_.required||_.optional)){this.emit(`option:${_.name()}`,K.slice(H+1));continue}}if(q(K))Z=$;if((this._enablePositionalOptions||this._passThroughOptions)&&X.length===0&&$.length===0){if(this._findCommand(K)){if(X.push(K),J.length>0)$.push(...J);break}else if(K===this._helpCommandName&&this._hasImplicitHelpCommand()){if(X.push(K),J.length>0)X.push(...J);break}else if(this._defaultCommandName){if($.push(K),J.length>0)$.push(...J);break}}if(this._passThroughOptions){if(Z.push(K),J.length>0)Z.push(...J);break}Z.push(K)}return{operands:X,unknown:$}}opts(){if(this._storeOptionsAsProperties){const Q={},X=this.options.length;for(let $=0;$<X;$++){const Z=this.options[$].attributeName();Q[Z]=Z===this._versionOptionName?this._version:this[Z]}return Q}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((Q,X)=>Object.assign(Q,X.opts()),{})}error(Q,X){if(this._outputConfiguration.outputError(`${Q}\n`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0});const $=X||{},Z=$.exitCode||1,J=$.code||"commander.error";this._exit(Z,J,Q)}_parseOptionsEnv(){this.options.forEach((Q)=>{if(Q.envVar&&Q.envVar in C.env){const X=Q.attributeName();if(this.getOptionValue(X)===void 0||["default","config","env"].includes(this.getOptionValueSource(X)))if(Q.required||Q.optional)this.emit(`optionEnv:${Q.name()}`,C.env[Q.envVar]);else this.emit(`optionEnv:${Q.name()}`)}})}_parseOptionsImplied(){const Q=new s2(this.options),X=($)=>{return this.getOptionValue($)!==void 0&&!["default","implied"].includes(this.getOptionValueSource($))};this.options.filter(($)=>$.implied!==void 0&&X($.attributeName())&&Q.valueFromOption(this.getOptionValue($.attributeName()),$)).forEach(($)=>{Object.keys($.implied).filter((Z)=>!X(Z)).forEach((Z)=>{this.setOptionValueWithSource(Z,$.implied[Z],"implied")})})}missingArgument(Q){const X=`error: missing required argument '${Q}'`;this.error(X,{code:"commander.missingArgument"})}optionMissingArgument(Q){const X=`error: option '${Q.flags}' argument missing`;this.error(X,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(Q){const X=`error: required option '${Q.flags}' not specified`;this.error(X,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(Q,X){const $=(q)=>{const Y=q.attributeName(),K=this.getOptionValue(Y),H=this.options.find((V)=>V.negate&&Y===V.attributeName()),_=this.options.find((V)=>!V.negate&&Y===V.attributeName());if(H&&(H.presetArg===void 0&&K===!1||H.presetArg!==void 0&&K===H.presetArg))return H;return _||q},Z=(q)=>{const Y=$(q),K=Y.attributeName();if(this.getOptionValueSource(K)==="env")return`environment variable '${Y.envVar}'`;return`option '${Y.flags}'`},J=`error: ${Z(Q)} cannot be used with ${Z(X)}`;this.error(J,{code:"commander.conflictingOption"})}unknownOption(Q){if(this._allowUnknownOption)return;let X="";if(Q.startsWith("--")&&this._showSuggestionAfterError){let Z=[],J=this;do{const q=J.createHelp().visibleOptions(J).filter((Y)=>Y.long).map((Y)=>Y.long);Z=Z.concat(q),J=J.parent}while(J&&!J._enablePositionalOptions);X=n8(Q,Z)}const $=`error: unknown option '${Q}'${X}`;this.error($,{code:"commander.unknownOption"})}_excessArguments(Q){if(this._allowExcessArguments)return;const X=this.registeredArguments.length,$=X===1?"":"s",J=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${X} argument${$} but got ${Q.length}.`;this.error(J,{code:"commander.excessArguments"})}unknownCommand(){const Q=this.args[0];let X="";if(this._showSuggestionAfterError){const Z=[];this.createHelp().visibleCommands(this).forEach((J)=>{if(Z.push(J.name()),J.alias())Z.push(J.alias())}),X=n8(Q,Z)}const $=`error: unknown command '${Q}'${X}`;this.error($,{code:"commander.unknownCommand"})}version(Q,X,$){if(Q===void 0)return this._version;this._version=Q,X=X||"-V, --version",$=$||"output the version number";const Z=this.createOption(X,$);return this._versionOptionName=Z.attributeName(),this.options.push(Z),this.on("option:"+Z.name(),()=>{this._outputConfiguration.writeOut(`${Q}\n`),this._exit(0,"commander.version",Q)}),this}description(Q,X){if(Q===void 0&&X===void 0)return this._description;if(this._description=Q,X)this._argsDescription=X;return this}summary(Q){if(Q===void 0)return this._summary;return this._summary=Q,this}alias(Q){if(Q===void 0)return this._aliases[0];let X=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)X=this.commands[this.commands.length-1];if(Q===X._name)throw new Error("Command alias can\'t be the same as its name");return X._aliases.push(Q),this}aliases(Q){if(Q===void 0)return this._aliases;return Q.forEach((X)=>this.alias(X)),this}usage(Q){if(Q===void 0){if(this._usage)return this._usage;const X=this.registeredArguments.map(($)=>{return n2($)});return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?X:[]).join(" ")}return this._usage=Q,this}name(Q){if(Q===void 0)return this._name;return this._name=Q,this}nameFromFilename(Q){return this._name=s.basename(Q,s.extname(Q)),this}executableDir(Q){if(Q===void 0)return this._executableDir;return this._executableDir=Q,this}helpInformation(Q){const X=this.createHelp();if(X.helpWidth===void 0)X.helpWidth=Q&&Q.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth();return X.formatHelp(this,X)}_getHelpContext(Q){Q=Q||{};const X={error:!!Q.error};let $;if(X.error)$=(Z)=>this._outputConfiguration.writeErr(Z);else $=(Z)=>this._outputConfiguration.writeOut(Z);return X.write=Q.write||$,X.command=this,X}outputHelp(Q){let X;if(typeof Q==="function")X=Q,Q=void 0;const $=this._getHelpContext(Q);this._getCommandAndAncestors().reverse().forEach((J)=>J.emit("beforeAllHelp",$)),this.emit("beforeHelp",$);let Z=this.helpInformation($);if(X){if(Z=X(Z),typeof Z!=="string"&&!Buffer.isBuffer(Z))throw new Error("outputHelp callback must return a string or a Buffer")}if($.write(Z),this._helpLongFlag)this.emit(this._helpLongFlag);this.emit("afterHelp",$),this._getCommandAndAncestors().forEach((J)=>J.emit("afterAllHelp",$))}helpOption(Q,X){if(typeof Q==="boolean")return this._hasHelpOption=Q,this;this._helpFlags=Q||this._helpFlags,this._helpDescription=X||this._helpDescription;const $=o2(this._helpFlags);return this._helpShortFlag=$.shortFlag,this._helpLongFlag=$.longFlag,this}help(Q){this.outputHelp(Q);let X=C.exitCode||0;if(X===0&&Q&&typeof Q!=="function"&&Q.error)X=1;this._exit(X,"commander.help","(outputHelp)")}addHelpText(Q,X){const $=["beforeAll","before","after","afterAll"];if(!$.includes(Q))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${$.join("', '")}'`);const Z=`${Q}Help`;return this.on(Z,(J)=>{let q;if(typeof X==="function")q=X({error:J.error,command:J.command});else q=X;if(q)J.write(`${q}\n`)}),this}}a2.Command=L6});var Q9=M((c,e8)=>{var{Argument:e2}=x0(),{Command:a8}=s8(),{CommanderError:Q5,InvalidArgumentError:t8}=G0(),{Help:X5}=U6(),{Option:$5}=G6();c=e8.exports=new a8;c.program=c;c.Command=a8;c.Option=$5;c.Argument=e2;c.Help=X5;c.CommanderError=Q5;c.InvalidArgumentError=t8;c.InvalidOptionArgumentError=t8});var Y9=M((dX,q9)=>{var Z9=function(Q,X,$){if(Q instanceof RegExp)Q=$9(Q,$);if(X instanceof RegExp)X=$9(X,$);var Z=J9(Q,X,$);return Z&&{start:Z[0],end:Z[1],pre:$.slice(0,Z[0]),body:$.slice(Z[0]+Q.length,Z[1]),post:$.slice(Z[1]+X.length)}},$9=function(Q,X){var $=X.match(Q);return $?$[0]:null},J9=function(Q,X,$){var Z,J,q,Y,K,H=$.indexOf(Q),_=$.indexOf(X,H+1),V=H;if(H>=0&&_>0){if(Q===X)return[H,_];Z=[],q=$.length;while(V>=0&&!K){if(V==H)Z.push(V),H=$.indexOf(Q,V+1);else if(Z.length==1)K=[Z.pop(),_];else{if(J=Z.pop(),J<q)q=J,Y=_;_=$.indexOf(X,V+1)}V=H<_&&H>=0?H:_}if(Z.length)K=[q,Y]}return K};q9.exports=Z9;Z9.range=J9});var G9=M((pX,U9)=>{var R6=function(Q){return parseInt(Q,10)==Q?parseInt(Q,10):Q.charCodeAt(0)},Z5=function(Q){return Q.split("\\\\").join(H9).split("\\{").join(_9).split("\\}").join(w6).split("\\,").join(V9).split("\\.").join(j9)},J5=function(Q){return Q.split(H9).join("\\").split(_9).join("{").split(w6).join("}").split(V9).join(",").split(j9).join(".")},W9=function(Q){if(!Q)return[""];var X=[],$=K9("{","}",Q);if(!$)return Q.split(",");var{pre:Z,body:J,post:q}=$,Y=Z.split(",");Y[Y.length-1]+="{"+J+"}";var K=W9(q);if(q.length)Y[Y.length-1]+=K.shift(),Y.push.apply(Y,K);return X.push.apply(X,Y),X},q5=function(Q){if(!Q)return[];if(Q.substr(0,2)==="{}")Q="\\{\\}"+Q.substr(2);return z0(Z5(Q),!0).map(J5)},Y5=function(Q){return"{"+Q+"}"},K5=function(Q){return/^-?0\d/.test(Q)},H5=function(Q,X){return Q<=X},_5=function(Q,X){return Q>=X},z0=function(Q,X){var $=[],Z=K9("{","}",Q);if(!Z)return[Q];var J=Z.pre,q=Z.post.length?z0(Z.post,!1):[""];if(/\$$/.test(Z.pre))for(var Y=0;Y<q.length;Y++){var K=J+"{"+Z.body+"}"+q[Y];$.push(K)}else{var H=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(Z.body),_=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(Z.body),V=H||_,W=Z.body.indexOf(",")>=0;if(!V&&!W){if(Z.post.match(/,.*\}/))return Q=Z.pre+"{"+Z.body+w6+Z.post,z0(Q);return[Q]}var j;if(V)j=Z.body.split(/\.\./);else if(j=W9(Z.body),j.length===1){if(j=z0(j[0],!1).map(Y5),j.length===1)return q.map(function(l7){return Z.pre+j[0]+l7})}var U;if(V){var G=R6(j[0]),z=R6(j[1]),B=Math.max(j[0].length,j[1].length),w=j.length==3?Math.abs(R6(j[2])):1,R=H5,L=z<G;if(L)w*=-1,R=_5;var D=j.some(K5);U=[];for(var v=G;R(v,z);v+=w){var O;if(_){if(O=String.fromCharCode(v),O==="\\")O=""}else if(O=String(v),D){var E0=B-O.length;if(E0>0){var U0=new Array(E0+1).join("0");if(v<0)O="-"+U0+O.slice(1);else O=U0+O}}U.push(O)}}else{U=[];for(var i=0;i<j.length;i++)U.push.apply(U,z0(j[i],!1))}for(var i=0;i<U.length;i++)for(var Y=0;Y<q.length;Y++){var K=J+U[i]+q[Y];if(!X||V||K)$.push(K)}}return $},K9=Y9();U9.exports=q5;var H9="\0SLASH"+Math.random()+"\0",_9="\0OPEN"+Math.random()+"\0",w6="\0CLOSE"+Math.random()+"\0",V9="\0COMMA"+Math.random()+"\0",j9="\0PERIOD"+Math.random()+"\0"});var q7=M((n$,J7)=>{class Z7{constructor(Q,X,$){this.etaBufferLength=Q||100,this.valueBuffer=[$],this.timeBuffer=[X],this.eta="0"}update(Q,X,$){this.valueBuffer.push(X),this.timeBuffer.push(Q),this.calculate($-X)}getTime(){return this.eta}calculate(Q){const X=this.valueBuffer.length,$=Math.min(this.etaBufferLength,X),Z=this.valueBuffer[X-1]-this.valueBuffer[X-$],J=this.timeBuffer[X-1]-this.timeBuffer[X-$],q=Z/J;this.valueBuffer=this.valueBuffer.slice(-this.etaBufferLength),this.timeBuffer=this.timeBuffer.slice(-this.etaBufferLength);const Y=Math.ceil(Q/q/1000);if(isNaN(Y))this.eta="NULL";else if(!isFinite(Y))this.eta="INF";else if(Y>1e7)this.eta="INF";else if(Y<0)this.eta=0;else this.eta=Y}}J7.exports=Z7});var u6=M((r$,K7)=>{var J0=k("readline");class Y7{constructor(Q){this.stream=Q,this.linewrap=!0,this.dy=0}cursorSave(){if(!this.stream.isTTY)return;this.stream.write("\x1B7")}cursorRestore(){if(!this.stream.isTTY)return;this.stream.write("\x1B8")}cursor(Q){if(!this.stream.isTTY)return;if(Q)this.stream.write("\x1B[?25h");else this.stream.write("\x1B[?25l")}cursorTo(Q=null,X=null){if(!this.stream.isTTY)return;J0.cursorTo(this.stream,Q,X)}cursorRelative(Q=null,X=null){if(!this.stream.isTTY)return;this.dy=this.dy+X,J0.moveCursor(this.stream,Q,X)}cursorRelativeReset(){if(!this.stream.isTTY)return;J0.moveCursor(this.stream,0,-this.dy),J0.cursorTo(this.stream,0,null),this.dy=0}clearRight(){if(!this.stream.isTTY)return;J0.clearLine(this.stream,1)}clearLine(){if(!this.stream.isTTY)return;J0.clearLine(this.stream,0)}clearBottom(){if(!this.stream.isTTY)return;J0.clearScreenDown(this.stream)}newline(){this.stream.write("\n"),this.dy++}write(Q,X=!1){if(this.linewrap===!0&&X===!1)this.stream.write(Q.substr(0,this.getWidth()));else this.stream.write(Q)}lineWrapping(Q){if(!this.stream.isTTY)return;if(this.linewrap=Q,Q)this.stream.write("\x1B[?7h");else this.stream.write("\x1B[?7l")}isTTY(){return this.stream.isTTY===!0}getWidth(){return this.stream.columns||(this.stream.isTTY?80:200)}}K7.exports=Y7});var _7=M((o$,H7)=>{H7.exports=({onlyFirst:Q=!1}={})=>{const X=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(X,Q?void 0:"g")}});var j7=M((s$,V7)=>{var OQ=_7();V7.exports=(Q)=>typeof Q==="string"?Q.replace(OQ(),""):Q});var U7=M((a$,h6)=>{var W7=(Q)=>{if(Number.isNaN(Q))return!1;if(Q>=4352&&(Q<=4447||Q===9001||Q===9002||11904<=Q&&Q<=12871&&Q!==12351||12880<=Q&&Q<=19903||19968<=Q&&Q<=42182||43360<=Q&&Q<=43388||44032<=Q&&Q<=55203||63744<=Q&&Q<=64255||65040<=Q&&Q<=65049||65072<=Q&&Q<=65131||65281<=Q&&Q<=65376||65504<=Q&&Q<=65510||110592<=Q&&Q<=110593||127488<=Q&&Q<=127569||131072<=Q&&Q<=262141))return!0;return!1};h6.exports=W7;h6.exports.default=W7});var z7=M((t$,G7)=>{G7.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var M7=M((e$,g6)=>{var kQ=j7(),EQ=U7(),vQ=z7(),B7=(Q)=>{if(typeof Q!=="string"||Q.length===0)return 0;if(Q=kQ(Q),Q.length===0)return 0;Q=Q.replace(vQ(),"  ");let X=0;for(let $=0;$<Q.length;$++){const Z=Q.codePointAt($);if(Z<=31||Z>=127&&Z<=159)continue;if(Z>=768&&Z<=879)continue;if(Z>65535)$++;X+=EQ(Z)?2:1}return X};g6.exports=B7;g6.exports.default=B7});var m6=M((Q3,L7)=>{L7.exports=function Q(X,$,Z){if($.autopadding!==!0)return X;function J(q,Y){return($.autopaddingChar+q).slice(-Y)}switch(Z){case"percentage":return J(X,3);default:return X}}});var c6=M((X3,R7)=>{R7.exports=function Q(X,$){const Z=Math.round(X*$.barsize),J=$.barsize-Z;return $.barCompleteString.substr(0,Z)+$.barGlue+$.barIncompleteString.substr(0,J)}});var l6=M(($3,w7)=>{w7.exports=function Q(X,$,Z){function J(Y){if(Z)return Z*Math.round(Y/Z);else return Y}function q(Y){return($.autopaddingChar+Y).slice(-2)}if(X>3600)return q(Math.floor(X/3600))+"h"+q(J(X%3600/60))+"m";else if(X>60)return q(Math.floor(X/60))+"m"+q(J(X%60))+"s";else if(X>10)return q(J(X))+"s";else return q(X)+"s"}});var d6=M((Z3,I7)=>{var yQ=M7(),xQ=m6(),bQ=c6(),fQ=l6();I7.exports=function Q(X,$,Z){let J=X.format;const q=X.formatTime||fQ,Y=X.formatValue||xQ,K=X.formatBar||bQ,H=Math.floor($.progress*100)+"",_=$.stopTime||Date.now(),V=Math.round((_-$.startTime)/1000),W=Object.assign({},Z,{bar:K($.progress,X),percentage:Y(H,X,"percentage"),total:Y($.total,X,"total"),value:Y($.value,X,"value"),eta:Y($.eta,X,"eta"),eta_formatted:q($.eta,X,5),duration:Y(V,X,"duration"),duration_formatted:q(V,X,1)});J=J.replace(/\{(\w+)\}/g,function(G,z){if(typeof W[z]!=="undefined")return W[z];return G});const j=Math.max(0,$.maxWidth-yQ(J)-2),U=Math.floor(j/2);switch(X.align){case"right":J=j>0?" ".repeat(j)+J:J;break;case"center":J=U>0?" ".repeat(U)+J:J;break;case"left":default:break}return J}});var $6=M((J3,C7)=>{var I=function(Q,X){if(typeof Q==="undefined"||Q===null)return X;else return Q};C7.exports={parse:function Q(X,$){const Z={},J=Object.assign({},$,X);return Z.throttleTime=1000/I(J.fps,10),Z.stream=I(J.stream,process.stderr),Z.terminal=I(J.terminal,null),Z.clearOnComplete=I(J.clearOnComplete,!1),Z.stopOnComplete=I(J.stopOnComplete,!1),Z.barsize=I(J.barsize,40),Z.align=I(J.align,"left"),Z.hideCursor=I(J.hideCursor,!1),Z.linewrap=I(J.linewrap,!1),Z.barGlue=I(J.barGlue,""),Z.barCompleteChar=I(J.barCompleteChar,"="),Z.barIncompleteChar=I(J.barIncompleteChar,"-"),Z.format=I(J.format,"progress [{bar}] {percentage}% | ETA: {eta}s | {value}/{total}"),Z.formatTime=I(J.formatTime,null),Z.formatValue=I(J.formatValue,null),Z.formatBar=I(J.formatBar,null),Z.etaBufferLength=I(J.etaBuffer,10),Z.etaAsynchronousUpdate=I(J.etaAsynchronousUpdate,!1),Z.progressCalculationRelative=I(J.progressCalculationRelative,!1),Z.synchronousUpdate=I(J.synchronousUpdate,!0),Z.noTTYOutput=I(J.noTTYOutput,!1),Z.notTTYSchedule=I(J.notTTYSchedule,2000),Z.emptyOnZero=I(J.emptyOnZero,!1),Z.forceRedraw=I(J.forceRedraw,!1),Z.autopadding=I(J.autopadding,!1),Z.gracefulExit=I(J.gracefulExit,!1),Z},assignDerivedOptions:function Q(X){return X.barCompleteString=X.barCompleteChar.repeat(X.barsize+1),X.barIncompleteString=X.barIncompleteChar.repeat(X.barsize+1),X.autopaddingChar=X.autopadding?I(X.autopaddingChar,"   "):"",X}}});var p6=M((q3,A7)=>{var D7=q7(),uQ=u6(),hQ=d6(),gQ=$6(),mQ=k("events");A7.exports=class Q extends mQ{constructor(X){super();this.options=gQ.assignDerivedOptions(X),this.terminal=this.options.terminal?this.options.terminal:new uQ(this.options.stream),this.value=0,this.startValue=0,this.total=100,this.lastDrawnString=null,this.startTime=null,this.stopTime=null,this.lastRedraw=Date.now(),this.eta=new D7(this.options.etaBufferLength,0,0),this.payload={},this.isActive=!1,this.formatter=typeof this.options.format==="function"?this.options.format:hQ}render(X=!1){const $={progress:this.getProgress(),eta:this.eta.getTime(),startTime:this.startTime,stopTime:this.stopTime,total:this.total,value:this.value,maxWidth:this.terminal.getWidth()};if(this.options.etaAsynchronousUpdate)this.updateETA();const Z=this.formatter(this.options,$,this.payload);if(X||this.options.forceRedraw||this.options.noTTYOutput&&!this.terminal.isTTY()||this.lastDrawnString!=Z)this.emit("redraw-pre"),this.terminal.cursorTo(0,null),this.terminal.write(Z),this.terminal.clearRight(),this.lastDrawnString=Z,this.lastRedraw=Date.now(),this.emit("redraw-post")}start(X,$,Z){this.value=$||0,this.total=typeof X!=="undefined"&&X>=0?X:100,this.startValue=$||0,this.payload=Z||{},this.startTime=Date.now(),this.stopTime=null,this.lastDrawnString="",this.eta=new D7(this.options.etaBufferLength,this.startTime,this.value),this.isActive=!0,this.emit("start",X,$)}stop(){this.isActive=!1,this.stopTime=Date.now(),this.emit("stop",this.total,this.value)}update(X,$={}){if(typeof X==="number")this.value=X,this.eta.update(Date.now(),X,this.total);const Z=(typeof X==="object"?X:$)||{};this.emit("update",this.total,this.value);for(let J in Z)this.payload[J]=Z[J];if(this.value>=this.getTotal()&&this.options.stopOnComplete)this.stop()}getProgress(){let X=this.value/this.total;if(this.options.progressCalculationRelative)X=(this.value-this.startValue)/(this.total-this.startValue);if(isNaN(X))X=this.options&&this.options.emptyOnZero?0:1;return X=Math.min(Math.max(X,0),1),X}increment(X=1,$={}){if(typeof X==="object")this.update(this.value+1,X);else this.update(this.value+X,$)}getTotal(){return this.total}setTotal(X){if(typeof X!=="undefined"&&X>=0)this.total=X}updateETA(){this.eta.update(Date.now(),this.value,this.total)}}});var N7=M((Y3,F7)=>{var cQ=p6(),lQ=$6();F7.exports=class Q extends cQ{constructor(X,$){super(lQ.parse(X,$));if(this.timer=null,this.options.noTTYOutput&&this.terminal.isTTY()===!1)this.options.synchronousUpdate=!1;this.schedulingRate=this.terminal.isTTY()?this.options.throttleTime:this.options.notTTYSchedule,this.sigintCallback=null}render(){if(this.timer)clearTimeout(this.timer),this.timer=null;if(super.render(),this.options.noTTYOutput&&this.terminal.isTTY()===!1)this.terminal.newline();this.timer=setTimeout(this.render.bind(this),this.schedulingRate)}update(X,$){if(!this.timer)return;if(super.update(X,$),this.options.synchronousUpdate&&this.lastRedraw+this.options.throttleTime*2<Date.now())this.render()}start(X,$,Z){if(this.options.noTTYOutput===!1&&this.terminal.isTTY()===!1)return;if(this.sigintCallback===null&&this.options.gracefulExit)this.sigintCallback=this.stop.bind(this),process.once("SIGINT",this.sigintCallback),process.once("SIGTERM",this.sigintCallback);if(this.terminal.cursorSave(),this.options.hideCursor===!0)this.terminal.cursor(!1);if(this.options.linewrap===!1)this.terminal.lineWrapping(!1);super.start(X,$,Z),this.render()}stop(){if(!this.timer)return;if(this.sigintCallback)process.removeListener("SIGINT",this.sigintCallback),process.removeListener("SIGTERM",this.sigintCallback),this.sigintCallback=null;if(this.render(),super.stop(),clearTimeout(this.timer),this.timer=null,this.options.hideCursor===!0)this.terminal.cursor(!0);if(this.options.linewrap===!1)this.terminal.lineWrapping(!0);if(this.terminal.cursorRestore(),this.options.clearOnComplete)this.terminal.cursorTo(0,null),this.terminal.clearLine();else this.terminal.newline()}}});var P7=M((K3,T7)=>{var dQ=u6(),pQ=p6(),iQ=$6(),nQ=k("events");T7.exports=class Q extends nQ{constructor(X,$){super();this.bars=[],this.options=iQ.parse(X,$),this.options.synchronousUpdate=!1,this.terminal=this.options.terminal?this.options.terminal:new dQ(this.options.stream),this.timer=null,this.isActive=!1,this.schedulingRate=this.terminal.isTTY()?this.options.throttleTime:this.options.notTTYSchedule,this.loggingBuffer=[],this.sigintCallback=null}create(X,$,Z,J={}){const q=new pQ(Object.assign({},this.options,{terminal:this.terminal},J));if(this.bars.push(q),this.options.noTTYOutput===!1&&this.terminal.isTTY()===!1)return q;if(this.sigintCallback===null&&this.options.gracefulExit)this.sigintCallback=this.stop.bind(this),process.once("SIGINT",this.sigintCallback),process.once("SIGTERM",this.sigintCallback);if(!this.isActive){if(this.options.hideCursor===!0)this.terminal.cursor(!1);if(this.options.linewrap===!1)this.terminal.lineWrapping(!1);this.timer=setTimeout(this.update.bind(this),this.schedulingRate)}return this.isActive=!0,q.start(X,$,Z),this.emit("start"),q}remove(X){const $=this.bars.indexOf(X);if($<0)return!1;return this.bars.splice($,1),this.update(),this.terminal.newline(),this.terminal.clearBottom(),!0}update(){if(this.timer)clearTimeout(this.timer),this.timer=null;if(this.emit("update-pre"),this.terminal.cursorRelativeReset(),this.emit("redraw-pre"),this.loggingBuffer.length>0){this.terminal.clearLine();while(this.loggingBuffer.length>0)this.terminal.write(this.loggingBuffer.shift(),!0)}for(let X=0;X<this.bars.length;X++){if(X>0)this.terminal.newline();this.bars[X].render()}if(this.emit("redraw-post"),this.options.noTTYOutput&&this.terminal.isTTY()===!1)this.terminal.newline(),this.terminal.newline();if(this.timer=setTimeout(this.update.bind(this),this.schedulingRate),this.emit("update-post"),this.options.stopOnComplete&&!this.bars.find((X)=>X.isActive))this.stop()}stop(){if(clearTimeout(this.timer),this.timer=null,this.sigintCallback)process.removeListener("SIGINT",this.sigintCallback),process.removeListener("SIGTERM",this.sigintCallback),this.sigintCallback=null;if(this.isActive=!1,this.options.hideCursor===!0)this.terminal.cursor(!0);if(this.options.linewrap===!1)this.terminal.lineWrapping(!0);if(this.terminal.cursorRelativeReset(),this.emit("stop-pre-clear"),this.options.clearOnComplete)this.terminal.clearBottom();else{for(let X=0;X<this.bars.length;X++){if(X>0)this.terminal.newline();this.bars[X].render(),this.bars[X].stop()}this.terminal.newline()}this.emit("stop")}log(X){this.loggingBuffer.push(X)}}});var O7=M((H3,S7)=>{S7.exports={format:"progress [{bar}] {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"=",barIncompleteChar:"-"}});var E7=M((_3,k7)=>{k7.exports={format:" {bar} {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"\u2588",barIncompleteChar:"\u2591"}});var y7=M((V3,v7)=>{v7.exports={format:" \x1B[90m{bar}\x1B[0m {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"\u2588",barIncompleteChar:"\u2591"}});var b7=M((j3,x7)=>{x7.exports={format:" {bar}\u25A0 {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"\u25A0",barIncompleteChar:" "}});var u7=M((W3,f7)=>{var rQ=O7(),oQ=E7(),sQ=y7(),aQ=b7();f7.exports={legacy:rQ,shades_classic:oQ,shades_grey:sQ,rect:aQ}});var m7=M((U3,g7)=>{var h7=N7(),tQ=P7(),eQ=u7(),QX=d6(),XX=m6(),$X=c6(),ZX=l6();g7.exports={Bar:h7,SingleBar:h7,MultiBar:tQ,Presets:eQ,Format:{Formatter:QX,BarFormat:$X,ValueFormat:XX,TimeFormat:ZX}}});var c7=v0(u8(),1);import i6 from"node:path";import k0 from"node:fs";import n6 from"node:os";var X9=v0(Q9(),1),{program:b0,createCommand:vX,createArgument:yX,createOption:xX,CommanderError:bX,InvalidArgumentError:fX,InvalidOptionArgumentError:uX,Command:hX,Argument:gX,Option:mX,Help:cX}=X9.default;var C9=v0(G9(),1);var B0=(Q)=>{if(typeof Q!=="string")throw new TypeError("invalid pattern");if(Q.length>65536)throw new TypeError("pattern is too long")};var V5={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},M0=(Q)=>Q.replace(/[[\]\\-]/g,"\\$&"),j5=(Q)=>Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),z9=(Q)=>Q.join(""),B9=(Q,X)=>{const $=X;if(Q.charAt($)!=="[")throw new Error("not in a brace expression");const Z=[],J=[];let q=$+1,Y=!1,K=!1,H=!1,_=!1,V=$,W="";Q:while(q<Q.length){const z=Q.charAt(q);if((z==="!"||z==="^")&&q===$+1){_=!0,q++;continue}if(z==="]"&&Y&&!H){V=q+1;break}if(Y=!0,z==="\\"){if(!H){H=!0,q++;continue}}if(z==="["&&!H){for(let[B,[w,R,L]]of Object.entries(V5))if(Q.startsWith(B,q)){if(W)return["$.",!1,Q.length-$,!0];if(q+=B.length,L)J.push(w);else Z.push(w);K=K||R;continue Q}}if(H=!1,W){if(z>W)Z.push(M0(W)+"-"+M0(z));else if(z===W)Z.push(M0(z));W="",q++;continue}if(Q.startsWith("-]",q+1)){Z.push(M0(z+"-")),q+=2;continue}if(Q.startsWith("-",q+1)){W=z,q+=2;continue}Z.push(M0(z)),q++}if(V<q)return["",!1,0,!1];if(!Z.length&&!J.length)return["$.",!1,Q.length-$,!0];if(J.length===0&&Z.length===1&&/^\\?.$/.test(Z[0])&&!_){const z=Z[0].length===2?Z[0].slice(-1):Z[0];return[j5(z),!1,V-$,!1]}const j="["+(_?"^":"")+z9(Z)+"]",U="["+(_?"":"^")+z9(J)+"]";return[Z.length&&J.length?"("+j+"|"+U+")":Z.length?j:U,K,V-$,!0]};var l=(Q,{windowsPathsNoEscape:X=!1}={})=>{return X?Q.replace(/\[([^\/\\])\]/g,"$1"):Q.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};var W5=new Set(["!","?","+","*","@"]),M9=(Q)=>W5.has(Q),U5="(?!(?:^|/)\\.\\.?(?:$|/))",f0="(?!\\.)",G5=new Set(["[","."]),z5=new Set(["..","."]),B5=new Set("().*{}+?[]^$\\!"),M5=(Q)=>Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),I6="[^/]",L9=I6+"*?",R9=I6+"+?";class P{type;#Q;#$;#q=!1;#Z=[];#K;#_;#j;#H=!1;#Y;#X;#z=!1;constructor(Q,X,$={}){if(this.type=Q,Q)this.#$=!0;if(this.#K=X,this.#Q=this.#K?this.#K.#Q:this,this.#Y=this.#Q===this?$:this.#Q.#Y,this.#j=this.#Q===this?[]:this.#Q.#j,Q==="!"&&!this.#Q.#H)this.#j.push(this);this.#_=this.#K?this.#K.#Z.length:0}get hasMagic(){if(this.#$!==void 0)return this.#$;for(let Q of this.#Z){if(typeof Q==="string")continue;if(Q.type||Q.hasMagic)return this.#$=!0}return this.#$}toString(){if(this.#X!==void 0)return this.#X;if(!this.type)return this.#X=this.#Z.map((Q)=>String(Q)).join("");else return this.#X=this.type+"("+this.#Z.map((Q)=>String(Q)).join("|")+")"}#M(){if(this!==this.#Q)throw new Error("should only call on root");if(this.#H)return this;this.toString(),this.#H=!0;let Q;while(Q=this.#j.pop()){if(Q.type!=="!")continue;let X=Q,$=X.#K;while($){for(let Z=X.#_+1;!$.type&&Z<$.#Z.length;Z++)for(let J of Q.#Z){if(typeof J==="string")throw new Error("string part in extglob AST??");J.copyIn($.#Z[Z])}X=$,$=X.#K}}return this}push(...Q){for(let X of Q){if(X==="")continue;if(typeof X!=="string"&&!(X instanceof P&&X.#K===this))throw new Error("invalid part: "+X);this.#Z.push(X)}}toJSON(){const Q=this.type===null?this.#Z.slice().map((X)=>typeof X==="string"?X:X.toJSON()):[this.type,...this.#Z.map((X)=>X.toJSON())];if(this.isStart()&&!this.type)Q.unshift([]);if(this.isEnd()&&(this===this.#Q||this.#Q.#H&&this.#K?.type==="!"))Q.push({});return Q}isStart(){if(this.#Q===this)return!0;if(!this.#K?.isStart())return!1;if(this.#_===0)return!0;const Q=this.#K;for(let X=0;X<this.#_;X++){const $=Q.#Z[X];if(!($ instanceof P&&$.type==="!"))return!1}return!0}isEnd(){if(this.#Q===this)return!0;if(this.#K?.type==="!")return!0;if(!this.#K?.isEnd())return!1;if(!this.type)return this.#K?.isEnd();const Q=this.#K?this.#K.#Z.length:0;return this.#_===Q-1}copyIn(Q){if(typeof Q==="string")this.push(Q);else this.push(Q.clone(this))}clone(Q){const X=new P(this.type,Q);for(let $ of this.#Z)X.copyIn($);return X}static#U(Q,X,$,Z){let J=!1,q=!1,Y=-1,K=!1;if(X.type===null){let j=$,U="";while(j<Q.length){const G=Q.charAt(j++);if(J||G==="\\"){J=!J,U+=G;continue}if(q){if(j===Y+1){if(G==="^"||G==="!")K=!0}else if(G==="]"&&!(j===Y+2&&K))q=!1;U+=G;continue}else if(G==="["){q=!0,Y=j,K=!1,U+=G;continue}if(!Z.noext&&M9(G)&&Q.charAt(j)==="("){X.push(U),U="";const z=new P(G,X);j=P.#U(Q,z,j,Z),X.push(z);continue}U+=G}return X.push(U),j}let H=$+1,_=new P(null,X);const V=[];let W="";while(H<Q.length){const j=Q.charAt(H++);if(J||j==="\\"){J=!J,W+=j;continue}if(q){if(H===Y+1){if(j==="^"||j==="!")K=!0}else if(j==="]"&&!(H===Y+2&&K))q=!1;W+=j;continue}else if(j==="["){q=!0,Y=H,K=!1,W+=j;continue}if(M9(j)&&Q.charAt(H)==="("){_.push(W),W="";const U=new P(j,_);_.push(U),H=P.#U(Q,U,H,Z);continue}if(j==="|"){_.push(W),W="",V.push(_),_=new P(null,X);continue}if(j===")"){if(W===""&&X.#Z.length===0)X.#z=!0;return _.push(W),W="",X.push(...V,_),H}W+=j}return X.type=null,X.#$=void 0,X.#Z=[Q.substring($-1)],H}static fromGlob(Q,X={}){const $=new P(null,void 0,X);return P.#U(Q,$,0,X),$}toMMPattern(){if(this!==this.#Q)return this.#Q.toMMPattern();const Q=this.toString(),[X,$,Z,J]=this.toRegExpSource();if(!(Z||this.#$||this.#Y.nocase&&!this.#Y.nocaseMagicOnly&&Q.toUpperCase()!==Q.toLowerCase()))return $;const Y=(this.#Y.nocase?"i":"")+(J?"u":"");return Object.assign(new RegExp(`^${X}\$`,Y),{_src:X,_glob:Q})}toRegExpSource(Q){const X=Q??!!this.#Y.dot;if(this.#Q===this)this.#M();if(!this.type){const K=this.isStart()&&this.isEnd(),H=this.#Z.map((j)=>{const[U,G,z,B]=typeof j==="string"?P.#w(j,this.#$,K):j.toRegExpSource(Q);return this.#$=this.#$||z,this.#q=this.#q||B,U}).join("");let _="";if(this.isStart()){if(typeof this.#Z[0]==="string"){if(!(this.#Z.length===1&&z5.has(this.#Z[0]))){const U=G5,G=X&&U.has(H.charAt(0))||H.startsWith("\\.")&&U.has(H.charAt(2))||H.startsWith("\\.\\.")&&U.has(H.charAt(4)),z=!X&&!Q&&U.has(H.charAt(0));_=G?U5:z?f0:""}}}let V="";if(this.isEnd()&&this.#Q.#H&&this.#K?.type==="!")V="(?:$|\\/)";return[_+H+V,l(H),this.#$=!!this.#$,this.#q]}const $=this.type==="*"||this.type==="+",Z=this.type==="!"?"(?:(?!(?:":"(?:";let J=this.#W(X);if(this.isStart()&&this.isEnd()&&!J&&this.type!=="!"){const K=this.toString();return this.#Z=[K],this.type=null,this.#$=void 0,[K,l(this.toString()),!1,!1]}let q=!$||Q||X||!f0?"":this.#W(!0);if(q===J)q="";if(q)J=`(?:${J})(?:${q})*?`;let Y="";if(this.type==="!"&&this.#z)Y=(this.isStart()&&!X?f0:"")+R9;else{const K=this.type==="!"?"))"+(this.isStart()&&!X&&!Q?f0:"")+L9+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&q?")":this.type==="*"&&q?")?":`)${this.type}`;Y=Z+J+K}return[Y,l(J),this.#$=!!this.#$,this.#q]}#W(Q){return this.#Z.map((X)=>{if(typeof X==="string")throw new Error("string type in extglob ast??");const[$,Z,J,q]=X.toRegExpSource(Q);return this.#q=this.#q||q,$}).filter((X)=>!(this.isStart()&&this.isEnd())||!!X).join("|")}static#w(Q,X,$=!1){let Z=!1,J="",q=!1;for(let Y=0;Y<Q.length;Y++){const K=Q.charAt(Y);if(Z){Z=!1,J+=(B5.has(K)?"\\":"")+K;continue}if(K==="\\"){if(Y===Q.length-1)J+="\\\\";else Z=!0;continue}if(K==="["){const[H,_,V,W]=B9(Q,Y);if(V){J+=H,q=q||_,Y+=V-1,X=X||W;continue}}if(K==="*"){if($&&Q==="*")J+=R9;else J+=L9;X=!0;continue}if(K==="?"){J+=I6,X=!0;continue}J+=M5(K)}return[J,l(Q),!!X,q]}}var K0=(Q,{windowsPathsNoEscape:X=!1}={})=>{return X?Q.replace(/[?*()[\]]/g,"[$&]"):Q.replace(/[?*()[\]\\]/g,"\\$&")};var y=(Q,X,$={})=>{if(B0(X),!$.nocomment&&X.charAt(0)==="#")return!1;return new h(X,$).match(Q)},L5=/^\*+([^+@!?\*\[\(]*)$/,R5=(Q)=>(X)=>!X.startsWith(".")&&X.endsWith(Q),w5=(Q)=>(X)=>X.endsWith(Q),I5=(Q)=>{return Q=Q.toLowerCase(),(X)=>!X.startsWith(".")&&X.toLowerCase().endsWith(Q)},C5=(Q)=>{return Q=Q.toLowerCase(),(X)=>X.toLowerCase().endsWith(Q)},D5=/^\*+\.\*+$/,A5=(Q)=>!Q.startsWith(".")&&Q.includes("."),F5=(Q)=>Q!=="."&&Q!==".."&&Q.includes("."),N5=/^\.\*+$/,T5=(Q)=>Q!=="."&&Q!==".."&&Q.startsWith("."),P5=/^\*+$/,S5=(Q)=>Q.length!==0&&!Q.startsWith("."),O5=(Q)=>Q.length!==0&&Q!=="."&&Q!=="..",k5=/^\?+([^+@!?\*\[\(]*)?$/,E5=([Q,X=""])=>{const $=D9([Q]);if(!X)return $;return X=X.toLowerCase(),(Z)=>$(Z)&&Z.toLowerCase().endsWith(X)},v5=([Q,X=""])=>{const $=A9([Q]);if(!X)return $;return X=X.toLowerCase(),(Z)=>$(Z)&&Z.toLowerCase().endsWith(X)},y5=([Q,X=""])=>{const $=A9([Q]);return!X?$:(Z)=>$(Z)&&Z.endsWith(X)},x5=([Q,X=""])=>{const $=D9([Q]);return!X?$:(Z)=>$(Z)&&Z.endsWith(X)},D9=([Q])=>{const X=Q.length;return($)=>$.length===X&&!$.startsWith(".")},A9=([Q])=>{const X=Q.length;return($)=>$.length===X&&$!=="."&&$!==".."},F9=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",w9={win32:{sep:"\\"},posix:{sep:"/"}},b5=F9==="win32"?w9.win32.sep:w9.posix.sep;y.sep=b5;var S=Symbol("globstar **");y.GLOBSTAR=S;var f5="[^/]",u5=f5+"*?",h5="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",g5="(?:(?!(?:\\/|^)\\.).)*?",m5=(Q,X={})=>($)=>y($,Q,X);y.filter=m5;var u=(Q,X={})=>Object.assign({},Q,X),c5=(Q)=>{if(!Q||typeof Q!=="object"||!Object.keys(Q).length)return y;const X=y;return Object.assign((Z,J,q={})=>X(Z,J,u(Q,q)),{Minimatch:class Z extends X.Minimatch{constructor(J,q={}){super(J,u(Q,q))}static defaults(J){return X.defaults(u(Q,J)).Minimatch}},AST:class Z extends X.AST{constructor(J,q,Y={}){super(J,q,u(Q,Y))}static fromGlob(J,q={}){return X.AST.fromGlob(J,u(Q,q))}},unescape:(Z,J={})=>X.unescape(Z,u(Q,J)),escape:(Z,J={})=>X.escape(Z,u(Q,J)),filter:(Z,J={})=>X.filter(Z,u(Q,J)),defaults:(Z)=>X.defaults(u(Q,Z)),makeRe:(Z,J={})=>X.makeRe(Z,u(Q,J)),braceExpand:(Z,J={})=>X.braceExpand(Z,u(Q,J)),match:(Z,J,q={})=>X.match(Z,J,u(Q,q)),sep:X.sep,GLOBSTAR:S})};y.defaults=c5;var N9=(Q,X={})=>{if(B0(Q),X.nobrace||!/\{(?:(?!\{).)*\}/.test(Q))return[Q];return C9.default(Q)};y.braceExpand=N9;var l5=(Q,X={})=>new h(Q,X).makeRe();y.makeRe=l5;var d5=(Q,X,$={})=>{const Z=new h(X,$);if(Q=Q.filter((J)=>Z.match(J)),Z.options.nonull&&!Q.length)Q.push(X);return Q};y.match=d5;var I9=/[?*]|[+@!]\(.*?\)|\[|\]/,p5=(Q)=>Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class h{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(Q,X={}){if(B0(Q),X=X||{},this.options=X,this.pattern=Q,this.platform=X.platform||F9,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!X.windowsPathsNoEscape||X.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!X.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!X.nonegate,this.comment=!1,this.empty=!1,this.partial=!!X.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=X.windowsNoMagicRoot!==void 0?X.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let Q of this.set)for(let X of Q)if(typeof X!=="string")return!0;return!1}debug(...Q){}make(){const Q=this.pattern,X=this.options;if(!X.nocomment&&Q.charAt(0)==="#"){this.comment=!0;return}if(!Q){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],X.debug)this.debug=(...J)=>console.error(...J);this.debug(this.pattern,this.globSet);const $=this.globSet.map((J)=>this.slashSplit(J));this.globParts=this.preprocess($),this.debug(this.pattern,this.globParts);let Z=this.globParts.map((J,q,Y)=>{if(this.isWindows&&this.windowsNoMagicRoot){const K=J[0]===""&&J[1]===""&&(J[2]==="?"||!I9.test(J[2]))&&!I9.test(J[3]),H=/^[a-z]:/i.test(J[0]);if(K)return[...J.slice(0,4),...J.slice(4).map((_)=>this.parse(_))];else if(H)return[J[0],...J.slice(1).map((_)=>this.parse(_))]}return J.map((K)=>this.parse(K))});if(this.debug(this.pattern,Z),this.set=Z.filter((J)=>J.indexOf(!1)===-1),this.isWindows)for(let J=0;J<this.set.length;J++){const q=this.set[J];if(q[0]===""&&q[1]===""&&this.globParts[J][2]==="?"&&typeof q[3]==="string"&&/^[a-z]:$/i.test(q[3]))q[2]="?"}this.debug(this.pattern,this.set)}preprocess(Q){if(this.options.noglobstar){for(let $=0;$<Q.length;$++)for(let Z=0;Z<Q[$].length;Z++)if(Q[$][Z]==="**")Q[$][Z]="*"}const{optimizationLevel:X=1}=this.options;if(X>=2)Q=this.firstPhasePreProcess(Q),Q=this.secondPhasePreProcess(Q);else if(X>=1)Q=this.levelOneOptimize(Q);else Q=this.adjascentGlobstarOptimize(Q);return Q}adjascentGlobstarOptimize(Q){return Q.map((X)=>{let $=-1;while(($=X.indexOf("**",$+1))!==-1){let Z=$;while(X[Z+1]==="**")Z++;if(Z!==$)X.splice($,Z-$)}return X})}levelOneOptimize(Q){return Q.map((X)=>{return X=X.reduce(($,Z)=>{const J=$[$.length-1];if(Z==="**"&&J==="**")return $;if(Z===".."){if(J&&J!==".."&&J!=="."&&J!=="**")return $.pop(),$}return $.push(Z),$},[]),X.length===0?[""]:X})}levelTwoFileOptimize(Q){if(!Array.isArray(Q))Q=this.slashSplit(Q);let X=!1;do{if(X=!1,!this.preserveMultipleSlashes){for(let Z=1;Z<Q.length-1;Z++){const J=Q[Z];if(Z===1&&J===""&&Q[0]==="")continue;if(J==="."||J==="")X=!0,Q.splice(Z,1),Z--}if(Q[0]==="."&&Q.length===2&&(Q[1]==="."||Q[1]===""))X=!0,Q.pop()}let $=0;while(($=Q.indexOf("..",$+1))!==-1){const Z=Q[$-1];if(Z&&Z!=="."&&Z!==".."&&Z!=="**")X=!0,Q.splice($-1,2),$-=2}}while(X);return Q.length===0?[""]:Q}firstPhasePreProcess(Q){let X=!1;do{X=!1;for(let $ of Q){let Z=-1;while((Z=$.indexOf("**",Z+1))!==-1){let q=Z;while($[q+1]==="**")q++;if(q>Z)$.splice(Z+1,q-Z);let Y=$[Z+1];const K=$[Z+2],H=$[Z+3];if(Y!=="..")continue;if(!K||K==="."||K===".."||!H||H==="."||H==="..")continue;X=!0,$.splice(Z,1);const _=$.slice(0);_[Z]="**",Q.push(_),Z--}if(!this.preserveMultipleSlashes){for(let q=1;q<$.length-1;q++){const Y=$[q];if(q===1&&Y===""&&$[0]==="")continue;if(Y==="."||Y==="")X=!0,$.splice(q,1),q--}if($[0]==="."&&$.length===2&&($[1]==="."||$[1]===""))X=!0,$.pop()}let J=0;while((J=$.indexOf("..",J+1))!==-1){const q=$[J-1];if(q&&q!=="."&&q!==".."&&q!=="**"){X=!0;const K=J===1&&$[J+1]==="**"?["."]:[];if($.splice(J-1,2,...K),$.length===0)$.push("");J-=2}}}}while(X);return Q}secondPhasePreProcess(Q){for(let X=0;X<Q.length-1;X++)for(let $=X+1;$<Q.length;$++){const Z=this.partsMatch(Q[X],Q[$],!this.preserveMultipleSlashes);if(!Z)continue;Q[X]=Z,Q[$]=[]}return Q.filter((X)=>X.length)}partsMatch(Q,X,$=!1){let Z=0,J=0,q=[],Y="";while(Z<Q.length&&J<X.length)if(Q[Z]===X[J])q.push(Y==="b"?X[J]:Q[Z]),Z++,J++;else if($&&Q[Z]==="**"&&X[J]===Q[Z+1])q.push(Q[Z]),Z++;else if($&&X[J]==="**"&&Q[Z]===X[J+1])q.push(X[J]),J++;else if(Q[Z]==="*"&&X[J]&&(this.options.dot||!X[J].startsWith("."))&&X[J]!=="**"){if(Y==="b")return!1;Y="a",q.push(Q[Z]),Z++,J++}else if(X[J]==="*"&&Q[Z]&&(this.options.dot||!Q[Z].startsWith("."))&&Q[Z]!=="**"){if(Y==="a")return!1;Y="b",q.push(X[J]),Z++,J++}else return!1;return Q.length===X.length&&q}parseNegate(){if(this.nonegate)return;const Q=this.pattern;let X=!1,$=0;for(let Z=0;Z<Q.length&&Q.charAt(Z)==="!";Z++)X=!X,$++;if($)this.pattern=Q.slice($);this.negate=X}matchOne(Q,X,$=!1){const Z=this.options;if(this.isWindows){const G=typeof Q[0]==="string"&&/^[a-z]:$/i.test(Q[0]),z=!G&&Q[0]===""&&Q[1]===""&&Q[2]==="?"&&/^[a-z]:$/i.test(Q[3]),B=typeof X[0]==="string"&&/^[a-z]:$/i.test(X[0]),w=!B&&X[0]===""&&X[1]===""&&X[2]==="?"&&typeof X[3]==="string"&&/^[a-z]:$/i.test(X[3]),R=z?3:G?0:void 0,L=w?3:B?0:void 0;if(typeof R==="number"&&typeof L==="number"){const[D,v]=[Q[R],X[L]];if(D.toLowerCase()===v.toLowerCase()){if(X[L]=D,L>R)X=X.slice(L);else if(R>L)Q=Q.slice(R)}}}const{optimizationLevel:J=1}=this.options;if(J>=2)Q=this.levelTwoFileOptimize(Q);this.debug("matchOne",this,{file:Q,pattern:X}),this.debug("matchOne",Q.length,X.length);for(var q=0,Y=0,K=Q.length,H=X.length;q<K&&Y<H;q++,Y++){this.debug("matchOne loop");var _=X[Y],V=Q[q];if(this.debug(X,_,V),_===!1)return!1;if(_===S){this.debug("GLOBSTAR",[X,_,V]);var W=q,j=Y+1;if(j===H){this.debug("** at the end");for(;q<K;q++)if(Q[q]==="."||Q[q]===".."||!Z.dot&&Q[q].charAt(0)===".")return!1;return!0}while(W<K){var U=Q[W];if(this.debug("\nglobstar while",Q,W,X,j,U),this.matchOne(Q.slice(W),X.slice(j),$))return this.debug("globstar found match!",W,K,U),!0;else{if(U==="."||U===".."||!Z.dot&&U.charAt(0)==="."){this.debug("dot detected!",Q,W,X,j);break}this.debug("globstar swallow a segment, and continue"),W++}}if($){if(this.debug("\n>>> no match, partial?",Q,W,X,j),W===K)return!0}return!1}let G;if(typeof _==="string")G=V===_,this.debug("string match",_,V,G);else G=_.test(V),this.debug("pattern match",_,V,G);if(!G)return!1}if(q===K&&Y===H)return!0;else if(q===K)return $;else if(Y===H)return q===K-1&&Q[q]==="";else throw new Error("wtf?")}braceExpand(){return N9(this.pattern,this.options)}parse(Q){B0(Q);const X=this.options;if(Q==="**")return S;if(Q==="")return"";let $,Z=null;if($=Q.match(P5))Z=X.dot?O5:S5;else if($=Q.match(L5))Z=(X.nocase?X.dot?C5:I5:X.dot?w5:R5)($[1]);else if($=Q.match(k5))Z=(X.nocase?X.dot?v5:E5:X.dot?y5:x5)($);else if($=Q.match(D5))Z=X.dot?F5:A5;else if($=Q.match(N5))Z=T5;const J=P.fromGlob(Q,this.options).toMMPattern();return Z?Object.assign(J,{test:Z}):J}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const Q=this.set;if(!Q.length)return this.regexp=!1,this.regexp;const X=this.options,$=X.noglobstar?u5:X.dot?h5:g5,Z=new Set(X.nocase?["i"]:[]);let J=Q.map((K)=>{const H=K.map((_)=>{if(_ instanceof RegExp)for(let V of _.flags.split(""))Z.add(V);return typeof _==="string"?p5(_):_===S?S:_._src});return H.forEach((_,V)=>{const W=H[V+1],j=H[V-1];if(_!==S||j===S)return;if(j===void 0)if(W!==void 0&&W!==S)H[V+1]="(?:\\/|"+$+"\\/)?"+W;else H[V]=$;else if(W===void 0)H[V-1]=j+"(?:\\/|"+$+")?";else if(W!==S)H[V-1]=j+"(?:\\/|\\/"+$+"\\/)"+W,H[V+1]=S}),H.filter((_)=>_!==S).join("/")}).join("|");const[q,Y]=Q.length>1?["(?:",")"]:["",""];if(J="^"+q+J+Y+"$",this.negate)J="^(?!"+J+").+$";try{this.regexp=new RegExp(J,[...Z].join(""))}catch(K){this.regexp=!1}return this.regexp}slashSplit(Q){if(this.preserveMultipleSlashes)return Q.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(Q))return["",...Q.split(/\/+/)];else return Q.split(/\/+/)}match(Q,X=this.partial){if(this.debug("match",Q,this.pattern),this.comment)return!1;if(this.empty)return Q==="";if(Q==="/"&&X)return!0;const $=this.options;if(this.isWindows)Q=Q.split("\\").join("/");const Z=this.slashSplit(Q);this.debug(this.pattern,"split",Z);const J=this.set;this.debug(this.pattern,"set",J);let q=Z[Z.length-1];if(!q)for(let Y=Z.length-2;!q&&Y>=0;Y--)q=Z[Y];for(let Y=0;Y<J.length;Y++){const K=J[Y];let H=Z;if($.matchBase&&K.length===1)H=[q];if(this.matchOne(H,K,X)){if($.flipNegate)return!0;return!this.negate}}if($.flipNegate)return!1;return this.negate}static defaults(Q){return y.defaults(Q).Minimatch}}y.AST=P;y.Minimatch=h;y.escape=K0;y.unescape=l;var H0=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,P9=new Set,C6=typeof process==="object"&&!!process?process:{},S9=(Q,X,$,Z)=>{typeof C6.emitWarning==="function"?C6.emitWarning(Q,X,$,Z):console.error(`[${$}] ${X}: ${Q}`)},u0=globalThis.AbortController,T9=globalThis.AbortSignal;if(typeof u0==="undefined"){T9=class ${onabort;_onabort=[];reason;aborted=!1;addEventListener(Z,J){this._onabort.push(J)}},u0=class ${constructor(){X()}signal=new T9;abort(Z){if(this.signal.aborted)return;this.signal.reason=Z,this.signal.aborted=!0;for(let J of this.signal._onabort)J(Z);this.signal.onabort?.(Z)}};let Q=C6.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const X=()=>{if(!Q)return;Q=!1,S9("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",X)}}var i5=(Q)=>!P9.has(Q),K$=Symbol("type"),e=(Q)=>Q&&Q===Math.floor(Q)&&Q>0&&isFinite(Q),O9=(Q)=>!e(Q)?null:Q<=Math.pow(2,8)?Uint8Array:Q<=Math.pow(2,16)?Uint16Array:Q<=Math.pow(2,32)?Uint32Array:Q<=Number.MAX_SAFE_INTEGER?L0:null;class L0 extends Array{constructor(Q){super(Q);this.fill(0)}}class _0{heap;length;static#Q=!1;static create(Q){const X=O9(Q);if(!X)return[];_0.#Q=!0;const $=new _0(Q,X);return _0.#Q=!1,$}constructor(Q,X){if(!_0.#Q)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new X(Q),this.length=0}push(Q){this.heap[this.length++]=Q}pop(){return this.heap[--this.length]}}class R0{#Q;#$;#q;#Z;#K;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#_;#j;#H;#Y;#X;#z;#M;#U;#W;#w;#B;#F;#N;#I;#R;#P;#G;static unsafeExposeInternals(Q){return{starts:Q.#N,ttls:Q.#I,sizes:Q.#F,keyMap:Q.#H,keyList:Q.#Y,valList:Q.#X,next:Q.#z,prev:Q.#M,get head(){return Q.#U},get tail(){return Q.#W},free:Q.#w,isBackgroundFetch:(X)=>Q.#V(X),backgroundFetch:(X,$,Z,J)=>Q.#y(X,$,Z,J),moveToTail:(X)=>Q.#v(X),indexes:(X)=>Q.#A(X),rindexes:(X)=>Q.#S(X),isStale:(X)=>Q.#L(X)}}get max(){return this.#Q}get maxSize(){return this.#$}get calculatedSize(){return this.#j}get size(){return this.#_}get fetchMethod(){return this.#K}get dispose(){return this.#q}get disposeAfter(){return this.#Z}constructor(Q){const{max:X=0,ttl:$,ttlResolution:Z=1,ttlAutopurge:J,updateAgeOnGet:q,updateAgeOnHas:Y,allowStale:K,dispose:H,disposeAfter:_,noDisposeOnSet:V,noUpdateTTL:W,maxSize:j=0,maxEntrySize:U=0,sizeCalculation:G,fetchMethod:z,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:R,allowStaleOnFetchAbort:L,ignoreFetchAbort:D}=Q;if(X!==0&&!e(X))throw new TypeError("max option must be a nonnegative integer");const v=X?O9(X):Array;if(!v)throw new Error("invalid max value: "+X);if(this.#Q=X,this.#$=j,this.maxEntrySize=U||this.#$,this.sizeCalculation=G,this.sizeCalculation){if(!this.#$&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw new TypeError("sizeCalculation set to non-function")}if(z!==void 0&&typeof z!=="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#K=z,this.#P=!!z,this.#H=new Map,this.#Y=new Array(X).fill(void 0),this.#X=new Array(X).fill(void 0),this.#z=new v(X),this.#M=new v(X),this.#U=0,this.#W=0,this.#w=_0.create(X),this.#_=0,this.#j=0,typeof H==="function")this.#q=H;if(typeof _==="function")this.#Z=_,this.#B=[];else this.#Z=void 0,this.#B=void 0;if(this.#R=!!this.#q,this.#G=!!this.#Z,this.noDisposeOnSet=!!V,this.noUpdateTTL=!!W,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!R,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!D,this.maxEntrySize!==0){if(this.#$!==0){if(!e(this.#$))throw new TypeError("maxSize must be a positive integer if specified")}if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#k()}if(this.allowStale=!!K,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!q,this.updateAgeOnHas=!!Y,this.ttlResolution=e(Z)||Z===0?Z:1,this.ttlAutopurge=!!J,this.ttl=$||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#Q===0&&this.ttl===0&&this.#$===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#Q&&!this.#$){if(i5("LRU_CACHE_UNBOUNDED"))P9.add("LRU_CACHE_UNBOUNDED"),S9("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",R0)}}getRemainingTTL(Q){return this.#H.has(Q)?Infinity:0}#O(){const Q=new L0(this.#Q),X=new L0(this.#Q);this.#I=Q,this.#N=X,this.#J=(J,q,Y=H0.now())=>{if(X[J]=q!==0?Y:0,Q[J]=q,q!==0&&this.ttlAutopurge){const K=setTimeout(()=>{if(this.#L(J))this.delete(this.#Y[J])},q+1);if(K.unref)K.unref()}},this.#T=(J)=>{X[J]=Q[J]!==0?H0.now():0},this.#C=(J,q)=>{if(Q[q]){const Y=Q[q],K=X[q];if(!Y||!K)return;J.ttl=Y,J.start=K,J.now=$||Z();const H=J.now-K;J.remainingTTL=Y-H}};let $=0;const Z=()=>{const J=H0.now();if(this.ttlResolution>0){$=J;const q=setTimeout(()=>$=0,this.ttlResolution);if(q.unref)q.unref()}return J};this.getRemainingTTL=(J)=>{const q=this.#H.get(J);if(q===void 0)return 0;const Y=Q[q],K=X[q];if(!Y||!K)return Infinity;const H=($||Z())-K;return Y-H},this.#L=(J)=>{const q=X[J],Y=Q[J];return!!Y&&!!q&&($||Z())-q>Y}}#T=()=>{};#C=()=>{};#J=()=>{};#L=()=>!1;#k(){const Q=new L0(this.#Q);this.#j=0,this.#F=Q,this.#D=(X)=>{this.#j-=Q[X],Q[X]=0},this.#b=(X,$,Z,J)=>{if(this.#V($))return 0;if(!e(Z))if(J){if(typeof J!=="function")throw new TypeError("sizeCalculation must be a function");if(Z=J($,X),!e(Z))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Z},this.#x=(X,$,Z)=>{if(Q[X]=$,this.#$){const J=this.#$-Q[X];while(this.#j>J)this.#E(!0)}if(this.#j+=Q[X],Z)Z.entrySize=$,Z.totalCalculatedSize=this.#j}}#D=(Q)=>{};#x=(Q,X,$)=>{};#b=(Q,X,$,Z)=>{if($||Z)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#A({allowStale:Q=this.allowStale}={}){if(this.#_)for(let X=this.#W;;){if(!this.#f(X))break;if(Q||!this.#L(X))yield X;if(X===this.#U)break;else X=this.#M[X]}}*#S({allowStale:Q=this.allowStale}={}){if(this.#_)for(let X=this.#U;;){if(!this.#f(X))break;if(Q||!this.#L(X))yield X;if(X===this.#W)break;else X=this.#z[X]}}#f(Q){return Q!==void 0&&this.#H.get(this.#Y[Q])===Q}*entries(){for(let Q of this.#A())if(this.#X[Q]!==void 0&&this.#Y[Q]!==void 0&&!this.#V(this.#X[Q]))yield[this.#Y[Q],this.#X[Q]]}*rentries(){for(let Q of this.#S())if(this.#X[Q]!==void 0&&this.#Y[Q]!==void 0&&!this.#V(this.#X[Q]))yield[this.#Y[Q],this.#X[Q]]}*keys(){for(let Q of this.#A()){const X=this.#Y[Q];if(X!==void 0&&!this.#V(this.#X[Q]))yield X}}*rkeys(){for(let Q of this.#S()){const X=this.#Y[Q];if(X!==void 0&&!this.#V(this.#X[Q]))yield X}}*values(){for(let Q of this.#A())if(this.#X[Q]!==void 0&&!this.#V(this.#X[Q]))yield this.#X[Q]}*rvalues(){for(let Q of this.#S())if(this.#X[Q]!==void 0&&!this.#V(this.#X[Q]))yield this.#X[Q]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(Q,X={}){for(let $ of this.#A()){const Z=this.#X[$],J=this.#V(Z)?Z.__staleWhileFetching:Z;if(J===void 0)continue;if(Q(J,this.#Y[$],this))return this.get(this.#Y[$],X)}}forEach(Q,X=this){for(let $ of this.#A()){const Z=this.#X[$],J=this.#V(Z)?Z.__staleWhileFetching:Z;if(J===void 0)continue;Q.call(X,J,this.#Y[$],this)}}rforEach(Q,X=this){for(let $ of this.#S()){const Z=this.#X[$],J=this.#V(Z)?Z.__staleWhileFetching:Z;if(J===void 0)continue;Q.call(X,J,this.#Y[$],this)}}purgeStale(){let Q=!1;for(let X of this.#S({allowStale:!0}))if(this.#L(X))this.delete(this.#Y[X]),Q=!0;return Q}info(Q){const X=this.#H.get(Q);if(X===void 0)return;const $=this.#X[X],Z=this.#V($)?$.__staleWhileFetching:$;if(Z===void 0)return;const J={value:Z};if(this.#I&&this.#N){const q=this.#I[X],Y=this.#N[X];if(q&&Y){const K=q-(H0.now()-Y);J.ttl=K,J.start=Date.now()}}if(this.#F)J.size=this.#F[X];return J}dump(){const Q=[];for(let X of this.#A({allowStale:!0})){const $=this.#Y[X],Z=this.#X[X],J=this.#V(Z)?Z.__staleWhileFetching:Z;if(J===void 0||$===void 0)continue;const q={value:J};if(this.#I&&this.#N){q.ttl=this.#I[X];const Y=H0.now()-this.#N[X];q.start=Math.floor(Date.now()-Y)}if(this.#F)q.size=this.#F[X];Q.unshift([$,q])}return Q}load(Q){this.clear();for(let[X,$]of Q){if($.start){const Z=Date.now()-$.start;$.start=H0.now()-Z}this.set(X,$.value,$)}}set(Q,X,$={}){if(X===void 0)return this.delete(Q),this;const{ttl:Z=this.ttl,start:J,noDisposeOnSet:q=this.noDisposeOnSet,sizeCalculation:Y=this.sizeCalculation,status:K}=$;let{noUpdateTTL:H=this.noUpdateTTL}=$;const _=this.#b(Q,X,$.size||0,Y);if(this.maxEntrySize&&_>this.maxEntrySize){if(K)K.set="miss",K.maxEntrySizeExceeded=!0;return this.delete(Q),this}let V=this.#_===0?void 0:this.#H.get(Q);if(V===void 0){if(V=this.#_===0?this.#W:this.#w.length!==0?this.#w.pop():this.#_===this.#Q?this.#E(!1):this.#_,this.#Y[V]=Q,this.#X[V]=X,this.#H.set(Q,V),this.#z[this.#W]=V,this.#M[V]=this.#W,this.#W=V,this.#_++,this.#x(V,_,K),K)K.set="add";H=!1}else{this.#v(V);const W=this.#X[V];if(X!==W){if(this.#P&&this.#V(W)){W.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:j}=W;if(j!==void 0&&!q){if(this.#R)this.#q?.(j,Q,"set");if(this.#G)this.#B?.push([j,Q,"set"])}}else if(!q){if(this.#R)this.#q?.(W,Q,"set");if(this.#G)this.#B?.push([W,Q,"set"])}if(this.#D(V),this.#x(V,_,K),this.#X[V]=X,K){K.set="replace";const j=W&&this.#V(W)?W.__staleWhileFetching:W;if(j!==void 0)K.oldValue=j}}else if(K)K.set="update"}if(Z!==0&&!this.#I)this.#O();if(this.#I){if(!H)this.#J(V,Z,J);if(K)this.#C(K,V)}if(!q&&this.#G&&this.#B){const W=this.#B;let j;while(j=W?.shift())this.#Z?.(...j)}return this}pop(){try{while(this.#_){const Q=this.#X[this.#U];if(this.#E(!0),this.#V(Q)){if(Q.__staleWhileFetching)return Q.__staleWhileFetching}else if(Q!==void 0)return Q}}finally{if(this.#G&&this.#B){const Q=this.#B;let X;while(X=Q?.shift())this.#Z?.(...X)}}}#E(Q){const X=this.#U,$=this.#Y[X],Z=this.#X[X];if(this.#P&&this.#V(Z))Z.__abortController.abort(new Error("evicted"));else if(this.#R||this.#G){if(this.#R)this.#q?.(Z,$,"evict");if(this.#G)this.#B?.push([Z,$,"evict"])}if(this.#D(X),Q)this.#Y[X]=void 0,this.#X[X]=void 0,this.#w.push(X);if(this.#_===1)this.#U=this.#W=0,this.#w.length=0;else this.#U=this.#z[X];return this.#H.delete($),this.#_--,X}has(Q,X={}){const{updateAgeOnHas:$=this.updateAgeOnHas,status:Z}=X,J=this.#H.get(Q);if(J!==void 0){const q=this.#X[J];if(this.#V(q)&&q.__staleWhileFetching===void 0)return!1;if(!this.#L(J)){if($)this.#T(J);if(Z)Z.has="hit",this.#C(Z,J);return!0}else if(Z)Z.has="stale",this.#C(Z,J)}else if(Z)Z.has="miss";return!1}peek(Q,X={}){const{allowStale:$=this.allowStale}=X,Z=this.#H.get(Q);if(Z===void 0||!$&&this.#L(Z))return;const J=this.#X[Z];return this.#V(J)?J.__staleWhileFetching:J}#y(Q,X,$,Z){const J=X===void 0?void 0:this.#X[X];if(this.#V(J))return J;const q=new u0,{signal:Y}=$;Y?.addEventListener("abort",()=>q.abort(Y.reason),{signal:q.signal});const K={signal:q.signal,options:$,context:Z},H=(G,z=!1)=>{const{aborted:B}=q.signal,w=$.ignoreFetchAbort&&G!==void 0;if($.status)if(B&&!z){if($.status.fetchAborted=!0,$.status.fetchError=q.signal.reason,w)$.status.fetchAbortIgnored=!0}else $.status.fetchResolved=!0;if(B&&!w&&!z)return V(q.signal.reason);const R=j;if(this.#X[X]===j)if(G===void 0)if(R.__staleWhileFetching)this.#X[X]=R.__staleWhileFetching;else this.delete(Q);else{if($.status)$.status.fetchUpdated=!0;this.set(Q,G,K.options)}return G},_=(G)=>{if($.status)$.status.fetchRejected=!0,$.status.fetchError=G;return V(G)},V=(G)=>{const{aborted:z}=q.signal,B=z&&$.allowStaleOnFetchAbort,w=B||$.allowStaleOnFetchRejection,R=w||$.noDeleteOnFetchRejection,L=j;if(this.#X[X]===j){if(!R||L.__staleWhileFetching===void 0)this.delete(Q);else if(!B)this.#X[X]=L.__staleWhileFetching}if(w){if($.status&&L.__staleWhileFetching!==void 0)$.status.returnedStale=!0;return L.__staleWhileFetching}else if(L.__returned===L)throw G},W=(G,z)=>{const B=this.#K?.(Q,J,K);if(B&&B instanceof Promise)B.then((w)=>G(w===void 0?void 0:w),z);q.signal.addEventListener("abort",()=>{if(!$.ignoreFetchAbort||$.allowStaleOnFetchAbort){if(G(void 0),$.allowStaleOnFetchAbort)G=(w)=>H(w,!0)}})};if($.status)$.status.fetchDispatched=!0;const j=new Promise(W).then(H,_),U=Object.assign(j,{__abortController:q,__staleWhileFetching:J,__returned:void 0});if(X===void 0)this.set(Q,U,{...K.options,status:void 0}),X=this.#H.get(Q);else this.#X[X]=U;return U}#V(Q){if(!this.#P)return!1;const X=Q;return!!X&&X instanceof Promise&&X.hasOwnProperty("__staleWhileFetching")&&X.__abortController instanceof u0}async fetch(Q,X={}){const{allowStale:$=this.allowStale,updateAgeOnGet:Z=this.updateAgeOnGet,noDeleteOnStaleGet:J=this.noDeleteOnStaleGet,ttl:q=this.ttl,noDisposeOnSet:Y=this.noDisposeOnSet,size:K=0,sizeCalculation:H=this.sizeCalculation,noUpdateTTL:_=this.noUpdateTTL,noDeleteOnFetchRejection:V=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:W=this.allowStaleOnFetchRejection,ignoreFetchAbort:j=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:G,forceRefresh:z=!1,status:B,signal:w}=X;if(!this.#P){if(B)B.fetch="get";return this.get(Q,{allowStale:$,updateAgeOnGet:Z,noDeleteOnStaleGet:J,status:B})}const R={allowStale:$,updateAgeOnGet:Z,noDeleteOnStaleGet:J,ttl:q,noDisposeOnSet:Y,size:K,sizeCalculation:H,noUpdateTTL:_,noDeleteOnFetchRejection:V,allowStaleOnFetchRejection:W,allowStaleOnFetchAbort:U,ignoreFetchAbort:j,status:B,signal:w};let L=this.#H.get(Q);if(L===void 0){if(B)B.fetch="miss";const D=this.#y(Q,L,R,G);return D.__returned=D}else{const D=this.#X[L];if(this.#V(D)){const i=$&&D.__staleWhileFetching!==void 0;if(B){if(B.fetch="inflight",i)B.returnedStale=!0}return i?D.__staleWhileFetching:D.__returned=D}const v=this.#L(L);if(!z&&!v){if(B)B.fetch="hit";if(this.#v(L),Z)this.#T(L);if(B)this.#C(B,L);return D}const O=this.#y(Q,L,R,G),U0=O.__staleWhileFetching!==void 0&&$;if(B){if(B.fetch=v?"stale":"refresh",U0&&v)B.returnedStale=!0}return U0?O.__staleWhileFetching:O.__returned=O}}get(Q,X={}){const{allowStale:$=this.allowStale,updateAgeOnGet:Z=this.updateAgeOnGet,noDeleteOnStaleGet:J=this.noDeleteOnStaleGet,status:q}=X,Y=this.#H.get(Q);if(Y!==void 0){const K=this.#X[Y],H=this.#V(K);if(q)this.#C(q,Y);if(this.#L(Y)){if(q)q.get="stale";if(!H){if(!J)this.delete(Q);if(q&&$)q.returnedStale=!0;return $?K:void 0}else{if(q&&$&&K.__staleWhileFetching!==void 0)q.returnedStale=!0;return $?K.__staleWhileFetching:void 0}}else{if(q)q.get="hit";if(H)return K.__staleWhileFetching;if(this.#v(Y),Z)this.#T(Y);return K}}else if(q)q.get="miss"}#u(Q,X){this.#M[X]=Q,this.#z[Q]=X}#v(Q){if(Q!==this.#W){if(Q===this.#U)this.#U=this.#z[Q];else this.#u(this.#M[Q],this.#z[Q]);this.#u(this.#W,Q),this.#W=Q}}delete(Q){let X=!1;if(this.#_!==0){const $=this.#H.get(Q);if($!==void 0)if(X=!0,this.#_===1)this.clear();else{this.#D($);const Z=this.#X[$];if(this.#V(Z))Z.__abortController.abort(new Error("deleted"));else if(this.#R||this.#G){if(this.#R)this.#q?.(Z,Q,"delete");if(this.#G)this.#B?.push([Z,Q,"delete"])}if(this.#H.delete(Q),this.#Y[$]=void 0,this.#X[$]=void 0,$===this.#W)this.#W=this.#M[$];else if($===this.#U)this.#U=this.#z[$];else{const J=this.#M[$];this.#z[J]=this.#z[$];const q=this.#z[$];this.#M[q]=this.#M[$]}this.#_--,this.#w.push($)}}if(this.#G&&this.#B?.length){const $=this.#B;let Z;while(Z=$?.shift())this.#Z?.(...Z)}return X}clear(){for(let Q of this.#S({allowStale:!0})){const X=this.#X[Q];if(this.#V(X))X.__abortController.abort(new Error("deleted"));else{const $=this.#Y[Q];if(this.#R)this.#q?.(X,$,"delete");if(this.#G)this.#B?.push([X,$,"delete"])}}if(this.#H.clear(),this.#X.fill(void 0),this.#Y.fill(void 0),this.#I&&this.#N)this.#I.fill(0),this.#N.fill(0);if(this.#F)this.#F.fill(0);if(this.#U=0,this.#W=0,this.#w.length=0,this.#j=0,this.#_=0,this.#G&&this.#B){const Q=this.#B;let X;while(X=Q?.shift())this.#Z?.(...X)}}}import{posix as ZQ,win32 as E6} from"path";import{fileURLToPath as JQ} from"url";import*as qQ from"fs";import{lstatSync as YQ,readdir as KQ,readdirSync as HQ,readlinkSync as _Q,realpathSync as VQ} from"fs";import{lstat as WQ,readdir as UQ,readlink as GQ,realpath as zQ} from"fs/promises";import{EventEmitter as P6} from"events";import x9 from"stream";import{StringDecoder as n5} from"string_decoder";var k9=typeof process==="object"&&process?process:{stdout:null,stderr:null},r5=(Q)=>!!Q&&typeof Q==="object"&&(Q instanceof $0||Q instanceof x9||o5(Q)||s5(Q)),o5=(Q)=>!!Q&&typeof Q==="object"&&Q instanceof P6&&typeof Q.pipe==="function"&&Q.pipe!==x9.Writable.prototype.pipe,s5=(Q)=>!!Q&&typeof Q==="object"&&Q instanceof P6&&typeof Q.write==="function"&&typeof Q.end==="function",a=Symbol("EOF"),t=Symbol("maybeEmitEnd"),Q0=Symbol("emittedEnd"),h0=Symbol("emittingEnd"),w0=Symbol("emittedError"),g0=Symbol("closed"),E9=Symbol("read"),m0=Symbol("flush"),v9=Symbol("flushChunk"),d=Symbol("encoding"),V0=Symbol("decoder"),F=Symbol("flowing"),I0=Symbol("paused"),j0=Symbol("resume"),N=Symbol("buffer"),x=Symbol("pipes"),T=Symbol("bufferLength"),D6=Symbol("bufferPush"),c0=Symbol("bufferShift"),E=Symbol("objectMode"),A=Symbol("destroyed"),A6=Symbol("error"),F6=Symbol("emitData"),y9=Symbol("emitEnd"),N6=Symbol("emitEnd2"),n=Symbol("async"),T6=Symbol("abort"),l0=Symbol("aborted"),C0=Symbol("signal"),X0=Symbol("dataListeners"),f=Symbol("discarded"),D0=(Q)=>Promise.resolve().then(Q),a5=(Q)=>Q(),t5=(Q)=>Q==="end"||Q==="finish"||Q==="prefinish",e5=(Q)=>Q instanceof ArrayBuffer||!!Q&&typeof Q==="object"&&Q.constructor&&Q.constructor.name==="ArrayBuffer"&&Q.byteLength>=0,QQ=(Q)=>!Buffer.isBuffer(Q)&&ArrayBuffer.isView(Q);class S6{src;dest;opts;ondrain;constructor(Q,X,$){this.src=Q,this.dest=X,this.opts=$,this.ondrain=()=>Q[j0](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(Q){}end(){if(this.unpipe(),this.opts.end)this.dest.end()}}class b9 extends S6{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(Q,X,$){super(Q,X,$);this.proxyErrors=(Z)=>X.emit("error",Z),Q.on("error",this.proxyErrors)}}var XQ=(Q)=>!!Q.objectMode,$Q=(Q)=>!Q.objectMode&&!!Q.encoding&&Q.encoding!=="buffer";class $0 extends P6{[F]=!1;[I0]=!1;[x]=[];[N]=[];[E];[d];[n];[V0];[a]=!1;[Q0]=!1;[h0]=!1;[g0]=!1;[w0]=null;[T]=0;[A]=!1;[C0];[l0]=!1;[X0]=0;[f]=!1;writable=!0;readable=!0;constructor(...Q){const X=Q[0]||{};super();if(X.objectMode&&typeof X.encoding==="string")throw new TypeError("Encoding and objectMode may not be used together");if(XQ(X))this[E]=!0,this[d]=null;else if($Q(X))this[d]=X.encoding,this[E]=!1;else this[E]=!1,this[d]=null;if(this[n]=!!X.async,this[V0]=this[d]?new n5(this[d]):null,X&&X.debugExposeBuffer===!0)Object.defineProperty(this,"buffer",{get:()=>this[N]});if(X&&X.debugExposePipes===!0)Object.defineProperty(this,"pipes",{get:()=>this[x]});const{signal:$}=X;if($)if(this[C0]=$,$.aborted)this[T6]();else $.addEventListener("abort",()=>this[T6]())}get bufferLength(){return this[T]}get encoding(){return this[d]}set encoding(Q){throw new Error("Encoding must be set at instantiation time")}setEncoding(Q){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[E]}set objectMode(Q){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[n]}set["async"](Q){this[n]=this[n]||!!Q}[T6](){this[l0]=!0,this.emit("abort",this[C0]?.reason),this.destroy(this[C0]?.reason)}get aborted(){return this[l0]}set aborted(Q){}write(Q,X,$){if(this[l0])return!1;if(this[a])throw new Error("write after end");if(this[A])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;if(typeof X==="function")$=X,X="utf8";if(!X)X="utf8";const Z=this[n]?D0:a5;if(!this[E]&&!Buffer.isBuffer(Q)){if(QQ(Q))Q=Buffer.from(Q.buffer,Q.byteOffset,Q.byteLength);else if(e5(Q))Q=Buffer.from(Q);else if(typeof Q!=="string")throw new Error("Non-contiguous data written to non-objectMode stream")}if(this[E]){if(this[F]&&this[T]!==0)this[m0](!0);if(this[F])this.emit("data",Q);else this[D6](Q);if(this[T]!==0)this.emit("readable");if($)Z($);return this[F]}if(!Q.length){if(this[T]!==0)this.emit("readable");if($)Z($);return this[F]}if(typeof Q==="string"&&!(X===this[d]&&!this[V0]?.lastNeed))Q=Buffer.from(Q,X);if(Buffer.isBuffer(Q)&&this[d])Q=this[V0].write(Q);if(this[F]&&this[T]!==0)this[m0](!0);if(this[F])this.emit("data",Q);else this[D6](Q);if(this[T]!==0)this.emit("readable");if($)Z($);return this[F]}read(Q){if(this[A])return null;if(this[f]=!1,this[T]===0||Q===0||Q&&Q>this[T])return this[t](),null;if(this[E])Q=null;if(this[N].length>1&&!this[E])this[N]=[this[d]?this[N].join(""):Buffer.concat(this[N],this[T])];const X=this[E9](Q||null,this[N][0]);return this[t](),X}[E9](Q,X){if(this[E])this[c0]();else{const $=X;if(Q===$.length||Q===null)this[c0]();else if(typeof $==="string")this[N][0]=$.slice(Q),X=$.slice(0,Q),this[T]-=Q;else this[N][0]=$.subarray(Q),X=$.subarray(0,Q),this[T]-=Q}if(this.emit("data",X),!this[N].length&&!this[a])this.emit("drain");return X}end(Q,X,$){if(typeof Q==="function")$=Q,Q=void 0;if(typeof X==="function")$=X,X="utf8";if(Q!==void 0)this.write(Q,X);if($)this.once("end",$);if(this[a]=!0,this.writable=!1,this[F]||!this[I0])this[t]();return this}[j0](){if(this[A])return;if(!this[X0]&&!this[x].length)this[f]=!0;if(this[I0]=!1,this[F]=!0,this.emit("resume"),this[N].length)this[m0]();else if(this[a])this[t]();else this.emit("drain")}resume(){return this[j0]()}pause(){this[F]=!1,this[I0]=!0,this[f]=!1}get destroyed(){return this[A]}get flowing(){return this[F]}get paused(){return this[I0]}[D6](Q){if(this[E])this[T]+=1;else this[T]+=Q.length;this[N].push(Q)}[c0](){if(this[E])this[T]-=1;else this[T]-=this[N][0].length;return this[N].shift()}[m0](Q=!1){do;while(this[v9](this[c0]())&&this[N].length);if(!Q&&!this[N].length&&!this[a])this.emit("drain")}[v9](Q){return this.emit("data",Q),this[F]}pipe(Q,X){if(this[A])return Q;this[f]=!1;const $=this[Q0];if(X=X||{},Q===k9.stdout||Q===k9.stderr)X.end=!1;else X.end=X.end!==!1;if(X.proxyErrors=!!X.proxyErrors,$){if(X.end)Q.end()}else if(this[x].push(!X.proxyErrors?new S6(this,Q,X):new b9(this,Q,X)),this[n])D0(()=>this[j0]());else this[j0]();return Q}unpipe(Q){const X=this[x].find(($)=>$.dest===Q);if(X){if(this[x].length===1){if(this[F]&&this[X0]===0)this[F]=!1;this[x]=[]}else this[x].splice(this[x].indexOf(X),1);X.unpipe()}}addListener(Q,X){return this.on(Q,X)}on(Q,X){const $=super.on(Q,X);if(Q==="data"){if(this[f]=!1,this[X0]++,!this[x].length&&!this[F])this[j0]()}else if(Q==="readable"&&this[T]!==0)super.emit("readable");else if(t5(Q)&&this[Q0])super.emit(Q),this.removeAllListeners(Q);else if(Q==="error"&&this[w0]){const Z=X;if(this[n])D0(()=>Z.call(this,this[w0]));else Z.call(this,this[w0])}return $}removeListener(Q,X){return this.off(Q,X)}off(Q,X){const $=super.off(Q,X);if(Q==="data"){if(this[X0]=this.listeners("data").length,this[X0]===0&&!this[f]&&!this[x].length)this[F]=!1}return $}removeAllListeners(Q){const X=super.removeAllListeners(Q);if(Q==="data"||Q===void 0){if(this[X0]=0,!this[f]&&!this[x].length)this[F]=!1}return X}get emittedEnd(){return this[Q0]}[t](){if(!this[h0]&&!this[Q0]&&!this[A]&&this[N].length===0&&this[a]){if(this[h0]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[g0])this.emit("close");this[h0]=!1}}emit(Q,...X){const $=X[0];if(Q!=="error"&&Q!=="close"&&Q!==A&&this[A])return!1;else if(Q==="data")return!this[E]&&!$?!1:this[n]?(D0(()=>this[F6]($)),!0):this[F6]($);else if(Q==="end")return this[y9]();else if(Q==="close"){if(this[g0]=!0,!this[Q0]&&!this[A])return!1;const J=super.emit("close");return this.removeAllListeners("close"),J}else if(Q==="error"){this[w0]=$,super.emit(A6,$);const J=!this[C0]||this.listeners("error").length?super.emit("error",$):!1;return this[t](),J}else if(Q==="resume"){const J=super.emit("resume");return this[t](),J}else if(Q==="finish"||Q==="prefinish"){const J=super.emit(Q);return this.removeAllListeners(Q),J}const Z=super.emit(Q,...X);return this[t](),Z}[F6](Q){for(let $ of this[x])if($.dest.write(Q)===!1)this.pause();const X=this[f]?!1:super.emit("data",Q);return this[t](),X}[y9](){if(this[Q0])return!1;return this[Q0]=!0,this.readable=!1,this[n]?(D0(()=>this[N6]()),!0):this[N6]()}[N6](){if(this[V0]){const X=this[V0].end();if(X){for(let $ of this[x])$.dest.write(X);if(!this[f])super.emit("data",X)}}for(let X of this[x])X.end();const Q=super.emit("end");return this.removeAllListeners("end"),Q}async collect(){const Q=Object.assign([],{dataLength:0});if(!this[E])Q.dataLength=0;const X=this.promise();return this.on("data",($)=>{if(Q.push($),!this[E])Q.dataLength+=$.length}),await X,Q}async concat(){if(this[E])throw new Error("cannot concat in objectMode");const Q=await this.collect();return this[d]?Q.join(""):Buffer.concat(Q,Q.dataLength)}async promise(){return new Promise((Q,X)=>{this.on(A,()=>X(new Error("stream destroyed"))),this.on("error",($)=>X($)),this.on("end",()=>Q())})}[Symbol.asyncIterator](){this[f]=!1;let Q=!1;const X=async()=>{return this.pause(),Q=!0,{value:void 0,done:!0}};return{next:()=>{if(Q)return X();const Z=this.read();if(Z!==null)return Promise.resolve({done:!1,value:Z});if(this[a])return X();let J,q;const Y=(V)=>{this.off("data",K),this.off("end",H),this.off(A,_),X(),q(V)},K=(V)=>{this.off("error",Y),this.off("end",H),this.off(A,_),this.pause(),J({value:V,done:!!this[a]})},H=()=>{this.off("error",Y),this.off("data",K),this.off(A,_),X(),J({done:!0,value:void 0})},_=()=>Y(new Error("stream destroyed"));return new Promise((V,W)=>{q=W,J=V,this.once(A,_),this.once("error",Y),this.once("end",H),this.once("data",K)})},throw:X,return:X,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[f]=!1;let Q=!1;const X=()=>{return this.pause(),this.off(A6,X),this.off(A,X),this.off("end",X),Q=!0,{done:!0,value:void 0}},$=()=>{if(Q)return X();const Z=this.read();return Z===null?X():{done:!1,value:Z}};return this.once("end",X),this.once(A6,X),this.once(A,X),{next:$,throw:X,return:X,[Symbol.iterator](){return this}}}destroy(Q){if(this[A]){if(Q)this.emit("error",Q);else this.emit(A);return this}this[A]=!0,this[f]=!0,this[N].length=0,this[T]=0;const X=this;if(typeof X.close==="function"&&!this[g0])X.close();if(Q)this.emit("error",Q);else this.emit(A);return this}static get isStream(){return r5}}var jQ=VQ.native,F0={lstatSync:YQ,readdir:KQ,readdirSync:HQ,readlinkSync:_Q,realpathSync:jQ,promises:{lstat:WQ,readdir:UQ,readlink:GQ,realpath:zQ}},m9=(Q)=>!Q||Q===F0||Q===qQ?F0:{...F0,...Q,promises:{...F0.promises,...Q.promises||{}}},c9=/^\\\\\?\\([a-z]:)\\?$/i,BQ=(Q)=>Q.replace(/\//g,"\\").replace(c9,"$1\\"),MQ=/[\\\/]/,m=0,l9=1,d9=2,r=4,p9=6,i9=8,Z0=10,n9=12,g=15,A0=~g,O6=16,f9=32,N0=64,p=128,d0=256,i0=512,u9=N0|p|i0,LQ=1023,k6=(Q)=>Q.isFile()?i9:Q.isDirectory()?r:Q.isSymbolicLink()?Z0:Q.isCharacterDevice()?d9:Q.isBlockDevice()?p9:Q.isSocket()?n9:Q.isFIFO()?l9:m,h9=new Map,T0=(Q)=>{const X=h9.get(Q);if(X)return X;const $=Q.normalize("NFKD");return h9.set(Q,$),$},g9=new Map,p0=(Q)=>{const X=g9.get(Q);if(X)return X;const $=T0(Q.toLowerCase());return g9.set(Q,$),$};class v6 extends R0{constructor(){super({max:256})}}class r9 extends R0{constructor(Q=16384){super({maxSize:Q,sizeCalculation:(X)=>X.length+1})}}var o9=Symbol("PathScurry setAsCwd");class b{name;root;roots;parent;nocase;#Q;#$;get dev(){return this.#$}#q;get mode(){return this.#q}#Z;get nlink(){return this.#Z}#K;get uid(){return this.#K}#_;get gid(){return this.#_}#j;get rdev(){return this.#j}#H;get blksize(){return this.#H}#Y;get ino(){return this.#Y}#X;get size(){return this.#X}#z;get blocks(){return this.#z}#M;get atimeMs(){return this.#M}#U;get mtimeMs(){return this.#U}#W;get ctimeMs(){return this.#W}#w;get birthtimeMs(){return this.#w}#B;get atime(){return this.#B}#F;get mtime(){return this.#F}#N;get ctime(){return this.#N}#I;get birthtime(){return this.#I}#R;#P;#G;#O;#T;#C;#J;#L;#k;#D;get path(){return(this.parent||this).fullpath()}constructor(Q,X=m,$,Z,J,q,Y){if(this.name=Q,this.#R=J?p0(Q):T0(Q),this.#J=X&LQ,this.nocase=J,this.roots=Z,this.root=$||this,this.#L=q,this.#G=Y.fullpath,this.#T=Y.relative,this.#C=Y.relativePosix,this.parent=Y.parent,this.parent)this.#Q=this.parent.#Q;else this.#Q=m9(Y.fs)}depth(){if(this.#P!==void 0)return this.#P;if(!this.parent)return this.#P=0;return this.#P=this.parent.depth()+1}childrenCache(){return this.#L}resolve(Q){if(!Q)return this;const X=this.getRootString(Q),Z=Q.substring(X.length).split(this.splitSep);return X?this.getRoot(X).#x(Z):this.#x(Z)}#x(Q){let X=this;for(let $ of Q)X=X.child($);return X}children(){const Q=this.#L.get(this);if(Q)return Q;const X=Object.assign([],{provisional:0});return this.#L.set(this,X),this.#J&=~O6,X}child(Q,X){if(Q===""||Q===".")return this;if(Q==="..")return this.parent||this;const $=this.children(),Z=this.nocase?p0(Q):T0(Q);for(let K of $)if(K.#R===Z)return K;const J=this.parent?this.sep:"",q=this.#G?this.#G+J+Q:void 0,Y=this.newChild(Q,m,{...X,parent:this,fullpath:q});if(!this.canReaddir())Y.#J|=p;return $.push(Y),Y}relative(){if(this.#T!==void 0)return this.#T;const Q=this.name,X=this.parent;if(!X)return this.#T=this.name;const $=X.relative();return $+(!$||!X.parent?"":this.sep)+Q}relativePosix(){if(this.sep==="/")return this.relative();if(this.#C!==void 0)return this.#C;const Q=this.name,X=this.parent;if(!X)return this.#C=this.fullpathPosix();const $=X.relativePosix();return $+(!$||!X.parent?"":"/")+Q}fullpath(){if(this.#G!==void 0)return this.#G;const Q=this.name,X=this.parent;if(!X)return this.#G=this.name;const Z=X.fullpath()+(!X.parent?"":this.sep)+Q;return this.#G=Z}fullpathPosix(){if(this.#O!==void 0)return this.#O;if(this.sep==="/")return this.#O=this.fullpath();if(!this.parent){const Z=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(Z))return this.#O=`//?/${Z}`;else return this.#O=Z}const Q=this.parent,X=Q.fullpathPosix(),$=X+(!X||!Q.parent?"":"/")+this.name;return this.#O=$}isUnknown(){return(this.#J&g)===m}isType(Q){return this[`is${Q}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#J&g)===i9}isDirectory(){return(this.#J&g)===r}isCharacterDevice(){return(this.#J&g)===d9}isBlockDevice(){return(this.#J&g)===p9}isFIFO(){return(this.#J&g)===l9}isSocket(){return(this.#J&g)===n9}isSymbolicLink(){return(this.#J&Z0)===Z0}lstatCached(){return this.#J&f9?this:void 0}readlinkCached(){return this.#k}realpathCached(){return this.#D}readdirCached(){const Q=this.children();return Q.slice(0,Q.provisional)}canReadlink(){if(this.#k)return!0;if(!this.parent)return!1;const Q=this.#J&g;return!(Q!==m&&Q!==Z0||this.#J&d0||this.#J&p)}calledReaddir(){return!!(this.#J&O6)}isENOENT(){return!!(this.#J&p)}isNamed(Q){return!this.nocase?this.#R===T0(Q):this.#R===p0(Q)}async readlink(){const Q=this.#k;if(Q)return Q;if(!this.canReadlink())return;if(!this.parent)return;try{const X=await this.#Q.promises.readlink(this.fullpath()),$=this.parent.resolve(X);if($)return this.#k=$}catch(X){this.#u(X.code);return}}readlinkSync(){const Q=this.#k;if(Q)return Q;if(!this.canReadlink())return;if(!this.parent)return;try{const X=this.#Q.readlinkSync(this.fullpath()),$=this.parent.resolve(X);if($)return this.#k=$}catch(X){this.#u(X.code);return}}#b(Q){this.#J|=O6;for(let X=Q.provisional;X<Q.length;X++)Q[X].#A()}#A(){if(this.#J&p)return;this.#J=(this.#J|p)&A0,this.#S()}#S(){const Q=this.children();Q.provisional=0;for(let X of Q)X.#A()}#f(){this.#J|=i0,this.#E()}#E(){if(this.#J&N0)return;let Q=this.#J;if((Q&g)===r)Q&=A0;this.#J=Q|N0,this.#S()}#y(Q=""){if(Q==="ENOTDIR"||Q==="EPERM")this.#E();else if(Q==="ENOENT")this.#A();else this.children().provisional=0}#V(Q=""){if(Q==="ENOTDIR")this.parent.#E();else if(Q==="ENOENT")this.#A()}#u(Q=""){let X=this.#J;if(X|=d0,Q==="ENOENT")X|=p;if(Q==="EINVAL"||Q==="UNKNOWN")X&=A0;if(this.#J=X,Q==="ENOTDIR"&&this.parent)this.parent.#E()}#v(Q,X){return this.#d(Q,X)||this.#l(Q,X)}#l(Q,X){const $=k6(Q),Z=this.newChild(Q.name,$,{parent:this}),J=Z.#J&g;if(J!==r&&J!==Z0&&J!==m)Z.#J|=N0;return X.unshift(Z),X.provisional++,Z}#d(Q,X){for(let $=X.provisional;$<X.length;$++){const Z=X[$];if((this.nocase?p0(Q.name):T0(Q.name))!==Z.#R)continue;return this.#p(Q,Z,$,X)}}#p(Q,X,$,Z){const J=X.name;if(X.#J=X.#J&A0|k6(Q),J!==Q.name)X.name=Q.name;if($!==Z.provisional){if($===Z.length-1)Z.pop();else Z.splice($,1);Z.unshift(X)}return Z.provisional++,X}async lstat(){if((this.#J&p)===0)try{return this.#c(await this.#Q.promises.lstat(this.fullpath())),this}catch(Q){this.#V(Q.code)}}lstatSync(){if((this.#J&p)===0)try{return this.#c(this.#Q.lstatSync(this.fullpath())),this}catch(Q){this.#V(Q.code)}}#c(Q){const{atime:X,atimeMs:$,birthtime:Z,birthtimeMs:J,blksize:q,blocks:Y,ctime:K,ctimeMs:H,dev:_,gid:V,ino:W,mode:j,mtime:U,mtimeMs:G,nlink:z,rdev:B,size:w,uid:R}=Q;this.#B=X,this.#M=$,this.#I=Z,this.#w=J,this.#H=q,this.#z=Y,this.#N=K,this.#W=H,this.#$=_,this.#_=V,this.#Y=W,this.#q=j,this.#F=U,this.#U=G,this.#Z=z,this.#j=B,this.#X=w,this.#K=R;const L=k6(Q);if(this.#J=this.#J&A0|L|f9,L!==m&&L!==r&&L!==Z0)this.#J|=N0}#g=[];#m=!1;#i(Q){this.#m=!1;const X=this.#g.slice();this.#g.length=0,X.forEach(($)=>$(null,Q))}readdirCB(Q,X=!1){if(!this.canReaddir()){if(X)Q(null,[]);else queueMicrotask(()=>Q(null,[]));return}const $=this.children();if(this.calledReaddir()){const J=$.slice(0,$.provisional);if(X)Q(null,J);else queueMicrotask(()=>Q(null,J));return}if(this.#g.push(Q),this.#m)return;this.#m=!0;const Z=this.fullpath();this.#Q.readdir(Z,{withFileTypes:!0},(J,q)=>{if(J)this.#y(J.code),$.provisional=0;else{for(let Y of q)this.#v(Y,$);this.#b($)}this.#i($.slice(0,$.provisional));return})}#h;async readdir(){if(!this.canReaddir())return[];const Q=this.children();if(this.calledReaddir())return Q.slice(0,Q.provisional);const X=this.fullpath();if(this.#h)await this.#h;else{let $=()=>{};this.#h=new Promise((Z)=>$=Z);try{for(let Z of await this.#Q.promises.readdir(X,{withFileTypes:!0}))this.#v(Z,Q);this.#b(Q)}catch(Z){this.#y(Z.code),Q.provisional=0}this.#h=void 0,$()}return Q.slice(0,Q.provisional)}readdirSync(){if(!this.canReaddir())return[];const Q=this.children();if(this.calledReaddir())return Q.slice(0,Q.provisional);const X=this.fullpath();try{for(let $ of this.#Q.readdirSync(X,{withFileTypes:!0}))this.#v($,Q);this.#b(Q)}catch($){this.#y($.code),Q.provisional=0}return Q.slice(0,Q.provisional)}canReaddir(){if(this.#J&u9)return!1;const Q=g&this.#J;if(!(Q===m||Q===r||Q===Z0))return!1;return!0}shouldWalk(Q,X){return(this.#J&r)===r&&!(this.#J&u9)&&!Q.has(this)&&(!X||X(this))}async realpath(){if(this.#D)return this.#D;if((i0|d0|p)&this.#J)return;try{const Q=await this.#Q.promises.realpath(this.fullpath());return this.#D=this.resolve(Q)}catch(Q){this.#f()}}realpathSync(){if(this.#D)return this.#D;if((i0|d0|p)&this.#J)return;try{const Q=this.#Q.realpathSync(this.fullpath());return this.#D=this.resolve(Q)}catch(Q){this.#f()}}[o9](Q){if(Q===this)return;const X=new Set([]);let $=[],Z=this;while(Z&&Z.parent)X.add(Z),Z.#T=$.join(this.sep),Z.#C=$.join("/"),Z=Z.parent,$.push("..");Z=Q;while(Z&&Z.parent&&!X.has(Z))Z.#T=void 0,Z.#C=void 0,Z=Z.parent}}class n0 extends b{sep="\\";splitSep=MQ;constructor(Q,X=m,$,Z,J,q,Y){super(Q,X,$,Z,J,q,Y)}newChild(Q,X=m,$={}){return new n0(Q,X,this.root,this.roots,this.nocase,this.childrenCache(),$)}getRootString(Q){return E6.parse(Q).root}getRoot(Q){if(Q=BQ(Q.toUpperCase()),Q===this.root.name)return this.root;for(let[X,$]of Object.entries(this.roots))if(this.sameRoot(Q,X))return this.roots[Q]=$;return this.roots[Q]=new P0(Q,this).root}sameRoot(Q,X=this.root.name){return Q=Q.toUpperCase().replace(/\//g,"\\").replace(c9,"$1\\"),Q===X}}class r0 extends b{splitSep="/";sep="/";constructor(Q,X=m,$,Z,J,q,Y){super(Q,X,$,Z,J,q,Y)}getRootString(Q){return Q.startsWith("/")?"/":""}getRoot(Q){return this.root}newChild(Q,X=m,$={}){return new r0(Q,X,this.root,this.roots,this.nocase,this.childrenCache(),$)}}class y6{root;rootPath;roots;cwd;#Q;#$;#q;nocase;#Z;constructor(Q=process.cwd(),X,$,{nocase:Z,childrenCacheSize:J=16384,fs:q=F0}={}){if(this.#Z=m9(q),Q instanceof URL||Q.startsWith("file://"))Q=JQ(Q);const Y=X.resolve(Q);this.roots=Object.create(null),this.rootPath=this.parseRootPath(Y),this.#Q=new v6,this.#$=new v6,this.#q=new r9(J);const K=Y.substring(this.rootPath.length).split($);if(K.length===1&&!K[0])K.pop();if(Z===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=Z,this.root=this.newRoot(this.#Z),this.roots[this.rootPath]=this.root;let H=this.root,_=K.length-1;const V=X.sep;let W=this.rootPath,j=!1;for(let U of K){const G=_--;H=H.child(U,{relative:new Array(G).fill("..").join(V),relativePosix:new Array(G).fill("..").join("/"),fullpath:W+=(j?"":V)+U}),j=!0}this.cwd=H}depth(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.depth()}childrenCache(){return this.#q}resolve(...Q){let X="";for(let J=Q.length-1;J>=0;J--){const q=Q[J];if(!q||q===".")continue;if(X=X?`${q}/${X}`:q,this.isAbsolute(q))break}const $=this.#Q.get(X);if($!==void 0)return $;const Z=this.cwd.resolve(X).fullpath();return this.#Q.set(X,Z),Z}resolvePosix(...Q){let X="";for(let J=Q.length-1;J>=0;J--){const q=Q[J];if(!q||q===".")continue;if(X=X?`${q}/${X}`:q,this.isAbsolute(q))break}const $=this.#$.get(X);if($!==void 0)return $;const Z=this.cwd.resolve(X).fullpathPosix();return this.#$.set(X,Z),Z}relative(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.relative()}relativePosix(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.relativePosix()}basename(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.name}dirname(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return(Q.parent||Q).fullpath()}async readdir(Q=this.cwd,X={withFileTypes:!0}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$}=X;if(!Q.canReaddir())return[];else{const Z=await Q.readdir();return $?Z:Z.map((J)=>J.name)}}readdirSync(Q=this.cwd,X={withFileTypes:!0}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0}=X;if(!Q.canReaddir())return[];else if($)return Q.readdirSync();else return Q.readdirSync().map((Z)=>Z.name)}async lstat(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.lstat()}lstatSync(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.lstatSync()}async readlink(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=await Q.readlink();return X?$:$?.fullpath()}readlinkSync(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=Q.readlinkSync();return X?$:$?.fullpath()}async realpath(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=await Q.realpath();return X?$:$?.fullpath()}realpathSync(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=Q.realpathSync();return X?$:$?.fullpath()}async walk(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=[];if(!J||J(Q))Y.push($?Q:Q.fullpath());const K=new Set,H=(V,W)=>{K.add(V),V.readdirCB((j,U)=>{if(j)return W(j);let G=U.length;if(!G)return W();const z=()=>{if(--G===0)W()};for(let B of U){if(!J||J(B))Y.push($?B:B.fullpath());if(Z&&B.isSymbolicLink())B.realpath().then((w)=>w?.isUnknown()?w.lstat():w).then((w)=>w?.shouldWalk(K,q)?H(w,z):z());else if(B.shouldWalk(K,q))H(B,z);else z()}},!0)},_=Q;return new Promise((V,W)=>{H(_,(j)=>{if(j)return W(j);V(Y)})})}walkSync(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=[];if(!J||J(Q))Y.push($?Q:Q.fullpath());const K=new Set([Q]);for(let H of K){const _=H.readdirSync();for(let V of _){if(!J||J(V))Y.push($?V:V.fullpath());let W=V;if(V.isSymbolicLink()){if(!(Z&&(W=V.realpathSync())))continue;if(W.isUnknown())W.lstatSync()}if(W.shouldWalk(K,q))K.add(W)}}return Y}[Symbol.asyncIterator](){return this.iterate()}iterate(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;return this.stream(Q,X)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X;if(!J||J(Q))yield $?Q:Q.fullpath();const Y=new Set([Q]);for(let K of Y){const H=K.readdirSync();for(let _ of H){if(!J||J(_))yield $?_:_.fullpath();let V=_;if(_.isSymbolicLink()){if(!(Z&&(V=_.realpathSync())))continue;if(V.isUnknown())V.lstatSync()}if(V.shouldWalk(Y,q))Y.add(V)}}}stream(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=new $0({objectMode:!0});if(!J||J(Q))Y.write($?Q:Q.fullpath());const K=new Set,H=[Q];let _=0;const V=()=>{let W=!1;while(!W){const j=H.shift();if(!j){if(_===0)Y.end();return}_++,K.add(j);const U=(z,B,w=!1)=>{if(z)return Y.emit("error",z);if(Z&&!w){const R=[];for(let L of B)if(L.isSymbolicLink())R.push(L.realpath().then((D)=>D?.isUnknown()?D.lstat():D));if(R.length){Promise.all(R).then(()=>U(null,B,!0));return}}for(let R of B)if(R&&(!J||J(R))){if(!Y.write($?R:R.fullpath()))W=!0}_--;for(let R of B){const L=R.realpathCached()||R;if(L.shouldWalk(K,q))H.push(L)}if(W&&!Y.flowing)Y.once("drain",V);else if(!G)V()};let G=!0;j.readdirCB(U,!0),G=!1}};return V(),Y}streamSync(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=new $0({objectMode:!0}),K=new Set;if(!J||J(Q))Y.write($?Q:Q.fullpath());const H=[Q];let _=0;const V=()=>{let W=!1;while(!W){const j=H.shift();if(!j){if(_===0)Y.end();return}_++,K.add(j);const U=j.readdirSync();for(let G of U)if(!J||J(G)){if(!Y.write($?G:G.fullpath()))W=!0}_--;for(let G of U){let z=G;if(G.isSymbolicLink()){if(!(Z&&(z=G.realpathSync())))continue;if(z.isUnknown())z.lstatSync()}if(z.shouldWalk(K,q))H.push(z)}}if(W&&!Y.flowing)Y.once("drain",V)};return V(),Y}chdir(Q=this.cwd){const X=this.cwd;this.cwd=typeof Q==="string"?this.cwd.resolve(Q):Q,this.cwd[o9](X)}}class P0 extends y6{sep="\\";constructor(Q=process.cwd(),X={}){const{nocase:$=!0}=X;super(Q,E6,"\\",{...X,nocase:$});this.nocase=$;for(let Z=this.cwd;Z;Z=Z.parent)Z.nocase=this.nocase}parseRootPath(Q){return E6.parse(Q).root.toUpperCase()}newRoot(Q){return new n0(this.rootPath,r,void 0,this.roots,this.nocase,this.childrenCache(),{fs:Q})}isAbsolute(Q){return Q.startsWith("/")||Q.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(Q)}}class S0 extends y6{sep="/";constructor(Q=process.cwd(),X={}){const{nocase:$=!1}=X;super(Q,ZQ,"/",{...X,nocase:$});this.nocase=$}parseRootPath(Q){return"/"}newRoot(Q){return new r0(this.rootPath,r,void 0,this.roots,this.nocase,this.childrenCache(),{fs:Q})}isAbsolute(Q){return Q.startsWith("/")}}class o0 extends S0{constructor(Q=process.cwd(),X={}){const{nocase:$=!0}=X;super(Q,{...X,nocase:$})}}var R$=process.platform==="win32"?n0:r0,s9=process.platform==="win32"?P0:process.platform==="darwin"?o0:S0;import{fileURLToPath as DQ} from"url";var RQ=(Q)=>Q.length>=1,wQ=(Q)=>Q.length>=1;class W0{#Q;#$;#q;length;#Z;#K;#_;#j;#H;#Y;#X=!0;constructor(Q,X,$,Z){if(!RQ(Q))throw new TypeError("empty pattern list");if(!wQ(X))throw new TypeError("empty glob list");if(X.length!==Q.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=Q.length,$<0||$>=this.length)throw new TypeError("index out of range");if(this.#Q=Q,this.#$=X,this.#q=$,this.#Z=Z,this.#q===0){if(this.isUNC()){const[J,q,Y,K,...H]=this.#Q,[_,V,W,j,...U]=this.#$;if(H[0]==="")H.shift(),U.shift();const G=[J,q,Y,K,""].join("/"),z=[_,V,W,j,""].join("/");this.#Q=[G,...H],this.#$=[z,...U],this.length=this.#Q.length}else if(this.isDrive()||this.isAbsolute()){const[J,...q]=this.#Q,[Y,...K]=this.#$;if(q[0]==="")q.shift(),K.shift();const H=J+"/",_=Y+"/";this.#Q=[H,...q],this.#$=[_,...K],this.length=this.#Q.length}}}pattern(){return this.#Q[this.#q]}isString(){return typeof this.#Q[this.#q]==="string"}isGlobstar(){return this.#Q[this.#q]===S}isRegExp(){return this.#Q[this.#q]instanceof RegExp}globString(){return this.#_=this.#_||(this.#q===0?this.isAbsolute()?this.#$[0]+this.#$.slice(1).join("/"):this.#$.join("/"):this.#$.slice(this.#q).join("/"))}hasMore(){return this.length>this.#q+1}rest(){if(this.#K!==void 0)return this.#K;if(!this.hasMore())return this.#K=null;return this.#K=new W0(this.#Q,this.#$,this.#q+1,this.#Z),this.#K.#Y=this.#Y,this.#K.#H=this.#H,this.#K.#j=this.#j,this.#K}isUNC(){const Q=this.#Q;return this.#H!==void 0?this.#H:this.#H=this.#Z==="win32"&&this.#q===0&&Q[0]===""&&Q[1]===""&&typeof Q[2]==="string"&&!!Q[2]&&typeof Q[3]==="string"&&!!Q[3]}isDrive(){const Q=this.#Q;return this.#j!==void 0?this.#j:this.#j=this.#Z==="win32"&&this.#q===0&&this.length>1&&typeof Q[0]==="string"&&/^[a-z]:$/i.test(Q[0])}isAbsolute(){const Q=this.#Q;return this.#Y!==void 0?this.#Y:this.#Y=Q[0]===""&&Q.length>1||this.isDrive()||this.isUNC()}root(){const Q=this.#Q[0];return typeof Q==="string"&&this.isAbsolute()&&this.#q===0?Q:""}checkFollowGlobstar(){return!(this.#q===0||!this.isGlobstar()||!this.#X)}markFollowGlobstar(){if(this.#q===0||!this.isGlobstar()||!this.#X)return!1;return this.#X=!1,!0}}var IQ=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class s0{relative;relativeChildren;absolute;absoluteChildren;constructor(Q,{nobrace:X,nocase:$,noext:Z,noglobstar:J,platform:q=IQ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];const Y={dot:!0,nobrace:X,nocase:$,noext:Z,noglobstar:J,optimizationLevel:2,platform:q,nocomment:!0,nonegate:!0};for(let K of Q){const H=new h(K,Y);for(let _=0;_<H.set.length;_++){const V=H.set[_],W=H.globParts[_];if(!V||!W)throw new Error("invalid pattern object");const j=new W0(V,W,0,q),U=new h(j.globString(),Y),G=W[W.length-1]==="**",z=j.isAbsolute();if(z)this.absolute.push(U);else this.relative.push(U);if(G)if(z)this.absoluteChildren.push(U);else this.relativeChildren.push(U)}}}ignored(Q){const X=Q.fullpath(),$=`${X}/`,Z=Q.relative()||".",J=`${Z}/`;for(let q of this.relative)if(q.match(Z)||q.match(J))return!0;for(let q of this.absolute)if(q.match(X)||q.match($))return!0;return!1}childrenIgnored(Q){const X=Q.fullpath()+"/",$=(Q.relative()||".")+"/";for(let Z of this.relativeChildren)if(Z.match($))return!0;for(let Z of this.absoluteChildren)if(Z.match(X))return!0;return!1}}class x6{store;constructor(Q=new Map){this.store=Q}copy(){return new x6(new Map(this.store))}hasWalked(Q,X){return this.store.get(Q.fullpath())?.has(X.globString())}storeWalked(Q,X){const $=Q.fullpath(),Z=this.store.get($);if(Z)Z.add(X.globString());else this.store.set($,new Set([X.globString()]))}}class a9{store=new Map;add(Q,X,$){const Z=(X?2:0)|($?1:0),J=this.store.get(Q);this.store.set(Q,J===void 0?Z:Z&J)}entries(){return[...this.store.entries()].map(([Q,X])=>[Q,!!(X&2),!!(X&1)])}}class t9{store=new Map;add(Q,X){if(!Q.canReaddir())return;const $=this.store.get(Q);if($){if(!$.find((Z)=>Z.globString()===X.globString()))$.push(X)}else this.store.set(Q,[X])}get(Q){const X=this.store.get(Q);if(!X)throw new Error("attempting to walk unknown path");return X}entries(){return this.keys().map((Q)=>[Q,this.store.get(Q)])}keys(){return[...this.store.keys()].filter((Q)=>Q.canReaddir())}}class O0{hasWalkedCache;matches=new a9;subwalks=new t9;patterns;follow;dot;opts;constructor(Q,X){this.opts=Q,this.follow=!!Q.follow,this.dot=!!Q.dot,this.hasWalkedCache=X?X.copy():new x6}processPatterns(Q,X){this.patterns=X;const $=X.map((Z)=>[Q,Z]);for(let[Z,J]of $){this.hasWalkedCache.storeWalked(Z,J);const q=J.root(),Y=J.isAbsolute()&&this.opts.absolute!==!1;if(q){Z=Z.resolve(q==="/"&&this.opts.root!==void 0?this.opts.root:q);const V=J.rest();if(!V){this.matches.add(Z,!0,!1);continue}else J=V}if(Z.isENOENT())continue;let K,H,_=!1;while(typeof(K=J.pattern())==="string"&&(H=J.rest()))Z=Z.resolve(K),J=H,_=!0;if(K=J.pattern(),H=J.rest(),_){if(this.hasWalkedCache.hasWalked(Z,J))continue;this.hasWalkedCache.storeWalked(Z,J)}if(typeof K==="string"){const V=K===".."||K===""||K===".";this.matches.add(Z.resolve(K),Y,V);continue}else if(K===S){if(!Z.isSymbolicLink()||this.follow||J.checkFollowGlobstar())this.subwalks.add(Z,J);const V=H?.pattern(),W=H?.rest();if(!H||(V===""||V===".")&&!W)this.matches.add(Z,Y,V===""||V===".");else if(V===".."){const j=Z.parent||Z;if(!W)this.matches.add(j,Y,!0);else if(!this.hasWalkedCache.hasWalked(j,W))this.subwalks.add(j,W)}}else if(K instanceof RegExp)this.subwalks.add(Z,J)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new O0(this.opts,this.hasWalkedCache)}filterEntries(Q,X){const $=this.subwalks.get(Q),Z=this.child();for(let J of X)for(let q of $){const Y=q.isAbsolute(),K=q.pattern(),H=q.rest();if(K===S)Z.testGlobstar(J,q,H,Y);else if(K instanceof RegExp)Z.testRegExp(J,K,H,Y);else Z.testString(J,K,H,Y)}return Z}testGlobstar(Q,X,$,Z){if(this.dot||!Q.name.startsWith(".")){if(!X.hasMore())this.matches.add(Q,Z,!1);if(Q.canReaddir()){if(this.follow||!Q.isSymbolicLink())this.subwalks.add(Q,X);else if(Q.isSymbolicLink()){if($&&X.checkFollowGlobstar())this.subwalks.add(Q,$);else if(X.markFollowGlobstar())this.subwalks.add(Q,X)}}}if($){const J=$.pattern();if(typeof J==="string"&&J!==".."&&J!==""&&J!==".")this.testString(Q,J,$.rest(),Z);else if(J===".."){const q=Q.parent||Q;this.subwalks.add(q,$)}else if(J instanceof RegExp)this.testRegExp(Q,J,$.rest(),Z)}}testRegExp(Q,X,$,Z){if(!X.test(Q.name))return;if(!$)this.matches.add(Q,Z,!1);else this.subwalks.add(Q,$)}testString(Q,X,$,Z){if(!Q.isNamed(X))return;if(!$)this.matches.add(Q,Z,!1);else this.subwalks.add(Q,$)}}var CQ=(Q,X)=>typeof Q==="string"?new s0([Q],X):Array.isArray(Q)?new s0(Q,X):Q;class b6{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#Q=[];#$;#q;signal;maxDepth;constructor(Q,X,$){if(this.patterns=Q,this.path=X,this.opts=$,this.#q=!$.posix&&$.platform==="win32"?"\\":"/",$.ignore)this.#$=CQ($.ignore,$);if(this.maxDepth=$.maxDepth||Infinity,$.signal)this.signal=$.signal,this.signal.addEventListener("abort",()=>{this.#Q.length=0})}#Z(Q){return this.seen.has(Q)||!!this.#$?.ignored?.(Q)}#K(Q){return!!this.#$?.childrenIgnored?.(Q)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let Q=void 0;while(!this.paused&&(Q=this.#Q.shift()))Q()}onResume(Q){if(this.signal?.aborted)return;if(!this.paused)Q();else this.#Q.push(Q)}async matchCheck(Q,X){if(X&&this.opts.nodir)return;let $;if(this.opts.realpath){if($=Q.realpathCached()||await Q.realpath(),!$)return;Q=$}const Z=Q.isUnknown()||this.opts.stat;return this.matchCheckTest(Z?await Q.lstat():Q,X)}matchCheckTest(Q,X){return Q&&(this.maxDepth===Infinity||Q.depth()<=this.maxDepth)&&(!X||Q.canReaddir())&&(!this.opts.nodir||!Q.isDirectory())&&!this.#Z(Q)?Q:void 0}matchCheckSync(Q,X){if(X&&this.opts.nodir)return;let $;if(this.opts.realpath){if($=Q.realpathCached()||Q.realpathSync(),!$)return;Q=$}const Z=Q.isUnknown()||this.opts.stat;return this.matchCheckTest(Z?Q.lstatSync():Q,X)}matchFinish(Q,X){if(this.#Z(Q))return;const $=this.opts.absolute===void 0?X:this.opts.absolute;this.seen.add(Q);const Z=this.opts.mark&&Q.isDirectory()?this.#q:"";if(this.opts.withFileTypes)this.matchEmit(Q);else if($){const J=this.opts.posix?Q.fullpathPosix():Q.fullpath();this.matchEmit(J+Z)}else{const J=this.opts.posix?Q.relativePosix():Q.relative(),q=this.opts.dotRelative&&!J.startsWith(".."+this.#q)?"."+this.#q:"";this.matchEmit(!J?"."+Z:q+J+Z)}}async match(Q,X,$){const Z=await this.matchCheck(Q,$);if(Z)this.matchFinish(Z,X)}matchSync(Q,X,$){const Z=this.matchCheckSync(Q,$);if(Z)this.matchFinish(Z,X)}walkCB(Q,X,$){if(this.signal?.aborted)$();this.walkCB2(Q,X,new O0(this.opts),$)}walkCB2(Q,X,$,Z){if(this.#K(Q))return Z();if(this.signal?.aborted)Z();if(this.paused){this.onResume(()=>this.walkCB2(Q,X,$,Z));return}$.processPatterns(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,H]of $.matches.entries()){if(this.#Z(Y))continue;J++,this.match(Y,K,H).then(()=>q())}for(let Y of $.subwalkTargets()){if(this.maxDepth!==Infinity&&Y.depth()>=this.maxDepth)continue;J++;const K=Y.readdirCached();if(Y.calledReaddir())this.walkCB3(Y,K,$,q);else Y.readdirCB((H,_)=>this.walkCB3(Y,_,$,q),!0)}q()}walkCB3(Q,X,$,Z){$=$.filterEntries(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,H]of $.matches.entries()){if(this.#Z(Y))continue;J++,this.match(Y,K,H).then(()=>q())}for(let[Y,K]of $.subwalks.entries())J++,this.walkCB2(Y,K,$.child(),q);q()}walkCBSync(Q,X,$){if(this.signal?.aborted)$();this.walkCB2Sync(Q,X,new O0(this.opts),$)}walkCB2Sync(Q,X,$,Z){if(this.#K(Q))return Z();if(this.signal?.aborted)Z();if(this.paused){this.onResume(()=>this.walkCB2Sync(Q,X,$,Z));return}$.processPatterns(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,H]of $.matches.entries()){if(this.#Z(Y))continue;this.matchSync(Y,K,H)}for(let Y of $.subwalkTargets()){if(this.maxDepth!==Infinity&&Y.depth()>=this.maxDepth)continue;J++;const K=Y.readdirSync();this.walkCB3Sync(Y,K,$,q)}q()}walkCB3Sync(Q,X,$,Z){$=$.filterEntries(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,H]of $.matches.entries()){if(this.#Z(Y))continue;this.matchSync(Y,K,H)}for(let[Y,K]of $.subwalks.entries())J++,this.walkCB2Sync(Y,K,$.child(),q);q()}}class a0 extends b6{matches;constructor(Q,X,$){super(Q,X,$);this.matches=new Set}matchEmit(Q){this.matches.add(Q)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())await this.path.lstat();return await new Promise((Q,X)=>{this.walkCB(this.path,this.patterns,()=>{if(this.signal?.aborted)X(this.signal.reason);else Q(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}}class t0 extends b6{results;constructor(Q,X,$){super(Q,X,$);this.results=new $0({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(Q){if(this.results.write(Q),!this.results.flowing)this.pause()}stream(){const Q=this.path;if(Q.isUnknown())Q.lstat().then(()=>{this.walkCB(Q,this.patterns,()=>this.results.end())});else this.walkCB(Q,this.patterns,()=>this.results.end());return this.results}streamSync(){if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}var AQ=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class o{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(Q,X){if(!X)throw new TypeError("glob options required");if(this.withFileTypes=!!X.withFileTypes,this.signal=X.signal,this.follow=!!X.follow,this.dot=!!X.dot,this.dotRelative=!!X.dotRelative,this.nodir=!!X.nodir,this.mark=!!X.mark,!X.cwd)this.cwd="";else if(X.cwd instanceof URL||X.cwd.startsWith("file://"))X.cwd=DQ(X.cwd);if(this.cwd=X.cwd||"",this.root=X.root,this.magicalBraces=!!X.magicalBraces,this.nobrace=!!X.nobrace,this.noext=!!X.noext,this.realpath=!!X.realpath,this.absolute=X.absolute,this.noglobstar=!!X.noglobstar,this.matchBase=!!X.matchBase,this.maxDepth=typeof X.maxDepth==="number"?X.maxDepth:Infinity,this.stat=!!X.stat,this.ignore=X.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof Q==="string")Q=[Q];if(this.windowsPathsNoEscape=!!X.windowsPathsNoEscape||X.allowWindowsEscape===!1,this.windowsPathsNoEscape)Q=Q.map((K)=>K.replace(/\\/g,"/"));if(this.matchBase){if(X.noglobstar)throw new TypeError("base matching requires globstar");Q=Q.map((K)=>K.includes("/")?K:`./**/${K}`)}if(this.pattern=Q,this.platform=X.platform||AQ,this.opts={...X,platform:this.platform},X.scurry){if(this.scurry=X.scurry,X.nocase!==void 0&&X.nocase!==X.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const K=X.platform==="win32"?P0:X.platform==="darwin"?o0:X.platform?S0:s9;this.scurry=new K(this.cwd,{nocase:X.nocase,fs:X.fs})}this.nocase=this.scurry.nocase;const $=this.platform==="darwin"||this.platform==="win32",Z={...X,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:$,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},J=this.pattern.map((K)=>new h(K,Z)),[q,Y]=J.reduce((K,H)=>{return K[0].push(...H.set),K[1].push(...H.globParts),K},[[],[]]);this.patterns=q.map((K,H)=>{const _=Y[H];if(!_)throw new Error("invalid pattern object");return new W0(K,_,0,this.platform)})}async walk(){return[...await new a0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new a0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new t0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new t0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}var f6=(Q,X={})=>{if(!Array.isArray(Q))Q=[Q];for(let $ of Q)if(new h($,X).hasMagic())return!0;return!1};function Q6(Q,X={}){return new o(Q,X).streamSync()}function Q7(Q,X={}){return new o(Q,X).stream()}function X7(Q,X={}){return new o(Q,X).walkSync()}async function e9(Q,X={}){return new o(Q,X).walk()}function X6(Q,X={}){return new o(Q,X).iterateSync()}function $7(Q,X={}){return new o(Q,X).iterate()}var FQ=Q6,NQ=Object.assign(Q7,{sync:Q6}),TQ=X6,PQ=Object.assign($7,{sync:X6}),SQ=Object.assign(X7,{stream:Q6,iterate:X6}),e0=Object.assign(e9,{glob:e9,globSync:X7,sync:SQ,globStream:Q7,stream:NQ,globStreamSync:Q6,streamSync:FQ,globIterate:$7,iterate:PQ,globIterateSync:X6,iterateSync:TQ,Glob:o,hasMagic:f6,escape:K0,unescape:l});e0.glob=e0;var o6=v0(m7(),1);async function JX(Q){try{return await k0.promises.access(Q,k0.constants.F_OK),!0}catch(X){return!1}}var qX=function(){let Q=n6.cpus().length;if("availableParallelism"in n6)Q=n6.availableParallelism();return Q},KX=function(Q){if(Q=Q.trim(),Q==="")return{type:"ok"};if(!Q.startsWith("An error occurred during typechecking"))return{type:"unknown"};const X=YX.exec(Q);if(X){const Z=Array.from(X[1].matchAll(r6),(q)=>q[1]),J=Array.from(X[2].matchAll(r6),(q)=>q[1]);if(Z.length===0||J.length===0)return{type:"unknown"};return{type:"type-error",primaryTags:Z,alternativeTags:J}}const $=Array.from(Q.matchAll(r6),(Z)=>Z[1]);if($.length!==1)return{type:"unknown"};return{type:"type-error",primaryTags:$,alternativeTags:[]}},HX=function(Q){const X=KX(Q.expectedOutput);switch(X.type){case"ok":return Q.actualExitCode===0?"correct":"incorrect";case"type-error":if(Q.actualExitCode===0)return"incorrect";if(X.primaryTags.some(($)=>Q.actualOutput.includes($)))return"correct";else if(X.alternativeTags.some(($)=>Q.actualOutput.includes($)))return"partially-correct";else return"incorrect";case"unknown":return"unknown"}};async function _X({command:Q,args:X=[],stdin:$}){return new Promise((Z,J)=>{const q=c7.default(Q,X,{stdio:"pipe"});if(!q.stdin){J(new Error("proc.stdin is null"));return}const Y=[],K=[];q.stdout?.on("data",(H)=>Y.push(H)),q.stderr?.on("data",(H)=>K.push(H)),q.on("close",(H)=>{Z({exitCode:H??0,stdout:Buffer.concat(Y).toString(),stderr:Buffer.concat(K).toString()})}),q.stdin.write($,(H)=>{if(H)J(H)}),q.stdin.end()})}async function VX({tasks:Q,runner:X,parallelism:$,onResult:Z,onError:J}){return new Promise((q)=>{let Y=0,K=0;const H=()=>{if(Y>=Q.length){if(K===0)q();return}const _=Q[Y++];K++,X(_).then((V)=>{Z(V)}).catch((V)=>{J(V)}).finally(()=>{K--,H()})};for(let _=0;_<$;_++)H()})}async function jX(){b0.name("test-typechecker").description("Test your Stella typechecker implementation against a set of .stella files and save the results to a JSON file.").argument("<tests-path>","path to directory with files to typecheck and .out files generated by correct Stella implementation").requiredOption("--cmd <command>","command to execute").option("--args [arguments...]","arguments for the command").option("-o, --out <path>","path where to save typechecker results","./typechecker-report.json").parse();const[Q]=b0.args,X=b0.opts(),$=i6.resolve(X.out),Z=X.cmd,J=X.args??[],q=await e0(i6.resolve(Q,"**/*.stella").replace(/\\/g,"/"));console.log(`Testing typechecker with ${q.length} Stella files...`);const Y=new o6.default.SingleBar({},o6.default.Presets.shades_classic);Y.start(q.length,0);const K=async(V)=>{const W=V.replace(/\.stella$/,".stella.out");if(!await JX(W))throw new Error(`No .stella.out file found for test ${V}.`);const j=(await k0.promises.readFile(V)).toString(),U=(await k0.promises.readFile(W)).toString(),G=await _X({command:Z,args:J,stdin:j}),z=HX({expectedOutput:U,actualOutput:`${G.stdout}\n${G.stderr}`,actualExitCode:G.exitCode});return[i6.relative(Q,V),{conclusion:z,snippet:j,expected:U,exitCode:G.exitCode,actualStdout:G.stdout,actualStderr:G.stderr}]},H=[];await VX({tasks:q,runner:K,parallelism:qX(),onResult:(V)=>{H.push(V),Y.increment(1)},onError:(V)=>{console.warn(V.message),Y.increment(1)}}),Y.stop();const _={testcases:Object.fromEntries(H)};await k0.promises.writeFile($,JSON.stringify(_,null,2))}var r6=/\[(ERROR_\w+)\]/g,YX=/^An error occurred during typechecking!\s+===================\s*Primary type error:\s*===================([\S\s]+)========================\s*Alternative type errors:\s*========================([\S\s]+)$/;jX();
