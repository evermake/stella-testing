import{createRequire as i9} from"node:module";var c9=Object.create;var{defineProperty:f6,getPrototypeOf:d9,getOwnPropertyNames:l9}=Object;var p9=Object.prototype.hasOwnProperty;var Q6=(Q,X,$)=>{$=Q!=null?c9(d9(Q)):{};const Z=X||!Q||!Q.__esModule?f6($,"default",{value:Q,enumerable:!0}):$;for(let J of l9(Q))if(!p9.call(Z,J))f6(Z,J,{get:()=>Q[J],enumerable:!0});return Z};var L=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var t=i9(import.meta.url);var V0=L((n9)=>{class X6 extends Error{constructor(Q,X,$){super($);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=X,this.exitCode=Q,this.nestedError=void 0}}class u6 extends X6{constructor(Q){super(1,"commander.invalidArgument",Q);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}n9.CommanderError=X6;n9.InvalidArgumentError=u6});var k0=L((t9)=>{var a9=function(Q){const X=Q.name()+(Q.variadic===!0?"...":"");return Q.required?"<"+X+">":"["+X+"]"},{InvalidArgumentError:s9}=V0();class h6{constructor(Q,X){switch(this.description=X||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,Q[0]){case"<":this.required=!0,this._name=Q.slice(1,-1);break;case"[":this.required=!1,this._name=Q.slice(1,-1);break;default:this.required=!0,this._name=Q;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(Q,X){if(X===this.defaultValue||!Array.isArray(X))return[Q];return X.concat(Q)}default(Q,X){return this.defaultValue=Q,this.defaultValueDescription=X,this}argParser(Q){return this.parseArg=Q,this}choices(Q){return this.argChoices=Q.slice(),this.parseArg=(X,$)=>{if(!this.argChoices.includes(X))throw new s9(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(X,$);return X},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}t9.Argument=h6;t9.humanReadableArgName=a9});var $6=L(($2)=>{var{humanReadableArgName:X2}=k0();class g6{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(Q){const X=Q.commands.filter(($)=>!$._hidden);if(Q._hasImplicitHelpCommand()){const[,$,Z]=Q._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),J=Q.createCommand($).helpOption(!1);if(J.description(Q._helpCommandDescription),Z)J.arguments(Z);X.push(J)}if(this.sortSubcommands)X.sort(($,Z)=>{return $.name().localeCompare(Z.name())});return X}compareOptions(Q,X){const $=(Z)=>{return Z.short?Z.short.replace(/^-/,""):Z.long.replace(/^--/,"")};return $(Q).localeCompare($(X))}visibleOptions(Q){const X=Q.options.filter((J)=>!J.hidden),$=Q._hasHelpOption&&Q._helpShortFlag&&!Q._findOption(Q._helpShortFlag),Z=Q._hasHelpOption&&!Q._findOption(Q._helpLongFlag);if($||Z){let J;if(!$)J=Q.createOption(Q._helpLongFlag,Q._helpDescription);else if(!Z)J=Q.createOption(Q._helpShortFlag,Q._helpDescription);else J=Q.createOption(Q._helpFlags,Q._helpDescription);X.push(J)}if(this.sortOptions)X.sort(this.compareOptions);return X}visibleGlobalOptions(Q){if(!this.showGlobalOptions)return[];const X=[];for(let $=Q.parent;$;$=$.parent){const Z=$.options.filter((J)=>!J.hidden);X.push(...Z)}if(this.sortOptions)X.sort(this.compareOptions);return X}visibleArguments(Q){if(Q._argsDescription)Q.registeredArguments.forEach((X)=>{X.description=X.description||Q._argsDescription[X.name()]||""});if(Q.registeredArguments.find((X)=>X.description))return Q.registeredArguments;return[]}subcommandTerm(Q){const X=Q.registeredArguments.map(($)=>X2($)).join(" ");return Q._name+(Q._aliases[0]?"|"+Q._aliases[0]:"")+(Q.options.length?" [options]":"")+(X?" "+X:"")}optionTerm(Q){return Q.flags}argumentTerm(Q){return Q.name()}longestSubcommandTermLength(Q,X){return X.visibleCommands(Q).reduce(($,Z)=>{return Math.max($,X.subcommandTerm(Z).length)},0)}longestOptionTermLength(Q,X){return X.visibleOptions(Q).reduce(($,Z)=>{return Math.max($,X.optionTerm(Z).length)},0)}longestGlobalOptionTermLength(Q,X){return X.visibleGlobalOptions(Q).reduce(($,Z)=>{return Math.max($,X.optionTerm(Z).length)},0)}longestArgumentTermLength(Q,X){return X.visibleArguments(Q).reduce(($,Z)=>{return Math.max($,X.argumentTerm(Z).length)},0)}commandUsage(Q){let X=Q._name;if(Q._aliases[0])X=X+"|"+Q._aliases[0];let $="";for(let Z=Q.parent;Z;Z=Z.parent)$=Z.name()+" "+$;return $+X+" "+Q.usage()}commandDescription(Q){return Q.description()}subcommandDescription(Q){return Q.summary()||Q.description()}optionDescription(Q){const X=[];if(Q.argChoices)X.push(`choices: ${Q.argChoices.map(($)=>JSON.stringify($)).join(", ")}`);if(Q.defaultValue!==void 0){if(Q.required||Q.optional||Q.isBoolean()&&typeof Q.defaultValue==="boolean")X.push(`default: ${Q.defaultValueDescription||JSON.stringify(Q.defaultValue)}`)}if(Q.presetArg!==void 0&&Q.optional)X.push(`preset: ${JSON.stringify(Q.presetArg)}`);if(Q.envVar!==void 0)X.push(`env: ${Q.envVar}`);if(X.length>0)return`${Q.description} (${X.join(", ")})`;return Q.description}argumentDescription(Q){const X=[];if(Q.argChoices)X.push(`choices: ${Q.argChoices.map(($)=>JSON.stringify($)).join(", ")}`);if(Q.defaultValue!==void 0)X.push(`default: ${Q.defaultValueDescription||JSON.stringify(Q.defaultValue)}`);if(X.length>0){const $=`(${X.join(", ")})`;if(Q.description)return`${Q.description} ${$}`;return $}return Q.description}formatHelp(Q,X){const $=X.padWidth(Q,X),Z=X.helpWidth||80;function Y(U,G){if(G){const z=`${U.padEnd($+2)}${G}`;return X.wrap(z,Z-2,$+2)}return U}function K(U){return U.join("\n").replace(/^/gm," ".repeat(2))}let _=[`Usage: ${X.commandUsage(Q)}`,""];const j=X.commandDescription(Q);if(j.length>0)_=_.concat([X.wrap(j,Z,0),""]);const H=X.visibleArguments(Q).map((U)=>{return Y(X.argumentTerm(U),X.argumentDescription(U))});if(H.length>0)_=_.concat(["Arguments:",K(H),""]);const V=X.visibleOptions(Q).map((U)=>{return Y(X.optionTerm(U),X.optionDescription(U))});if(V.length>0)_=_.concat(["Options:",K(V),""]);if(this.showGlobalOptions){const U=X.visibleGlobalOptions(Q).map((G)=>{return Y(X.optionTerm(G),X.optionDescription(G))});if(U.length>0)_=_.concat(["Global Options:",K(U),""])}const W=X.visibleCommands(Q).map((U)=>{return Y(X.subcommandTerm(U),X.subcommandDescription(U))});if(W.length>0)_=_.concat(["Commands:",K(W),""]);return _.join("\n")}padWidth(Q,X){return Math.max(X.longestOptionTermLength(Q,X),X.longestGlobalOptionTermLength(Q,X),X.longestSubcommandTermLength(Q,X),X.longestArgumentTermLength(Q,X))}wrap(Q,X,$,Z=40){const q=new RegExp(`[\\n][${" \\f\\t\\v\xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF"}]+`);if(Q.match(q))return Q;const Y=X-$;if(Y<Z)return Q;const K=Q.slice(0,$),_=Q.slice($).replace("\r\n","\n"),j=" ".repeat($),V=`\\s${"\u200B"}`,W=new RegExp(`\n|.{1,${Y-1}}([${V}]|\$)|[^${V}]+?([${V}]|\$)`,"g"),U=_.match(W)||[];return K+U.map((G,z)=>{if(G==="\n")return"";return(z>0?j:"")+G.trimEnd()}).join("\n")}}$2.Help=g6});var Z6=L((Y2)=>{var q2=function(Q){return Q.split("-").reduce((X,$)=>{return X+$[0].toUpperCase()+$.slice(1)})},d6=function(Q){let X,$;const Z=Q.split(/[ |,]+/);if(Z.length>1&&!/^[[<]/.test(Z[1]))X=Z.shift();if($=Z.shift(),!X&&/^-[^-]$/.test($))X=$,$=void 0;return{shortFlag:X,longFlag:$}},{InvalidArgumentError:J2}=V0();class m6{constructor(Q,X){this.flags=Q,this.description=X||"",this.required=Q.includes("<"),this.optional=Q.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(Q),this.mandatory=!1;const $=d6(Q);if(this.short=$.shortFlag,this.long=$.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(Q,X){return this.defaultValue=Q,this.defaultValueDescription=X,this}preset(Q){return this.presetArg=Q,this}conflicts(Q){return this.conflictsWith=this.conflictsWith.concat(Q),this}implies(Q){let X=Q;if(typeof Q==="string")X={[Q]:!0};return this.implied=Object.assign(this.implied||{},X),this}env(Q){return this.envVar=Q,this}argParser(Q){return this.parseArg=Q,this}makeOptionMandatory(Q=!0){return this.mandatory=!!Q,this}hideHelp(Q=!0){return this.hidden=!!Q,this}_concatValue(Q,X){if(X===this.defaultValue||!Array.isArray(X))return[Q];return X.concat(Q)}choices(Q){return this.argChoices=Q.slice(),this.parseArg=(X,$)=>{if(!this.argChoices.includes(X))throw new J2(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(X,$);return X},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){return q2(this.name().replace(/^no-/,""))}is(Q){return this.short===Q||this.long===Q}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class c6{constructor(Q){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,Q.forEach((X)=>{if(X.negate)this.negativeOptions.set(X.attributeName(),X);else this.positiveOptions.set(X.attributeName(),X)}),this.negativeOptions.forEach((X,$)=>{if(this.positiveOptions.has($))this.dualOptions.add($)})}valueFromOption(Q,X){const $=X.attributeName();if(!this.dualOptions.has($))return!0;const Z=this.negativeOptions.get($).presetArg,J=Z!==void 0?Z:!1;return X.negate===(J===Q)}}Y2.Option=m6;Y2.splitOptionFlags=d6;Y2.DualOptions=c6});var l6=L((V2)=>{var H2=function(Q,X){if(Math.abs(Q.length-X.length)>3)return Math.max(Q.length,X.length);const $=[];for(let Z=0;Z<=Q.length;Z++)$[Z]=[Z];for(let Z=0;Z<=X.length;Z++)$[0][Z]=Z;for(let Z=1;Z<=X.length;Z++)for(let J=1;J<=Q.length;J++){let q=1;if(Q[J-1]===X[Z-1])q=0;else q=1;if($[J][Z]=Math.min($[J-1][Z]+1,$[J][Z-1]+1,$[J-1][Z-1]+q),J>1&&Z>1&&Q[J-1]===X[Z-2]&&Q[J-2]===X[Z-1])$[J][Z]=Math.min($[J][Z],$[J-2][Z-2]+1)}return $[Q.length][X.length]},W2=function(Q,X){if(!X||X.length===0)return"";X=Array.from(new Set(X));const $=Q.startsWith("--");if($)Q=Q.slice(2),X=X.map((Y)=>Y.slice(2));let Z=[],J=3;const q=0.4;if(X.forEach((Y)=>{if(Y.length<=1)return;const K=H2(Q,Y),_=Math.max(Q.length,Y.length);if((_-K)/_>q){if(K<J)J=K,Z=[Y];else if(K===J)Z.push(Y)}}),Z.sort((Y,K)=>Y.localeCompare(K)),$)Z=Z.map((Y)=>`--${Y}`);if(Z.length>1)return`\n(Did you mean one of ${Z.join(", ")}?)`;if(Z.length===1)return`\n(Did you mean ${Z[0]}?)`;return""};V2.suggestSimilar=W2});var o6=L((L2)=>{var n6=function(Q,X){if(Q._hasHelpOption&&X.find((Z)=>Z===Q._helpLongFlag||Z===Q._helpShortFlag))Q.outputHelp(),Q._exit(0,"commander.helpDisplayed","(outputHelp)")},r6=function(Q){return Q.map((X)=>{if(!X.startsWith("--inspect"))return X;let $,Z="127.0.0.1",J="9229",q;if((q=X.match(/^(--inspect(-brk)?)$/))!==null)$=q[1];else if((q=X.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if($=q[1],/^\d+$/.test(q[3]))J=q[3];else Z=q[3];else if((q=X.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)$=q[1],Z=q[3],J=q[4];if($&&J!=="0")return`${$}=${Z}:${parseInt(J)+1}`;return X})},G2=t("events").EventEmitter,J6=t("child_process"),o=t("path"),q6=t("fs"),I=t("process"),{Argument:z2,humanReadableArgName:B2}=k0(),{CommanderError:Y6}=V0(),{Help:M2}=$6(),{Option:p6,splitOptionFlags:w2,DualOptions:R2}=Z6(),{suggestSimilar:i6}=l6();class K6 extends G2{constructor(Q){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=Q||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:(X)=>I.stdout.write(X),writeErr:(X)=>I.stderr.write(X),getOutHelpWidth:()=>I.stdout.isTTY?I.stdout.columns:void 0,getErrHelpWidth:()=>I.stderr.isTTY?I.stderr.columns:void 0,outputError:(X,$)=>$(X)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(Q){return this._outputConfiguration=Q._outputConfiguration,this._hasHelpOption=Q._hasHelpOption,this._helpFlags=Q._helpFlags,this._helpDescription=Q._helpDescription,this._helpShortFlag=Q._helpShortFlag,this._helpLongFlag=Q._helpLongFlag,this._helpCommandName=Q._helpCommandName,this._helpCommandnameAndArgs=Q._helpCommandnameAndArgs,this._helpCommandDescription=Q._helpCommandDescription,this._helpConfiguration=Q._helpConfiguration,this._exitCallback=Q._exitCallback,this._storeOptionsAsProperties=Q._storeOptionsAsProperties,this._combineFlagAndOptionalValue=Q._combineFlagAndOptionalValue,this._allowExcessArguments=Q._allowExcessArguments,this._enablePositionalOptions=Q._enablePositionalOptions,this._showHelpAfterError=Q._showHelpAfterError,this._showSuggestionAfterError=Q._showSuggestionAfterError,this}_getCommandAndAncestors(){const Q=[];for(let X=this;X;X=X.parent)Q.push(X);return Q}command(Q,X,$){let Z=X,J=$;if(typeof Z==="object"&&Z!==null)J=Z,Z=null;J=J||{};const[,q,Y]=Q.match(/([^ ]+) *(.*)/),K=this.createCommand(q);if(Z)K.description(Z),K._executableHandler=!0;if(J.isDefault)this._defaultCommandName=K._name;if(K._hidden=!!(J.noHelp||J.hidden),K._executableFile=J.executableFile||null,Y)K.arguments(Y);if(this.commands.push(K),K.parent=this,K.copyInheritedSettings(this),Z)return this;return K}createCommand(Q){return new K6(Q)}createHelp(){return Object.assign(new M2,this.configureHelp())}configureHelp(Q){if(Q===void 0)return this._helpConfiguration;return this._helpConfiguration=Q,this}configureOutput(Q){if(Q===void 0)return this._outputConfiguration;return Object.assign(this._outputConfiguration,Q),this}showHelpAfterError(Q=!0){if(typeof Q!=="string")Q=!!Q;return this._showHelpAfterError=Q,this}showSuggestionAfterError(Q=!0){return this._showSuggestionAfterError=!!Q,this}addCommand(Q,X){if(!Q._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(X=X||{},X.isDefault)this._defaultCommandName=Q._name;if(X.noHelp||X.hidden)Q._hidden=!0;return this.commands.push(Q),Q.parent=this,this}createArgument(Q,X){return new z2(Q,X)}argument(Q,X,$,Z){const J=this.createArgument(Q,X);if(typeof $==="function")J.default(Z).argParser($);else J.default($);return this.addArgument(J),this}arguments(Q){return Q.trim().split(/ +/).forEach((X)=>{this.argument(X)}),this}addArgument(Q){const X=this.registeredArguments.slice(-1)[0];if(X&&X.variadic)throw new Error(`only the last argument can be variadic '${X.name()}'`);if(Q.required&&Q.defaultValue!==void 0&&Q.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${Q.name()}'`);return this.registeredArguments.push(Q),this}addHelpCommand(Q,X){if(Q===!1)this._addImplicitHelpCommand=!1;else{if(this._addImplicitHelpCommand=!0,typeof Q==="string")this._helpCommandName=Q.split(" ")[0],this._helpCommandnameAndArgs=Q;this._helpCommandDescription=X||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===void 0)return this.commands.length&&!this._actionHandler&&!this._findCommand("help");return this._addImplicitHelpCommand}hook(Q,X){const $=["preSubcommand","preAction","postAction"];if(!$.includes(Q))throw new Error(`Unexpected value for event passed to hook : '${Q}'.
Expecting one of '${$.join("', '")}'`);if(this._lifeCycleHooks[Q])this._lifeCycleHooks[Q].push(X);else this._lifeCycleHooks[Q]=[X];return this}exitOverride(Q){if(Q)this._exitCallback=Q;else this._exitCallback=(X)=>{if(X.code!=="commander.executeSubCommandAsync")throw X};return this}_exit(Q,X,$){if(this._exitCallback)this._exitCallback(new Y6(Q,X,$));I.exit(Q)}action(Q){const X=($)=>{const Z=this.registeredArguments.length,J=$.slice(0,Z);if(this._storeOptionsAsProperties)J[Z]=this;else J[Z]=this.opts();return J.push(this),Q.apply(this,J)};return this._actionHandler=X,this}createOption(Q,X){return new p6(Q,X)}_callParseArg(Q,X,$,Z){try{return Q.parseArg(X,$)}catch(J){if(J.code==="commander.invalidArgument"){const q=`${Z} ${J.message}`;this.error(q,{exitCode:J.exitCode,code:J.code})}throw J}}addOption(Q){const X=Q.name(),$=Q.attributeName();if(Q.negate){const J=Q.long.replace(/^--no-/,"--");if(!this._findOption(J))this.setOptionValueWithSource($,Q.defaultValue===void 0?!0:Q.defaultValue,"default")}else if(Q.defaultValue!==void 0)this.setOptionValueWithSource($,Q.defaultValue,"default");this.options.push(Q);const Z=(J,q,Y)=>{if(J==null&&Q.presetArg!==void 0)J=Q.presetArg;const K=this.getOptionValue($);if(J!==null&&Q.parseArg)J=this._callParseArg(Q,J,K,q);else if(J!==null&&Q.variadic)J=Q._concatValue(J,K);if(J==null)if(Q.negate)J=!1;else if(Q.isBoolean()||Q.optional)J=!0;else J="";this.setOptionValueWithSource($,J,Y)};if(this.on("option:"+X,(J)=>{const q=`error: option '${Q.flags}' argument '${J}' is invalid.`;Z(J,q,"cli")}),Q.envVar)this.on("optionEnv:"+X,(J)=>{const q=`error: option '${Q.flags}' value '${J}' from env '${Q.envVar}' is invalid.`;Z(J,q,"env")});return this}_optionEx(Q,X,$,Z,J){if(typeof X==="object"&&X instanceof p6)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const q=this.createOption(X,$);if(q.makeOptionMandatory(!!Q.mandatory),typeof Z==="function")q.default(J).argParser(Z);else if(Z instanceof RegExp){const Y=Z;Z=(K,_)=>{const j=Y.exec(K);return j?j[0]:_},q.default(J).argParser(Z)}else q.default(Z);return this.addOption(q)}option(Q,X,$,Z){return this._optionEx({},Q,X,$,Z)}requiredOption(Q,X,$,Z){return this._optionEx({mandatory:!0},Q,X,$,Z)}combineFlagAndOptionalValue(Q=!0){return this._combineFlagAndOptionalValue=!!Q,this}allowUnknownOption(Q=!0){return this._allowUnknownOption=!!Q,this}allowExcessArguments(Q=!0){return this._allowExcessArguments=!!Q,this}enablePositionalOptions(Q=!0){return this._enablePositionalOptions=!!Q,this}passThroughOptions(Q=!0){if(this._passThroughOptions=!!Q,!!this.parent&&Q&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(Q=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!Q,this}getOptionValue(Q){if(this._storeOptionsAsProperties)return this[Q];return this._optionValues[Q]}setOptionValue(Q,X){return this.setOptionValueWithSource(Q,X,void 0)}setOptionValueWithSource(Q,X,$){if(this._storeOptionsAsProperties)this[Q]=X;else this._optionValues[Q]=X;return this._optionValueSources[Q]=$,this}getOptionValueSource(Q){return this._optionValueSources[Q]}getOptionValueSourceWithGlobals(Q){let X;return this._getCommandAndAncestors().forEach(($)=>{if($.getOptionValueSource(Q)!==void 0)X=$.getOptionValueSource(Q)}),X}_prepareUserArgs(Q,X){if(Q!==void 0&&!Array.isArray(Q))throw new Error("first parameter to parse must be array or undefined");if(X=X||{},Q===void 0){if(Q=I.argv,I.versions&&I.versions.electron)X.from="electron"}this.rawArgs=Q.slice();let $;switch(X.from){case void 0:case"node":this._scriptPath=Q[1],$=Q.slice(2);break;case"electron":if(I.defaultApp)this._scriptPath=Q[1],$=Q.slice(2);else $=Q.slice(1);break;case"user":$=Q.slice(0);break;default:throw new Error(`unexpected parse option { from: '${X.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",$}parse(Q,X){const $=this._prepareUserArgs(Q,X);return this._parseCommand([],$),this}async parseAsync(Q,X){const $=this._prepareUserArgs(Q,X);return await this._parseCommand([],$),this}_executeSubCommand(Q,X){X=X.slice();let $=!1;const Z=[".js",".ts",".tsx",".mjs",".cjs"];function J(j,H){const V=o.resolve(j,H);if(q6.existsSync(V))return V;if(Z.includes(o.extname(H)))return;const W=Z.find((U)=>q6.existsSync(`${V}${U}`));if(W)return`${V}${W}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let q=Q._executableFile||`${this._name}-${Q._name}`,Y=this._executableDir||"";if(this._scriptPath){let j;try{j=q6.realpathSync(this._scriptPath)}catch(H){j=this._scriptPath}Y=o.resolve(o.dirname(j),Y)}if(Y){let j=J(Y,q);if(!j&&!Q._executableFile&&this._scriptPath){const H=o.basename(this._scriptPath,o.extname(this._scriptPath));if(H!==this._name)j=J(Y,`${H}-${Q._name}`)}q=j||q}$=Z.includes(o.extname(q));let K;if(I.platform!=="win32")if($)X.unshift(q),X=r6(I.execArgv).concat(X),K=J6.spawn(I.argv[0],X,{stdio:"inherit"});else K=J6.spawn(q,X,{stdio:"inherit"});else X.unshift(q),X=r6(I.execArgv).concat(X),K=J6.spawn(I.execPath,X,{stdio:"inherit"});if(!K.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((H)=>{I.on(H,()=>{if(K.killed===!1&&K.exitCode===null)K.kill(H)})});const _=this._exitCallback;if(!_)K.on("close",I.exit.bind(I));else K.on("close",()=>{_(new Y6(I.exitCode||0,"commander.executeSubCommandAsync","(close)"))});K.on("error",(j)=>{if(j.code==="ENOENT"){const H=Y?`searched for local subcommand relative to directory '${Y}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",V=`'${q}' does not exist
 - if '${Q._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${H}`;throw new Error(V)}else if(j.code==="EACCES")throw new Error(`'${q}' not executable`);if(!_)I.exit(1);else{const H=new Y6(1,"commander.executeSubCommandAsync","(error)");H.nestedError=j,_(H)}}),this.runningCommand=K}_dispatchSubcommand(Q,X,$){const Z=this._findCommand(Q);if(!Z)this.help({error:!0});let J;return J=this._chainOrCallSubCommandHook(J,Z,"preSubcommand"),J=this._chainOrCall(J,()=>{if(Z._executableHandler)this._executeSubCommand(Z,X.concat($));else return Z._parseCommand(X,$)}),J}_dispatchHelpCommand(Q){if(!Q)this.help();const X=this._findCommand(Q);if(X&&!X._executableHandler)X.help();return this._dispatchSubcommand(Q,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((Q,X)=>{if(Q.required&&this.args[X]==null)this.missingArgument(Q.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){const Q=($,Z,J)=>{let q=Z;if(Z!==null&&$.parseArg){const Y=`error: command-argument value '${Z}' is invalid for argument '${$.name()}'.`;q=this._callParseArg($,Z,J,Y)}return q};this._checkNumberOfArguments();const X=[];this.registeredArguments.forEach(($,Z)=>{let J=$.defaultValue;if($.variadic){if(Z<this.args.length){if(J=this.args.slice(Z),$.parseArg)J=J.reduce((q,Y)=>{return Q($,Y,q)},$.defaultValue)}else if(J===void 0)J=[]}else if(Z<this.args.length){if(J=this.args[Z],$.parseArg)J=Q($,J,$.defaultValue)}X[Z]=J}),this.processedArgs=X}_chainOrCall(Q,X){if(Q&&Q.then&&typeof Q.then==="function")return Q.then(()=>X());return X()}_chainOrCallHooks(Q,X){let $=Q;const Z=[];if(this._getCommandAndAncestors().reverse().filter((J)=>J._lifeCycleHooks[X]!==void 0).forEach((J)=>{J._lifeCycleHooks[X].forEach((q)=>{Z.push({hookedCommand:J,callback:q})})}),X==="postAction")Z.reverse();return Z.forEach((J)=>{$=this._chainOrCall($,()=>{return J.callback(J.hookedCommand,this)})}),$}_chainOrCallSubCommandHook(Q,X,$){let Z=Q;if(this._lifeCycleHooks[$]!==void 0)this._lifeCycleHooks[$].forEach((J)=>{Z=this._chainOrCall(Z,()=>{return J(this,X)})});return Z}_parseCommand(Q,X){const $=this.parseOptions(X);if(this._parseOptionsEnv(),this._parseOptionsImplied(),Q=Q.concat($.operands),X=$.unknown,this.args=Q.concat(X),Q&&this._findCommand(Q[0]))return this._dispatchSubcommand(Q[0],Q.slice(1),X);if(this._hasImplicitHelpCommand()&&Q[0]===this._helpCommandName)return this._dispatchHelpCommand(Q[1]);if(this._defaultCommandName)return n6(this,X),this._dispatchSubcommand(this._defaultCommandName,Q,X);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});n6(this,$.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const Z=()=>{if($.unknown.length>0)this.unknownOption($.unknown[0])},J=`command:${this.name()}`;if(this._actionHandler){Z(),this._processArguments();let q;if(q=this._chainOrCallHooks(q,"preAction"),q=this._chainOrCall(q,()=>this._actionHandler(this.processedArgs)),this.parent)q=this._chainOrCall(q,()=>{this.parent.emit(J,Q,X)});return q=this._chainOrCallHooks(q,"postAction"),q}if(this.parent&&this.parent.listenerCount(J))Z(),this._processArguments(),this.parent.emit(J,Q,X);else if(Q.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",Q,X);if(this.listenerCount("command:*"))this.emit("command:*",Q,X);else if(this.commands.length)this.unknownCommand();else Z(),this._processArguments()}else if(this.commands.length)Z(),this.help({error:!0});else Z(),this._processArguments()}_findCommand(Q){if(!Q)return;return this.commands.find((X)=>X._name===Q||X._aliases.includes(Q))}_findOption(Q){return this.options.find((X)=>X.is(Q))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((Q)=>{Q.options.forEach((X)=>{if(X.mandatory&&Q.getOptionValue(X.attributeName())===void 0)Q.missingMandatoryOptionValue(X)})})}_checkForConflictingLocalOptions(){const Q=this.options.filter(($)=>{const Z=$.attributeName();if(this.getOptionValue(Z)===void 0)return!1;return this.getOptionValueSource(Z)!=="default"});Q.filter(($)=>$.conflictsWith.length>0).forEach(($)=>{const Z=Q.find((J)=>$.conflictsWith.includes(J.attributeName()));if(Z)this._conflictingOption($,Z)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((Q)=>{Q._checkForConflictingLocalOptions()})}parseOptions(Q){const X=[],$=[];let Z=X;const J=Q.slice();function q(K){return K.length>1&&K[0]==="-"}let Y=null;while(J.length){const K=J.shift();if(K==="--"){if(Z===$)Z.push(K);Z.push(...J);break}if(Y&&!q(K)){this.emit(`option:${Y.name()}`,K);continue}if(Y=null,q(K)){const _=this._findOption(K);if(_){if(_.required){const j=J.shift();if(j===void 0)this.optionMissingArgument(_);this.emit(`option:${_.name()}`,j)}else if(_.optional){let j=null;if(J.length>0&&!q(J[0]))j=J.shift();this.emit(`option:${_.name()}`,j)}else this.emit(`option:${_.name()}`);Y=_.variadic?_:null;continue}}if(K.length>2&&K[0]==="-"&&K[1]!=="-"){const _=this._findOption(`-${K[1]}`);if(_){if(_.required||_.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${_.name()}`,K.slice(2));else this.emit(`option:${_.name()}`),J.unshift(`-${K.slice(2)}`);continue}}if(/^--[^=]+=/.test(K)){const _=K.indexOf("="),j=this._findOption(K.slice(0,_));if(j&&(j.required||j.optional)){this.emit(`option:${j.name()}`,K.slice(_+1));continue}}if(q(K))Z=$;if((this._enablePositionalOptions||this._passThroughOptions)&&X.length===0&&$.length===0){if(this._findCommand(K)){if(X.push(K),J.length>0)$.push(...J);break}else if(K===this._helpCommandName&&this._hasImplicitHelpCommand()){if(X.push(K),J.length>0)X.push(...J);break}else if(this._defaultCommandName){if($.push(K),J.length>0)$.push(...J);break}}if(this._passThroughOptions){if(Z.push(K),J.length>0)Z.push(...J);break}Z.push(K)}return{operands:X,unknown:$}}opts(){if(this._storeOptionsAsProperties){const Q={},X=this.options.length;for(let $=0;$<X;$++){const Z=this.options[$].attributeName();Q[Z]=Z===this._versionOptionName?this._version:this[Z]}return Q}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((Q,X)=>Object.assign(Q,X.opts()),{})}error(Q,X){if(this._outputConfiguration.outputError(`${Q}\n`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0});const $=X||{},Z=$.exitCode||1,J=$.code||"commander.error";this._exit(Z,J,Q)}_parseOptionsEnv(){this.options.forEach((Q)=>{if(Q.envVar&&Q.envVar in I.env){const X=Q.attributeName();if(this.getOptionValue(X)===void 0||["default","config","env"].includes(this.getOptionValueSource(X)))if(Q.required||Q.optional)this.emit(`optionEnv:${Q.name()}`,I.env[Q.envVar]);else this.emit(`optionEnv:${Q.name()}`)}})}_parseOptionsImplied(){const Q=new R2(this.options),X=($)=>{return this.getOptionValue($)!==void 0&&!["default","implied"].includes(this.getOptionValueSource($))};this.options.filter(($)=>$.implied!==void 0&&X($.attributeName())&&Q.valueFromOption(this.getOptionValue($.attributeName()),$)).forEach(($)=>{Object.keys($.implied).filter((Z)=>!X(Z)).forEach((Z)=>{this.setOptionValueWithSource(Z,$.implied[Z],"implied")})})}missingArgument(Q){const X=`error: missing required argument '${Q}'`;this.error(X,{code:"commander.missingArgument"})}optionMissingArgument(Q){const X=`error: option '${Q.flags}' argument missing`;this.error(X,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(Q){const X=`error: required option '${Q.flags}' not specified`;this.error(X,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(Q,X){const $=(q)=>{const Y=q.attributeName(),K=this.getOptionValue(Y),_=this.options.find((H)=>H.negate&&Y===H.attributeName()),j=this.options.find((H)=>!H.negate&&Y===H.attributeName());if(_&&(_.presetArg===void 0&&K===!1||_.presetArg!==void 0&&K===_.presetArg))return _;return j||q},Z=(q)=>{const Y=$(q),K=Y.attributeName();if(this.getOptionValueSource(K)==="env")return`environment variable '${Y.envVar}'`;return`option '${Y.flags}'`},J=`error: ${Z(Q)} cannot be used with ${Z(X)}`;this.error(J,{code:"commander.conflictingOption"})}unknownOption(Q){if(this._allowUnknownOption)return;let X="";if(Q.startsWith("--")&&this._showSuggestionAfterError){let Z=[],J=this;do{const q=J.createHelp().visibleOptions(J).filter((Y)=>Y.long).map((Y)=>Y.long);Z=Z.concat(q),J=J.parent}while(J&&!J._enablePositionalOptions);X=i6(Q,Z)}const $=`error: unknown option '${Q}'${X}`;this.error($,{code:"commander.unknownOption"})}_excessArguments(Q){if(this._allowExcessArguments)return;const X=this.registeredArguments.length,$=X===1?"":"s",J=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${X} argument${$} but got ${Q.length}.`;this.error(J,{code:"commander.excessArguments"})}unknownCommand(){const Q=this.args[0];let X="";if(this._showSuggestionAfterError){const Z=[];this.createHelp().visibleCommands(this).forEach((J)=>{if(Z.push(J.name()),J.alias())Z.push(J.alias())}),X=i6(Q,Z)}const $=`error: unknown command '${Q}'${X}`;this.error($,{code:"commander.unknownCommand"})}version(Q,X,$){if(Q===void 0)return this._version;this._version=Q,X=X||"-V, --version",$=$||"output the version number";const Z=this.createOption(X,$);return this._versionOptionName=Z.attributeName(),this.options.push(Z),this.on("option:"+Z.name(),()=>{this._outputConfiguration.writeOut(`${Q}\n`),this._exit(0,"commander.version",Q)}),this}description(Q,X){if(Q===void 0&&X===void 0)return this._description;if(this._description=Q,X)this._argsDescription=X;return this}summary(Q){if(Q===void 0)return this._summary;return this._summary=Q,this}alias(Q){if(Q===void 0)return this._aliases[0];let X=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)X=this.commands[this.commands.length-1];if(Q===X._name)throw new Error("Command alias can\'t be the same as its name");return X._aliases.push(Q),this}aliases(Q){if(Q===void 0)return this._aliases;return Q.forEach((X)=>this.alias(X)),this}usage(Q){if(Q===void 0){if(this._usage)return this._usage;const X=this.registeredArguments.map(($)=>{return B2($)});return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?X:[]).join(" ")}return this._usage=Q,this}name(Q){if(Q===void 0)return this._name;return this._name=Q,this}nameFromFilename(Q){return this._name=o.basename(Q,o.extname(Q)),this}executableDir(Q){if(Q===void 0)return this._executableDir;return this._executableDir=Q,this}helpInformation(Q){const X=this.createHelp();if(X.helpWidth===void 0)X.helpWidth=Q&&Q.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth();return X.formatHelp(this,X)}_getHelpContext(Q){Q=Q||{};const X={error:!!Q.error};let $;if(X.error)$=(Z)=>this._outputConfiguration.writeErr(Z);else $=(Z)=>this._outputConfiguration.writeOut(Z);return X.write=Q.write||$,X.command=this,X}outputHelp(Q){let X;if(typeof Q==="function")X=Q,Q=void 0;const $=this._getHelpContext(Q);this._getCommandAndAncestors().reverse().forEach((J)=>J.emit("beforeAllHelp",$)),this.emit("beforeHelp",$);let Z=this.helpInformation($);if(X){if(Z=X(Z),typeof Z!=="string"&&!Buffer.isBuffer(Z))throw new Error("outputHelp callback must return a string or a Buffer")}if($.write(Z),this._helpLongFlag)this.emit(this._helpLongFlag);this.emit("afterHelp",$),this._getCommandAndAncestors().forEach((J)=>J.emit("afterAllHelp",$))}helpOption(Q,X){if(typeof Q==="boolean")return this._hasHelpOption=Q,this;this._helpFlags=Q||this._helpFlags,this._helpDescription=X||this._helpDescription;const $=w2(this._helpFlags);return this._helpShortFlag=$.shortFlag,this._helpLongFlag=$.longFlag,this}help(Q){this.outputHelp(Q);let X=I.exitCode||0;if(X===0&&Q&&typeof Q!=="function"&&Q.error)X=1;this._exit(X,"commander.help","(outputHelp)")}addHelpText(Q,X){const $=["beforeAll","before","after","afterAll"];if(!$.includes(Q))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${$.join("', '")}'`);const Z=`${Q}Help`;return this.on(Z,(J)=>{let q;if(typeof X==="function")q=X({error:J.error,command:J.command});else q=X;if(q)J.write(`${q}\n`)}),this}}L2.Command=K6});var e6=L((m,t6)=>{var{Argument:I2}=k0(),{Command:s6}=o6(),{CommanderError:D2,InvalidArgumentError:a6}=V0(),{Help:A2}=$6(),{Option:F2}=Z6();m=t6.exports=new s6;m.program=m;m.Command=s6;m.Option=F2;m.Argument=I2;m.Help=A2;m.CommanderError=D2;m.InvalidArgumentError=a6;m.InvalidOptionArgumentError=a6});var q8=L((e5,J8)=>{var $8=function(Q,X,$){if(Q instanceof RegExp)Q=X8(Q,$);if(X instanceof RegExp)X=X8(X,$);var Z=Z8(Q,X,$);return Z&&{start:Z[0],end:Z[1],pre:$.slice(0,Z[0]),body:$.slice(Z[0]+Q.length,Z[1]),post:$.slice(Z[1]+X.length)}},X8=function(Q,X){var $=X.match(Q);return $?$[0]:null},Z8=function(Q,X,$){var Z,J,q,Y,K,_=$.indexOf(Q),j=$.indexOf(X,_+1),H=_;if(_>=0&&j>0){if(Q===X)return[_,j];Z=[],q=$.length;while(H>=0&&!K){if(H==_)Z.push(H),_=$.indexOf(Q,H+1);else if(Z.length==1)K=[Z.pop(),j];else{if(J=Z.pop(),J<q)q=J,Y=j;j=$.indexOf(X,H+1)}H=_<j&&_>=0?_:j}if(Z.length)K=[q,Y]}return K};J8.exports=$8;$8.range=Z8});var U8=L((QQ,V8)=>{var _6=function(Q){return parseInt(Q,10)==Q?parseInt(Q,10):Q.charCodeAt(0)},N2=function(Q){return Q.split("\\\\").join(K8).split("\\{").join(_8).split("\\}").join(j6).split("\\,").join(j8).split("\\.").join(H8)},T2=function(Q){return Q.split(K8).join("\\").split(_8).join("{").split(j6).join("}").split(j8).join(",").split(H8).join(".")},W8=function(Q){if(!Q)return[""];var X=[],$=Y8("{","}",Q);if(!$)return Q.split(",");var{pre:Z,body:J,post:q}=$,Y=Z.split(",");Y[Y.length-1]+="{"+J+"}";var K=W8(q);if(q.length)Y[Y.length-1]+=K.shift(),Y.push.apply(Y,K);return X.push.apply(X,Y),X},P2=function(Q){if(!Q)return[];if(Q.substr(0,2)==="{}")Q="\\{\\}"+Q.substr(2);return U0(N2(Q),!0).map(T2)},S2=function(Q){return"{"+Q+"}"},O2=function(Q){return/^-?0\d/.test(Q)},k2=function(Q,X){return Q<=X},E2=function(Q,X){return Q>=X},U0=function(Q,X){var $=[],Z=Y8("{","}",Q);if(!Z)return[Q];var J=Z.pre,q=Z.post.length?U0(Z.post,!1):[""];if(/\$$/.test(Z.pre))for(var Y=0;Y<q.length;Y++){var K=J+"{"+Z.body+"}"+q[Y];$.push(K)}else{var _=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(Z.body),j=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(Z.body),H=_||j,V=Z.body.indexOf(",")>=0;if(!H&&!V){if(Z.post.match(/,.*\}/))return Q=Z.pre+"{"+Z.body+j6+Z.post,U0(Q);return[Q]}var W;if(H)W=Z.body.split(/\.\./);else if(W=W8(Z.body),W.length===1){if(W=U0(W[0],!1).map(S2),W.length===1)return q.map(function(m9){return Z.pre+W[0]+m9})}var U;if(H){var G=_6(W[0]),z=_6(W[1]),B=Math.max(W[0].length,W[1].length),R=W.length==3?Math.abs(_6(W[2])):1,w=k2,M=z<G;if(M)R*=-1,w=E2;var D=W.some(O2);U=[];for(var E=G;w(E,z);E+=R){var O;if(j){if(O=String.fromCharCode(E),O==="\\")O=""}else if(O=String(E),D){var O0=B-O.length;if(O0>0){var W0=new Array(O0+1).join("0");if(E<0)O="-"+W0+O.slice(1);else O=W0+O}}U.push(O)}}else{U=[];for(var p=0;p<W.length;p++)U.push.apply(U,U0(W[p],!1))}for(var p=0;p<U.length;p++)for(var Y=0;Y<q.length;Y++){var K=J+U[p]+q[Y];if(!X||H||K)$.push(K)}}return $},Y8=q8();V8.exports=P2;var K8="\0SLASH"+Math.random()+"\0",_8="\0OPEN"+Math.random()+"\0",j6="\0CLOSE"+Math.random()+"\0",j8="\0COMMA"+Math.random()+"\0",H8="\0PERIOD"+Math.random()+"\0"});var J9=L(($X,Z9)=>{class $9{constructor(Q,X,$){this.etaBufferLength=Q||100,this.valueBuffer=[$],this.timeBuffer=[X],this.eta="0"}update(Q,X,$){this.valueBuffer.push(X),this.timeBuffer.push(Q),this.calculate($-X)}getTime(){return this.eta}calculate(Q){const X=this.valueBuffer.length,$=Math.min(this.etaBufferLength,X),Z=this.valueBuffer[X-1]-this.valueBuffer[X-$],J=this.timeBuffer[X-1]-this.timeBuffer[X-$],q=Z/J;this.valueBuffer=this.valueBuffer.slice(-this.etaBufferLength),this.timeBuffer=this.timeBuffer.slice(-this.etaBufferLength);const Y=Math.ceil(Q/q/1000);if(isNaN(Y))this.eta="NULL";else if(!isFinite(Y))this.eta="INF";else if(Y>1e7)this.eta="INF";else if(Y<0)this.eta=0;else this.eta=Y}}Z9.exports=$9});var T6=L((ZX,Y9)=>{var J0=t("readline");class q9{constructor(Q){this.stream=Q,this.linewrap=!0,this.dy=0}cursorSave(){if(!this.stream.isTTY)return;this.stream.write("\x1B7")}cursorRestore(){if(!this.stream.isTTY)return;this.stream.write("\x1B8")}cursor(Q){if(!this.stream.isTTY)return;if(Q)this.stream.write("\x1B[?25h");else this.stream.write("\x1B[?25l")}cursorTo(Q=null,X=null){if(!this.stream.isTTY)return;J0.cursorTo(this.stream,Q,X)}cursorRelative(Q=null,X=null){if(!this.stream.isTTY)return;this.dy=this.dy+X,J0.moveCursor(this.stream,Q,X)}cursorRelativeReset(){if(!this.stream.isTTY)return;J0.moveCursor(this.stream,0,-this.dy),J0.cursorTo(this.stream,0,null),this.dy=0}clearRight(){if(!this.stream.isTTY)return;J0.clearLine(this.stream,1)}clearLine(){if(!this.stream.isTTY)return;J0.clearLine(this.stream,0)}clearBottom(){if(!this.stream.isTTY)return;J0.clearScreenDown(this.stream)}newline(){this.stream.write("\n"),this.dy++}write(Q,X=!1){if(this.linewrap===!0&&X===!1)this.stream.write(Q.substr(0,this.getWidth()));else this.stream.write(Q)}lineWrapping(Q){if(!this.stream.isTTY)return;if(this.linewrap=Q,Q)this.stream.write("\x1B[?7h");else this.stream.write("\x1B[?7l")}isTTY(){return this.stream.isTTY===!0}getWidth(){return this.stream.columns||(this.stream.isTTY?80:200)}}Y9.exports=q9});var _9=L((JX,K9)=>{K9.exports=({onlyFirst:Q=!1}={})=>{const X=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(X,Q?void 0:"g")}});var H9=L((qX,j9)=>{var e7=_9();j9.exports=(Q)=>typeof Q==="string"?Q.replace(e7(),""):Q});var V9=L((YX,P6)=>{var W9=(Q)=>{if(Number.isNaN(Q))return!1;if(Q>=4352&&(Q<=4447||Q===9001||Q===9002||11904<=Q&&Q<=12871&&Q!==12351||12880<=Q&&Q<=19903||19968<=Q&&Q<=42182||43360<=Q&&Q<=43388||44032<=Q&&Q<=55203||63744<=Q&&Q<=64255||65040<=Q&&Q<=65049||65072<=Q&&Q<=65131||65281<=Q&&Q<=65376||65504<=Q&&Q<=65510||110592<=Q&&Q<=110593||127488<=Q&&Q<=127569||131072<=Q&&Q<=262141))return!0;return!1};P6.exports=W9;P6.exports.default=W9});var G9=L((KX,U9)=>{U9.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var B9=L((_X,S6)=>{var Q5=H9(),X5=V9(),$5=G9(),z9=(Q)=>{if(typeof Q!=="string"||Q.length===0)return 0;if(Q=Q5(Q),Q.length===0)return 0;Q=Q.replace($5(),"  ");let X=0;for(let $=0;$<Q.length;$++){const Z=Q.codePointAt($);if(Z<=31||Z>=127&&Z<=159)continue;if(Z>=768&&Z<=879)continue;if(Z>65535)$++;X+=X5(Z)?2:1}return X};S6.exports=z9;S6.exports.default=z9});var O6=L((jX,M9)=>{M9.exports=function Q(X,$,Z){if($.autopadding!==!0)return X;function J(q,Y){return($.autopaddingChar+q).slice(-Y)}switch(Z){case"percentage":return J(X,3);default:return X}}});var k6=L((HX,w9)=>{w9.exports=function Q(X,$){const Z=Math.round(X*$.barsize),J=$.barsize-Z;return $.barCompleteString.substr(0,Z)+$.barGlue+$.barIncompleteString.substr(0,J)}});var E6=L((WX,R9)=>{R9.exports=function Q(X,$,Z){function J(Y){if(Z)return Z*Math.round(Y/Z);else return Y}function q(Y){return($.autopaddingChar+Y).slice(-2)}if(X>3600)return q(Math.floor(X/3600))+"h"+q(J(X%3600/60))+"m";else if(X>60)return q(Math.floor(X/60))+"m"+q(J(X%60))+"s";else if(X>10)return q(J(X))+"s";else return q(X)+"s"}});var v6=L((VX,L9)=>{var Z5=B9(),J5=O6(),q5=k6(),Y5=E6();L9.exports=function Q(X,$,Z){let J=X.format;const q=X.formatTime||Y5,Y=X.formatValue||J5,K=X.formatBar||q5,_=Math.floor($.progress*100)+"",j=$.stopTime||Date.now(),H=Math.round((j-$.startTime)/1000),V=Object.assign({},Z,{bar:K($.progress,X),percentage:Y(_,X,"percentage"),total:Y($.total,X,"total"),value:Y($.value,X,"value"),eta:Y($.eta,X,"eta"),eta_formatted:q($.eta,X,5),duration:Y(H,X,"duration"),duration_formatted:q(H,X,1)});J=J.replace(/\{(\w+)\}/g,function(G,z){if(typeof V[z]!=="undefined")return V[z];return G});const W=Math.max(0,$.maxWidth-Z5(J)-2),U=Math.floor(W/2);switch(X.align){case"right":J=W>0?" ".repeat(W)+J:J;break;case"center":J=U>0?" ".repeat(U)+J:J;break;case"left":default:break}return J}});var t0=L((UX,C9)=>{var C=function(Q,X){if(typeof Q==="undefined"||Q===null)return X;else return Q};C9.exports={parse:function Q(X,$){const Z={},J=Object.assign({},$,X);return Z.throttleTime=1000/C(J.fps,10),Z.stream=C(J.stream,process.stderr),Z.terminal=C(J.terminal,null),Z.clearOnComplete=C(J.clearOnComplete,!1),Z.stopOnComplete=C(J.stopOnComplete,!1),Z.barsize=C(J.barsize,40),Z.align=C(J.align,"left"),Z.hideCursor=C(J.hideCursor,!1),Z.linewrap=C(J.linewrap,!1),Z.barGlue=C(J.barGlue,""),Z.barCompleteChar=C(J.barCompleteChar,"="),Z.barIncompleteChar=C(J.barIncompleteChar,"-"),Z.format=C(J.format,"progress [{bar}] {percentage}% | ETA: {eta}s | {value}/{total}"),Z.formatTime=C(J.formatTime,null),Z.formatValue=C(J.formatValue,null),Z.formatBar=C(J.formatBar,null),Z.etaBufferLength=C(J.etaBuffer,10),Z.etaAsynchronousUpdate=C(J.etaAsynchronousUpdate,!1),Z.progressCalculationRelative=C(J.progressCalculationRelative,!1),Z.synchronousUpdate=C(J.synchronousUpdate,!0),Z.noTTYOutput=C(J.noTTYOutput,!1),Z.notTTYSchedule=C(J.notTTYSchedule,2000),Z.emptyOnZero=C(J.emptyOnZero,!1),Z.forceRedraw=C(J.forceRedraw,!1),Z.autopadding=C(J.autopadding,!1),Z.gracefulExit=C(J.gracefulExit,!1),Z},assignDerivedOptions:function Q(X){return X.barCompleteString=X.barCompleteChar.repeat(X.barsize+1),X.barIncompleteString=X.barIncompleteChar.repeat(X.barsize+1),X.autopaddingChar=X.autopadding?C(X.autopaddingChar,"   "):"",X}}});var x6=L((GX,D9)=>{var I9=J9(),K5=T6(),_5=v6(),j5=t0(),H5=t("events");D9.exports=class Q extends H5{constructor(X){super();this.options=j5.assignDerivedOptions(X),this.terminal=this.options.terminal?this.options.terminal:new K5(this.options.stream),this.value=0,this.startValue=0,this.total=100,this.lastDrawnString=null,this.startTime=null,this.stopTime=null,this.lastRedraw=Date.now(),this.eta=new I9(this.options.etaBufferLength,0,0),this.payload={},this.isActive=!1,this.formatter=typeof this.options.format==="function"?this.options.format:_5}render(X=!1){const $={progress:this.getProgress(),eta:this.eta.getTime(),startTime:this.startTime,stopTime:this.stopTime,total:this.total,value:this.value,maxWidth:this.terminal.getWidth()};if(this.options.etaAsynchronousUpdate)this.updateETA();const Z=this.formatter(this.options,$,this.payload);if(X||this.options.forceRedraw||this.options.noTTYOutput&&!this.terminal.isTTY()||this.lastDrawnString!=Z)this.emit("redraw-pre"),this.terminal.cursorTo(0,null),this.terminal.write(Z),this.terminal.clearRight(),this.lastDrawnString=Z,this.lastRedraw=Date.now(),this.emit("redraw-post")}start(X,$,Z){this.value=$||0,this.total=typeof X!=="undefined"&&X>=0?X:100,this.startValue=$||0,this.payload=Z||{},this.startTime=Date.now(),this.stopTime=null,this.lastDrawnString="",this.eta=new I9(this.options.etaBufferLength,this.startTime,this.value),this.isActive=!0,this.emit("start",X,$)}stop(){this.isActive=!1,this.stopTime=Date.now(),this.emit("stop",this.total,this.value)}update(X,$={}){if(typeof X==="number")this.value=X,this.eta.update(Date.now(),X,this.total);const Z=(typeof X==="object"?X:$)||{};this.emit("update",this.total,this.value);for(let J in Z)this.payload[J]=Z[J];if(this.value>=this.getTotal()&&this.options.stopOnComplete)this.stop()}getProgress(){let X=this.value/this.total;if(this.options.progressCalculationRelative)X=(this.value-this.startValue)/(this.total-this.startValue);if(isNaN(X))X=this.options&&this.options.emptyOnZero?0:1;return X=Math.min(Math.max(X,0),1),X}increment(X=1,$={}){if(typeof X==="object")this.update(this.value+1,X);else this.update(this.value+X,$)}getTotal(){return this.total}setTotal(X){if(typeof X!=="undefined"&&X>=0)this.total=X}updateETA(){this.eta.update(Date.now(),this.value,this.total)}}});var F9=L((zX,A9)=>{var W5=x6(),V5=t0();A9.exports=class Q extends W5{constructor(X,$){super(V5.parse(X,$));if(this.timer=null,this.options.noTTYOutput&&this.terminal.isTTY()===!1)this.options.synchronousUpdate=!1;this.schedulingRate=this.terminal.isTTY()?this.options.throttleTime:this.options.notTTYSchedule,this.sigintCallback=null}render(){if(this.timer)clearTimeout(this.timer),this.timer=null;if(super.render(),this.options.noTTYOutput&&this.terminal.isTTY()===!1)this.terminal.newline();this.timer=setTimeout(this.render.bind(this),this.schedulingRate)}update(X,$){if(!this.timer)return;if(super.update(X,$),this.options.synchronousUpdate&&this.lastRedraw+this.options.throttleTime*2<Date.now())this.render()}start(X,$,Z){if(this.options.noTTYOutput===!1&&this.terminal.isTTY()===!1)return;if(this.sigintCallback===null&&this.options.gracefulExit)this.sigintCallback=this.stop.bind(this),process.once("SIGINT",this.sigintCallback),process.once("SIGTERM",this.sigintCallback);if(this.terminal.cursorSave(),this.options.hideCursor===!0)this.terminal.cursor(!1);if(this.options.linewrap===!1)this.terminal.lineWrapping(!1);super.start(X,$,Z),this.render()}stop(){if(!this.timer)return;if(this.sigintCallback)process.removeListener("SIGINT",this.sigintCallback),process.removeListener("SIGTERM",this.sigintCallback),this.sigintCallback=null;if(this.render(),super.stop(),clearTimeout(this.timer),this.timer=null,this.options.hideCursor===!0)this.terminal.cursor(!0);if(this.options.linewrap===!1)this.terminal.lineWrapping(!0);if(this.terminal.cursorRestore(),this.options.clearOnComplete)this.terminal.cursorTo(0,null),this.terminal.clearLine();else this.terminal.newline()}}});var T9=L((BX,N9)=>{var U5=T6(),G5=x6(),z5=t0(),B5=t("events");N9.exports=class Q extends B5{constructor(X,$){super();this.bars=[],this.options=z5.parse(X,$),this.options.synchronousUpdate=!1,this.terminal=this.options.terminal?this.options.terminal:new U5(this.options.stream),this.timer=null,this.isActive=!1,this.schedulingRate=this.terminal.isTTY()?this.options.throttleTime:this.options.notTTYSchedule,this.loggingBuffer=[],this.sigintCallback=null}create(X,$,Z,J={}){const q=new G5(Object.assign({},this.options,{terminal:this.terminal},J));if(this.bars.push(q),this.options.noTTYOutput===!1&&this.terminal.isTTY()===!1)return q;if(this.sigintCallback===null&&this.options.gracefulExit)this.sigintCallback=this.stop.bind(this),process.once("SIGINT",this.sigintCallback),process.once("SIGTERM",this.sigintCallback);if(!this.isActive){if(this.options.hideCursor===!0)this.terminal.cursor(!1);if(this.options.linewrap===!1)this.terminal.lineWrapping(!1);this.timer=setTimeout(this.update.bind(this),this.schedulingRate)}return this.isActive=!0,q.start(X,$,Z),this.emit("start"),q}remove(X){const $=this.bars.indexOf(X);if($<0)return!1;return this.bars.splice($,1),this.update(),this.terminal.newline(),this.terminal.clearBottom(),!0}update(){if(this.timer)clearTimeout(this.timer),this.timer=null;if(this.emit("update-pre"),this.terminal.cursorRelativeReset(),this.emit("redraw-pre"),this.loggingBuffer.length>0){this.terminal.clearLine();while(this.loggingBuffer.length>0)this.terminal.write(this.loggingBuffer.shift(),!0)}for(let X=0;X<this.bars.length;X++){if(X>0)this.terminal.newline();this.bars[X].render()}if(this.emit("redraw-post"),this.options.noTTYOutput&&this.terminal.isTTY()===!1)this.terminal.newline(),this.terminal.newline();if(this.timer=setTimeout(this.update.bind(this),this.schedulingRate),this.emit("update-post"),this.options.stopOnComplete&&!this.bars.find((X)=>X.isActive))this.stop()}stop(){if(clearTimeout(this.timer),this.timer=null,this.sigintCallback)process.removeListener("SIGINT",this.sigintCallback),process.removeListener("SIGTERM",this.sigintCallback),this.sigintCallback=null;if(this.isActive=!1,this.options.hideCursor===!0)this.terminal.cursor(!0);if(this.options.linewrap===!1)this.terminal.lineWrapping(!0);if(this.terminal.cursorRelativeReset(),this.emit("stop-pre-clear"),this.options.clearOnComplete)this.terminal.clearBottom();else{for(let X=0;X<this.bars.length;X++){if(X>0)this.terminal.newline();this.bars[X].render(),this.bars[X].stop()}this.terminal.newline()}this.emit("stop")}log(X){this.loggingBuffer.push(X)}}});var S9=L((MX,P9)=>{P9.exports={format:"progress [{bar}] {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"=",barIncompleteChar:"-"}});var k9=L((wX,O9)=>{O9.exports={format:" {bar} {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"\u2588",barIncompleteChar:"\u2591"}});var v9=L((RX,E9)=>{E9.exports={format:" \x1B[90m{bar}\x1B[0m {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"\u2588",barIncompleteChar:"\u2591"}});var b9=L((LX,x9)=>{x9.exports={format:" {bar}\u25A0 {percentage}% | ETA: {eta}s | {value}/{total}",barCompleteChar:"\u25A0",barIncompleteChar:" "}});var f9=L((CX,y9)=>{var M5=S9(),w5=k9(),R5=v9(),L5=b9();y9.exports={legacy:M5,shades_classic:w5,shades_grey:R5,rect:L5}});var g9=L((IX,h9)=>{var u9=F9(),C5=T9(),I5=f9(),D5=v6(),A5=O6(),F5=k6(),N5=E6();h9.exports={Bar:u9,SingleBar:u9,MultiBar:C5,Presets:I5,Format:{Formatter:D5,BarFormat:F5,ValueFormat:A5,TimeFormat:N5}}});import e0 from"node:path";import S0 from"node:fs";import{exec as T5} from"node:child_process";var Q8=Q6(e6(),1),{program:E0,createCommand:c5,createArgument:d5,createOption:l5,CommanderError:p5,InvalidArgumentError:i5,InvalidOptionArgumentError:n5,Command:r5,Argument:o5,Option:s5,Help:a5}=Q8.default;var C8=Q6(U8(),1);var G0=(Q)=>{if(typeof Q!=="string")throw new TypeError("invalid pattern");if(Q.length>65536)throw new TypeError("pattern is too long")};var v2={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},z0=(Q)=>Q.replace(/[[\]\\-]/g,"\\$&"),x2=(Q)=>Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),G8=(Q)=>Q.join(""),z8=(Q,X)=>{const $=X;if(Q.charAt($)!=="[")throw new Error("not in a brace expression");const Z=[],J=[];let q=$+1,Y=!1,K=!1,_=!1,j=!1,H=$,V="";Q:while(q<Q.length){const z=Q.charAt(q);if((z==="!"||z==="^")&&q===$+1){j=!0,q++;continue}if(z==="]"&&Y&&!_){H=q+1;break}if(Y=!0,z==="\\"){if(!_){_=!0,q++;continue}}if(z==="["&&!_){for(let[B,[R,w,M]]of Object.entries(v2))if(Q.startsWith(B,q)){if(V)return["$.",!1,Q.length-$,!0];if(q+=B.length,M)J.push(R);else Z.push(R);K=K||w;continue Q}}if(_=!1,V){if(z>V)Z.push(z0(V)+"-"+z0(z));else if(z===V)Z.push(z0(z));V="",q++;continue}if(Q.startsWith("-]",q+1)){Z.push(z0(z+"-")),q+=2;continue}if(Q.startsWith("-",q+1)){V=z,q+=2;continue}Z.push(z0(z)),q++}if(H<q)return["",!1,0,!1];if(!Z.length&&!J.length)return["$.",!1,Q.length-$,!0];if(J.length===0&&Z.length===1&&/^\\?.$/.test(Z[0])&&!j){const z=Z[0].length===2?Z[0].slice(-1):Z[0];return[x2(z),!1,H-$,!1]}const W="["+(j?"^":"")+G8(Z)+"]",U="["+(j?"":"^")+G8(J)+"]";return[Z.length&&J.length?"("+W+"|"+U+")":Z.length?W:U,K,H-$,!0]};var c=(Q,{windowsPathsNoEscape:X=!1}={})=>{return X?Q.replace(/\[([^\/\\])\]/g,"$1"):Q.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};var b2=new Set(["!","?","+","*","@"]),B8=(Q)=>b2.has(Q),y2="(?!(?:^|/)\\.\\.?(?:$|/))",v0="(?!\\.)",f2=new Set(["[","."]),u2=new Set(["..","."]),h2=new Set("().*{}+?[]^$\\!"),g2=(Q)=>Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),H6="[^/]",M8=H6+"*?",w8=H6+"+?";class P{type;#Q;#$;#q=!1;#Z=[];#K;#j;#W;#_=!1;#Y;#X;#z=!1;constructor(Q,X,$={}){if(this.type=Q,Q)this.#$=!0;if(this.#K=X,this.#Q=this.#K?this.#K.#Q:this,this.#Y=this.#Q===this?$:this.#Q.#Y,this.#W=this.#Q===this?[]:this.#Q.#W,Q==="!"&&!this.#Q.#_)this.#W.push(this);this.#j=this.#K?this.#K.#Z.length:0}get hasMagic(){if(this.#$!==void 0)return this.#$;for(let Q of this.#Z){if(typeof Q==="string")continue;if(Q.type||Q.hasMagic)return this.#$=!0}return this.#$}toString(){if(this.#X!==void 0)return this.#X;if(!this.type)return this.#X=this.#Z.map((Q)=>String(Q)).join("");else return this.#X=this.type+"("+this.#Z.map((Q)=>String(Q)).join("|")+")"}#M(){if(this!==this.#Q)throw new Error("should only call on root");if(this.#_)return this;this.toString(),this.#_=!0;let Q;while(Q=this.#W.pop()){if(Q.type!=="!")continue;let X=Q,$=X.#K;while($){for(let Z=X.#j+1;!$.type&&Z<$.#Z.length;Z++)for(let J of Q.#Z){if(typeof J==="string")throw new Error("string part in extglob AST??");J.copyIn($.#Z[Z])}X=$,$=X.#K}}return this}push(...Q){for(let X of Q){if(X==="")continue;if(typeof X!=="string"&&!(X instanceof P&&X.#K===this))throw new Error("invalid part: "+X);this.#Z.push(X)}}toJSON(){const Q=this.type===null?this.#Z.slice().map((X)=>typeof X==="string"?X:X.toJSON()):[this.type,...this.#Z.map((X)=>X.toJSON())];if(this.isStart()&&!this.type)Q.unshift([]);if(this.isEnd()&&(this===this.#Q||this.#Q.#_&&this.#K?.type==="!"))Q.push({});return Q}isStart(){if(this.#Q===this)return!0;if(!this.#K?.isStart())return!1;if(this.#j===0)return!0;const Q=this.#K;for(let X=0;X<this.#j;X++){const $=Q.#Z[X];if(!($ instanceof P&&$.type==="!"))return!1}return!0}isEnd(){if(this.#Q===this)return!0;if(this.#K?.type==="!")return!0;if(!this.#K?.isEnd())return!1;if(!this.type)return this.#K?.isEnd();const Q=this.#K?this.#K.#Z.length:0;return this.#j===Q-1}copyIn(Q){if(typeof Q==="string")this.push(Q);else this.push(Q.clone(this))}clone(Q){const X=new P(this.type,Q);for(let $ of this.#Z)X.copyIn($);return X}static#U(Q,X,$,Z){let J=!1,q=!1,Y=-1,K=!1;if(X.type===null){let W=$,U="";while(W<Q.length){const G=Q.charAt(W++);if(J||G==="\\"){J=!J,U+=G;continue}if(q){if(W===Y+1){if(G==="^"||G==="!")K=!0}else if(G==="]"&&!(W===Y+2&&K))q=!1;U+=G;continue}else if(G==="["){q=!0,Y=W,K=!1,U+=G;continue}if(!Z.noext&&B8(G)&&Q.charAt(W)==="("){X.push(U),U="";const z=new P(G,X);W=P.#U(Q,z,W,Z),X.push(z);continue}U+=G}return X.push(U),W}let _=$+1,j=new P(null,X);const H=[];let V="";while(_<Q.length){const W=Q.charAt(_++);if(J||W==="\\"){J=!J,V+=W;continue}if(q){if(_===Y+1){if(W==="^"||W==="!")K=!0}else if(W==="]"&&!(_===Y+2&&K))q=!1;V+=W;continue}else if(W==="["){q=!0,Y=_,K=!1,V+=W;continue}if(B8(W)&&Q.charAt(_)==="("){j.push(V),V="";const U=new P(W,j);j.push(U),_=P.#U(Q,U,_,Z);continue}if(W==="|"){j.push(V),V="",H.push(j),j=new P(null,X);continue}if(W===")"){if(V===""&&X.#Z.length===0)X.#z=!0;return j.push(V),V="",X.push(...H,j),_}V+=W}return X.type=null,X.#$=void 0,X.#Z=[Q.substring($-1)],_}static fromGlob(Q,X={}){const $=new P(null,void 0,X);return P.#U(Q,$,0,X),$}toMMPattern(){if(this!==this.#Q)return this.#Q.toMMPattern();const Q=this.toString(),[X,$,Z,J]=this.toRegExpSource();if(!(Z||this.#$||this.#Y.nocase&&!this.#Y.nocaseMagicOnly&&Q.toUpperCase()!==Q.toLowerCase()))return $;const Y=(this.#Y.nocase?"i":"")+(J?"u":"");return Object.assign(new RegExp(`^${X}\$`,Y),{_src:X,_glob:Q})}toRegExpSource(Q){const X=Q??!!this.#Y.dot;if(this.#Q===this)this.#M();if(!this.type){const K=this.isStart()&&this.isEnd(),_=this.#Z.map((W)=>{const[U,G,z,B]=typeof W==="string"?P.#L(W,this.#$,K):W.toRegExpSource(Q);return this.#$=this.#$||z,this.#q=this.#q||B,U}).join("");let j="";if(this.isStart()){if(typeof this.#Z[0]==="string"){if(!(this.#Z.length===1&&u2.has(this.#Z[0]))){const U=f2,G=X&&U.has(_.charAt(0))||_.startsWith("\\.")&&U.has(_.charAt(2))||_.startsWith("\\.\\.")&&U.has(_.charAt(4)),z=!X&&!Q&&U.has(_.charAt(0));j=G?y2:z?v0:""}}}let H="";if(this.isEnd()&&this.#Q.#_&&this.#K?.type==="!")H="(?:$|\\/)";return[j+_+H,c(_),this.#$=!!this.#$,this.#q]}const $=this.type==="*"||this.type==="+",Z=this.type==="!"?"(?:(?!(?:":"(?:";let J=this.#V(X);if(this.isStart()&&this.isEnd()&&!J&&this.type!=="!"){const K=this.toString();return this.#Z=[K],this.type=null,this.#$=void 0,[K,c(this.toString()),!1,!1]}let q=!$||Q||X||!v0?"":this.#V(!0);if(q===J)q="";if(q)J=`(?:${J})(?:${q})*?`;let Y="";if(this.type==="!"&&this.#z)Y=(this.isStart()&&!X?v0:"")+w8;else{const K=this.type==="!"?"))"+(this.isStart()&&!X&&!Q?v0:"")+M8+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&q?")":this.type==="*"&&q?")?":`)${this.type}`;Y=Z+J+K}return[Y,c(J),this.#$=!!this.#$,this.#q]}#V(Q){return this.#Z.map((X)=>{if(typeof X==="string")throw new Error("string type in extglob ast??");const[$,Z,J,q]=X.toRegExpSource(Q);return this.#q=this.#q||q,$}).filter((X)=>!(this.isStart()&&this.isEnd())||!!X).join("|")}static#L(Q,X,$=!1){let Z=!1,J="",q=!1;for(let Y=0;Y<Q.length;Y++){const K=Q.charAt(Y);if(Z){Z=!1,J+=(h2.has(K)?"\\":"")+K;continue}if(K==="\\"){if(Y===Q.length-1)J+="\\\\";else Z=!0;continue}if(K==="["){const[_,j,H,V]=z8(Q,Y);if(H){J+=_,q=q||j,Y+=H-1,X=X||V;continue}}if(K==="*"){if($&&Q==="*")J+=w8;else J+=M8;X=!0;continue}if(K==="?"){J+=H6,X=!0;continue}J+=g2(K)}return[J,c(Q),!!X,q]}}var q0=(Q,{windowsPathsNoEscape:X=!1}={})=>{return X?Q.replace(/[?*()[\]]/g,"[$&]"):Q.replace(/[?*()[\]\\]/g,"\\$&")};var v=(Q,X,$={})=>{if(G0(X),!$.nocomment&&X.charAt(0)==="#")return!1;return new u(X,$).match(Q)},m2=/^\*+([^+@!?\*\[\(]*)$/,c2=(Q)=>(X)=>!X.startsWith(".")&&X.endsWith(Q),d2=(Q)=>(X)=>X.endsWith(Q),l2=(Q)=>{return Q=Q.toLowerCase(),(X)=>!X.startsWith(".")&&X.toLowerCase().endsWith(Q)},p2=(Q)=>{return Q=Q.toLowerCase(),(X)=>X.toLowerCase().endsWith(Q)},i2=/^\*+\.\*+$/,n2=(Q)=>!Q.startsWith(".")&&Q.includes("."),r2=(Q)=>Q!=="."&&Q!==".."&&Q.includes("."),o2=/^\.\*+$/,s2=(Q)=>Q!=="."&&Q!==".."&&Q.startsWith("."),a2=/^\*+$/,t2=(Q)=>Q.length!==0&&!Q.startsWith("."),e2=(Q)=>Q.length!==0&&Q!=="."&&Q!=="..",Q7=/^\?+([^+@!?\*\[\(]*)?$/,X7=([Q,X=""])=>{const $=I8([Q]);if(!X)return $;return X=X.toLowerCase(),(Z)=>$(Z)&&Z.toLowerCase().endsWith(X)},$7=([Q,X=""])=>{const $=D8([Q]);if(!X)return $;return X=X.toLowerCase(),(Z)=>$(Z)&&Z.toLowerCase().endsWith(X)},Z7=([Q,X=""])=>{const $=D8([Q]);return!X?$:(Z)=>$(Z)&&Z.endsWith(X)},J7=([Q,X=""])=>{const $=I8([Q]);return!X?$:(Z)=>$(Z)&&Z.endsWith(X)},I8=([Q])=>{const X=Q.length;return($)=>$.length===X&&!$.startsWith(".")},D8=([Q])=>{const X=Q.length;return($)=>$.length===X&&$!=="."&&$!==".."},A8=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",R8={win32:{sep:"\\"},posix:{sep:"/"}},q7=A8==="win32"?R8.win32.sep:R8.posix.sep;v.sep=q7;var S=Symbol("globstar **");v.GLOBSTAR=S;var Y7="[^/]",K7=Y7+"*?",_7="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",j7="(?:(?!(?:\\/|^)\\.).)*?",H7=(Q,X={})=>($)=>v($,Q,X);v.filter=H7;var f=(Q,X={})=>Object.assign({},Q,X),W7=(Q)=>{if(!Q||typeof Q!=="object"||!Object.keys(Q).length)return v;const X=v;return Object.assign((Z,J,q={})=>X(Z,J,f(Q,q)),{Minimatch:class Z extends X.Minimatch{constructor(J,q={}){super(J,f(Q,q))}static defaults(J){return X.defaults(f(Q,J)).Minimatch}},AST:class Z extends X.AST{constructor(J,q,Y={}){super(J,q,f(Q,Y))}static fromGlob(J,q={}){return X.AST.fromGlob(J,f(Q,q))}},unescape:(Z,J={})=>X.unescape(Z,f(Q,J)),escape:(Z,J={})=>X.escape(Z,f(Q,J)),filter:(Z,J={})=>X.filter(Z,f(Q,J)),defaults:(Z)=>X.defaults(f(Q,Z)),makeRe:(Z,J={})=>X.makeRe(Z,f(Q,J)),braceExpand:(Z,J={})=>X.braceExpand(Z,f(Q,J)),match:(Z,J,q={})=>X.match(Z,J,f(Q,q)),sep:X.sep,GLOBSTAR:S})};v.defaults=W7;var F8=(Q,X={})=>{if(G0(Q),X.nobrace||!/\{(?:(?!\{).)*\}/.test(Q))return[Q];return C8.default(Q)};v.braceExpand=F8;var V7=(Q,X={})=>new u(Q,X).makeRe();v.makeRe=V7;var U7=(Q,X,$={})=>{const Z=new u(X,$);if(Q=Q.filter((J)=>Z.match(J)),Z.options.nonull&&!Q.length)Q.push(X);return Q};v.match=U7;var L8=/[?*]|[+@!]\(.*?\)|\[|\]/,G7=(Q)=>Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class u{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(Q,X={}){if(G0(Q),X=X||{},this.options=X,this.pattern=Q,this.platform=X.platform||A8,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!X.windowsPathsNoEscape||X.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!X.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!X.nonegate,this.comment=!1,this.empty=!1,this.partial=!!X.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=X.windowsNoMagicRoot!==void 0?X.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let Q of this.set)for(let X of Q)if(typeof X!=="string")return!0;return!1}debug(...Q){}make(){const Q=this.pattern,X=this.options;if(!X.nocomment&&Q.charAt(0)==="#"){this.comment=!0;return}if(!Q){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],X.debug)this.debug=(...J)=>console.error(...J);this.debug(this.pattern,this.globSet);const $=this.globSet.map((J)=>this.slashSplit(J));this.globParts=this.preprocess($),this.debug(this.pattern,this.globParts);let Z=this.globParts.map((J,q,Y)=>{if(this.isWindows&&this.windowsNoMagicRoot){const K=J[0]===""&&J[1]===""&&(J[2]==="?"||!L8.test(J[2]))&&!L8.test(J[3]),_=/^[a-z]:/i.test(J[0]);if(K)return[...J.slice(0,4),...J.slice(4).map((j)=>this.parse(j))];else if(_)return[J[0],...J.slice(1).map((j)=>this.parse(j))]}return J.map((K)=>this.parse(K))});if(this.debug(this.pattern,Z),this.set=Z.filter((J)=>J.indexOf(!1)===-1),this.isWindows)for(let J=0;J<this.set.length;J++){const q=this.set[J];if(q[0]===""&&q[1]===""&&this.globParts[J][2]==="?"&&typeof q[3]==="string"&&/^[a-z]:$/i.test(q[3]))q[2]="?"}this.debug(this.pattern,this.set)}preprocess(Q){if(this.options.noglobstar){for(let $=0;$<Q.length;$++)for(let Z=0;Z<Q[$].length;Z++)if(Q[$][Z]==="**")Q[$][Z]="*"}const{optimizationLevel:X=1}=this.options;if(X>=2)Q=this.firstPhasePreProcess(Q),Q=this.secondPhasePreProcess(Q);else if(X>=1)Q=this.levelOneOptimize(Q);else Q=this.adjascentGlobstarOptimize(Q);return Q}adjascentGlobstarOptimize(Q){return Q.map((X)=>{let $=-1;while(($=X.indexOf("**",$+1))!==-1){let Z=$;while(X[Z+1]==="**")Z++;if(Z!==$)X.splice($,Z-$)}return X})}levelOneOptimize(Q){return Q.map((X)=>{return X=X.reduce(($,Z)=>{const J=$[$.length-1];if(Z==="**"&&J==="**")return $;if(Z===".."){if(J&&J!==".."&&J!=="."&&J!=="**")return $.pop(),$}return $.push(Z),$},[]),X.length===0?[""]:X})}levelTwoFileOptimize(Q){if(!Array.isArray(Q))Q=this.slashSplit(Q);let X=!1;do{if(X=!1,!this.preserveMultipleSlashes){for(let Z=1;Z<Q.length-1;Z++){const J=Q[Z];if(Z===1&&J===""&&Q[0]==="")continue;if(J==="."||J==="")X=!0,Q.splice(Z,1),Z--}if(Q[0]==="."&&Q.length===2&&(Q[1]==="."||Q[1]===""))X=!0,Q.pop()}let $=0;while(($=Q.indexOf("..",$+1))!==-1){const Z=Q[$-1];if(Z&&Z!=="."&&Z!==".."&&Z!=="**")X=!0,Q.splice($-1,2),$-=2}}while(X);return Q.length===0?[""]:Q}firstPhasePreProcess(Q){let X=!1;do{X=!1;for(let $ of Q){let Z=-1;while((Z=$.indexOf("**",Z+1))!==-1){let q=Z;while($[q+1]==="**")q++;if(q>Z)$.splice(Z+1,q-Z);let Y=$[Z+1];const K=$[Z+2],_=$[Z+3];if(Y!=="..")continue;if(!K||K==="."||K===".."||!_||_==="."||_==="..")continue;X=!0,$.splice(Z,1);const j=$.slice(0);j[Z]="**",Q.push(j),Z--}if(!this.preserveMultipleSlashes){for(let q=1;q<$.length-1;q++){const Y=$[q];if(q===1&&Y===""&&$[0]==="")continue;if(Y==="."||Y==="")X=!0,$.splice(q,1),q--}if($[0]==="."&&$.length===2&&($[1]==="."||$[1]===""))X=!0,$.pop()}let J=0;while((J=$.indexOf("..",J+1))!==-1){const q=$[J-1];if(q&&q!=="."&&q!==".."&&q!=="**"){X=!0;const K=J===1&&$[J+1]==="**"?["."]:[];if($.splice(J-1,2,...K),$.length===0)$.push("");J-=2}}}}while(X);return Q}secondPhasePreProcess(Q){for(let X=0;X<Q.length-1;X++)for(let $=X+1;$<Q.length;$++){const Z=this.partsMatch(Q[X],Q[$],!this.preserveMultipleSlashes);if(!Z)continue;Q[X]=Z,Q[$]=[]}return Q.filter((X)=>X.length)}partsMatch(Q,X,$=!1){let Z=0,J=0,q=[],Y="";while(Z<Q.length&&J<X.length)if(Q[Z]===X[J])q.push(Y==="b"?X[J]:Q[Z]),Z++,J++;else if($&&Q[Z]==="**"&&X[J]===Q[Z+1])q.push(Q[Z]),Z++;else if($&&X[J]==="**"&&Q[Z]===X[J+1])q.push(X[J]),J++;else if(Q[Z]==="*"&&X[J]&&(this.options.dot||!X[J].startsWith("."))&&X[J]!=="**"){if(Y==="b")return!1;Y="a",q.push(Q[Z]),Z++,J++}else if(X[J]==="*"&&Q[Z]&&(this.options.dot||!Q[Z].startsWith("."))&&Q[Z]!=="**"){if(Y==="a")return!1;Y="b",q.push(X[J]),Z++,J++}else return!1;return Q.length===X.length&&q}parseNegate(){if(this.nonegate)return;const Q=this.pattern;let X=!1,$=0;for(let Z=0;Z<Q.length&&Q.charAt(Z)==="!";Z++)X=!X,$++;if($)this.pattern=Q.slice($);this.negate=X}matchOne(Q,X,$=!1){const Z=this.options;if(this.isWindows){const G=typeof Q[0]==="string"&&/^[a-z]:$/i.test(Q[0]),z=!G&&Q[0]===""&&Q[1]===""&&Q[2]==="?"&&/^[a-z]:$/i.test(Q[3]),B=typeof X[0]==="string"&&/^[a-z]:$/i.test(X[0]),R=!B&&X[0]===""&&X[1]===""&&X[2]==="?"&&typeof X[3]==="string"&&/^[a-z]:$/i.test(X[3]),w=z?3:G?0:void 0,M=R?3:B?0:void 0;if(typeof w==="number"&&typeof M==="number"){const[D,E]=[Q[w],X[M]];if(D.toLowerCase()===E.toLowerCase()){if(X[M]=D,M>w)X=X.slice(M);else if(w>M)Q=Q.slice(w)}}}const{optimizationLevel:J=1}=this.options;if(J>=2)Q=this.levelTwoFileOptimize(Q);this.debug("matchOne",this,{file:Q,pattern:X}),this.debug("matchOne",Q.length,X.length);for(var q=0,Y=0,K=Q.length,_=X.length;q<K&&Y<_;q++,Y++){this.debug("matchOne loop");var j=X[Y],H=Q[q];if(this.debug(X,j,H),j===!1)return!1;if(j===S){this.debug("GLOBSTAR",[X,j,H]);var V=q,W=Y+1;if(W===_){this.debug("** at the end");for(;q<K;q++)if(Q[q]==="."||Q[q]===".."||!Z.dot&&Q[q].charAt(0)===".")return!1;return!0}while(V<K){var U=Q[V];if(this.debug("\nglobstar while",Q,V,X,W,U),this.matchOne(Q.slice(V),X.slice(W),$))return this.debug("globstar found match!",V,K,U),!0;else{if(U==="."||U===".."||!Z.dot&&U.charAt(0)==="."){this.debug("dot detected!",Q,V,X,W);break}this.debug("globstar swallow a segment, and continue"),V++}}if($){if(this.debug("\n>>> no match, partial?",Q,V,X,W),V===K)return!0}return!1}let G;if(typeof j==="string")G=H===j,this.debug("string match",j,H,G);else G=j.test(H),this.debug("pattern match",j,H,G);if(!G)return!1}if(q===K&&Y===_)return!0;else if(q===K)return $;else if(Y===_)return q===K-1&&Q[q]==="";else throw new Error("wtf?")}braceExpand(){return F8(this.pattern,this.options)}parse(Q){G0(Q);const X=this.options;if(Q==="**")return S;if(Q==="")return"";let $,Z=null;if($=Q.match(a2))Z=X.dot?e2:t2;else if($=Q.match(m2))Z=(X.nocase?X.dot?p2:l2:X.dot?d2:c2)($[1]);else if($=Q.match(Q7))Z=(X.nocase?X.dot?$7:X7:X.dot?Z7:J7)($);else if($=Q.match(i2))Z=X.dot?r2:n2;else if($=Q.match(o2))Z=s2;const J=P.fromGlob(Q,this.options).toMMPattern();return Z?Object.assign(J,{test:Z}):J}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const Q=this.set;if(!Q.length)return this.regexp=!1,this.regexp;const X=this.options,$=X.noglobstar?K7:X.dot?_7:j7,Z=new Set(X.nocase?["i"]:[]);let J=Q.map((K)=>{const _=K.map((j)=>{if(j instanceof RegExp)for(let H of j.flags.split(""))Z.add(H);return typeof j==="string"?G7(j):j===S?S:j._src});return _.forEach((j,H)=>{const V=_[H+1],W=_[H-1];if(j!==S||W===S)return;if(W===void 0)if(V!==void 0&&V!==S)_[H+1]="(?:\\/|"+$+"\\/)?"+V;else _[H]=$;else if(V===void 0)_[H-1]=W+"(?:\\/|"+$+")?";else if(V!==S)_[H-1]=W+"(?:\\/|\\/"+$+"\\/)"+V,_[H+1]=S}),_.filter((j)=>j!==S).join("/")}).join("|");const[q,Y]=Q.length>1?["(?:",")"]:["",""];if(J="^"+q+J+Y+"$",this.negate)J="^(?!"+J+").+$";try{this.regexp=new RegExp(J,[...Z].join(""))}catch(K){this.regexp=!1}return this.regexp}slashSplit(Q){if(this.preserveMultipleSlashes)return Q.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(Q))return["",...Q.split(/\/+/)];else return Q.split(/\/+/)}match(Q,X=this.partial){if(this.debug("match",Q,this.pattern),this.comment)return!1;if(this.empty)return Q==="";if(Q==="/"&&X)return!0;const $=this.options;if(this.isWindows)Q=Q.split("\\").join("/");const Z=this.slashSplit(Q);this.debug(this.pattern,"split",Z);const J=this.set;this.debug(this.pattern,"set",J);let q=Z[Z.length-1];if(!q)for(let Y=Z.length-2;!q&&Y>=0;Y--)q=Z[Y];for(let Y=0;Y<J.length;Y++){const K=J[Y];let _=Z;if($.matchBase&&K.length===1)_=[q];if(this.matchOne(_,K,X)){if($.flipNegate)return!0;return!this.negate}}if($.flipNegate)return!1;return this.negate}static defaults(Q){return v.defaults(Q).Minimatch}}v.AST=P;v.Minimatch=u;v.escape=q0;v.unescape=c;var Y0=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,T8=new Set,W6=typeof process==="object"&&!!process?process:{},P8=(Q,X,$,Z)=>{typeof W6.emitWarning==="function"?W6.emitWarning(Q,X,$,Z):console.error(`[${$}] ${X}: ${Q}`)},x0=globalThis.AbortController,N8=globalThis.AbortSignal;if(typeof x0==="undefined"){N8=class ${onabort;_onabort=[];reason;aborted=!1;addEventListener(Z,J){this._onabort.push(J)}},x0=class ${constructor(){X()}signal=new N8;abort(Z){if(this.signal.aborted)return;this.signal.reason=Z,this.signal.aborted=!0;for(let J of this.signal._onabort)J(Z);this.signal.onabort?.(Z)}};let Q=W6.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const X=()=>{if(!Q)return;Q=!1,P8("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",X)}}var z7=(Q)=>!T8.has(Q),BQ=Symbol("type"),e=(Q)=>Q&&Q===Math.floor(Q)&&Q>0&&isFinite(Q),S8=(Q)=>!e(Q)?null:Q<=Math.pow(2,8)?Uint8Array:Q<=Math.pow(2,16)?Uint16Array:Q<=Math.pow(2,32)?Uint32Array:Q<=Number.MAX_SAFE_INTEGER?B0:null;class B0 extends Array{constructor(Q){super(Q);this.fill(0)}}class K0{heap;length;static#Q=!1;static create(Q){const X=S8(Q);if(!X)return[];K0.#Q=!0;const $=new K0(Q,X);return K0.#Q=!1,$}constructor(Q,X){if(!K0.#Q)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new X(Q),this.length=0}push(Q){this.heap[this.length++]=Q}pop(){return this.heap[--this.length]}}class M0{#Q;#$;#q;#Z;#K;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#j;#W;#_;#Y;#X;#z;#M;#U;#V;#L;#B;#F;#N;#C;#R;#P;#G;static unsafeExposeInternals(Q){return{starts:Q.#N,ttls:Q.#C,sizes:Q.#F,keyMap:Q.#_,keyList:Q.#Y,valList:Q.#X,next:Q.#z,prev:Q.#M,get head(){return Q.#U},get tail(){return Q.#V},free:Q.#L,isBackgroundFetch:(X)=>Q.#H(X),backgroundFetch:(X,$,Z,J)=>Q.#x(X,$,Z,J),moveToTail:(X)=>Q.#v(X),indexes:(X)=>Q.#A(X),rindexes:(X)=>Q.#S(X),isStale:(X)=>Q.#w(X)}}get max(){return this.#Q}get maxSize(){return this.#$}get calculatedSize(){return this.#W}get size(){return this.#j}get fetchMethod(){return this.#K}get dispose(){return this.#q}get disposeAfter(){return this.#Z}constructor(Q){const{max:X=0,ttl:$,ttlResolution:Z=1,ttlAutopurge:J,updateAgeOnGet:q,updateAgeOnHas:Y,allowStale:K,dispose:_,disposeAfter:j,noDisposeOnSet:H,noUpdateTTL:V,maxSize:W=0,maxEntrySize:U=0,sizeCalculation:G,fetchMethod:z,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:M,ignoreFetchAbort:D}=Q;if(X!==0&&!e(X))throw new TypeError("max option must be a nonnegative integer");const E=X?S8(X):Array;if(!E)throw new Error("invalid max value: "+X);if(this.#Q=X,this.#$=W,this.maxEntrySize=U||this.#$,this.sizeCalculation=G,this.sizeCalculation){if(!this.#$&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw new TypeError("sizeCalculation set to non-function")}if(z!==void 0&&typeof z!=="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#K=z,this.#P=!!z,this.#_=new Map,this.#Y=new Array(X).fill(void 0),this.#X=new Array(X).fill(void 0),this.#z=new E(X),this.#M=new E(X),this.#U=0,this.#V=0,this.#L=K0.create(X),this.#j=0,this.#W=0,typeof _==="function")this.#q=_;if(typeof j==="function")this.#Z=j,this.#B=[];else this.#Z=void 0,this.#B=void 0;if(this.#R=!!this.#q,this.#G=!!this.#Z,this.noDisposeOnSet=!!H,this.noUpdateTTL=!!V,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!M,this.ignoreFetchAbort=!!D,this.maxEntrySize!==0){if(this.#$!==0){if(!e(this.#$))throw new TypeError("maxSize must be a positive integer if specified")}if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#k()}if(this.allowStale=!!K,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!q,this.updateAgeOnHas=!!Y,this.ttlResolution=e(Z)||Z===0?Z:1,this.ttlAutopurge=!!J,this.ttl=$||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#Q===0&&this.ttl===0&&this.#$===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#Q&&!this.#$){if(z7("LRU_CACHE_UNBOUNDED"))T8.add("LRU_CACHE_UNBOUNDED"),P8("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",M0)}}getRemainingTTL(Q){return this.#_.has(Q)?Infinity:0}#O(){const Q=new B0(this.#Q),X=new B0(this.#Q);this.#C=Q,this.#N=X,this.#J=(J,q,Y=Y0.now())=>{if(X[J]=q!==0?Y:0,Q[J]=q,q!==0&&this.ttlAutopurge){const K=setTimeout(()=>{if(this.#w(J))this.delete(this.#Y[J])},q+1);if(K.unref)K.unref()}},this.#T=(J)=>{X[J]=Q[J]!==0?Y0.now():0},this.#I=(J,q)=>{if(Q[q]){const Y=Q[q],K=X[q];if(!Y||!K)return;J.ttl=Y,J.start=K,J.now=$||Z();const _=J.now-K;J.remainingTTL=Y-_}};let $=0;const Z=()=>{const J=Y0.now();if(this.ttlResolution>0){$=J;const q=setTimeout(()=>$=0,this.ttlResolution);if(q.unref)q.unref()}return J};this.getRemainingTTL=(J)=>{const q=this.#_.get(J);if(q===void 0)return 0;const Y=Q[q],K=X[q];if(!Y||!K)return Infinity;const _=($||Z())-K;return Y-_},this.#w=(J)=>{const q=X[J],Y=Q[J];return!!Y&&!!q&&($||Z())-q>Y}}#T=()=>{};#I=()=>{};#J=()=>{};#w=()=>!1;#k(){const Q=new B0(this.#Q);this.#W=0,this.#F=Q,this.#D=(X)=>{this.#W-=Q[X],Q[X]=0},this.#y=(X,$,Z,J)=>{if(this.#H($))return 0;if(!e(Z))if(J){if(typeof J!=="function")throw new TypeError("sizeCalculation must be a function");if(Z=J($,X),!e(Z))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Z},this.#b=(X,$,Z)=>{if(Q[X]=$,this.#$){const J=this.#$-Q[X];while(this.#W>J)this.#E(!0)}if(this.#W+=Q[X],Z)Z.entrySize=$,Z.totalCalculatedSize=this.#W}}#D=(Q)=>{};#b=(Q,X,$)=>{};#y=(Q,X,$,Z)=>{if($||Z)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#A({allowStale:Q=this.allowStale}={}){if(this.#j)for(let X=this.#V;;){if(!this.#f(X))break;if(Q||!this.#w(X))yield X;if(X===this.#U)break;else X=this.#M[X]}}*#S({allowStale:Q=this.allowStale}={}){if(this.#j)for(let X=this.#U;;){if(!this.#f(X))break;if(Q||!this.#w(X))yield X;if(X===this.#V)break;else X=this.#z[X]}}#f(Q){return Q!==void 0&&this.#_.get(this.#Y[Q])===Q}*entries(){for(let Q of this.#A())if(this.#X[Q]!==void 0&&this.#Y[Q]!==void 0&&!this.#H(this.#X[Q]))yield[this.#Y[Q],this.#X[Q]]}*rentries(){for(let Q of this.#S())if(this.#X[Q]!==void 0&&this.#Y[Q]!==void 0&&!this.#H(this.#X[Q]))yield[this.#Y[Q],this.#X[Q]]}*keys(){for(let Q of this.#A()){const X=this.#Y[Q];if(X!==void 0&&!this.#H(this.#X[Q]))yield X}}*rkeys(){for(let Q of this.#S()){const X=this.#Y[Q];if(X!==void 0&&!this.#H(this.#X[Q]))yield X}}*values(){for(let Q of this.#A())if(this.#X[Q]!==void 0&&!this.#H(this.#X[Q]))yield this.#X[Q]}*rvalues(){for(let Q of this.#S())if(this.#X[Q]!==void 0&&!this.#H(this.#X[Q]))yield this.#X[Q]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(Q,X={}){for(let $ of this.#A()){const Z=this.#X[$],J=this.#H(Z)?Z.__staleWhileFetching:Z;if(J===void 0)continue;if(Q(J,this.#Y[$],this))return this.get(this.#Y[$],X)}}forEach(Q,X=this){for(let $ of this.#A()){const Z=this.#X[$],J=this.#H(Z)?Z.__staleWhileFetching:Z;if(J===void 0)continue;Q.call(X,J,this.#Y[$],this)}}rforEach(Q,X=this){for(let $ of this.#S()){const Z=this.#X[$],J=this.#H(Z)?Z.__staleWhileFetching:Z;if(J===void 0)continue;Q.call(X,J,this.#Y[$],this)}}purgeStale(){let Q=!1;for(let X of this.#S({allowStale:!0}))if(this.#w(X))this.delete(this.#Y[X]),Q=!0;return Q}info(Q){const X=this.#_.get(Q);if(X===void 0)return;const $=this.#X[X],Z=this.#H($)?$.__staleWhileFetching:$;if(Z===void 0)return;const J={value:Z};if(this.#C&&this.#N){const q=this.#C[X],Y=this.#N[X];if(q&&Y){const K=q-(Y0.now()-Y);J.ttl=K,J.start=Date.now()}}if(this.#F)J.size=this.#F[X];return J}dump(){const Q=[];for(let X of this.#A({allowStale:!0})){const $=this.#Y[X],Z=this.#X[X],J=this.#H(Z)?Z.__staleWhileFetching:Z;if(J===void 0||$===void 0)continue;const q={value:J};if(this.#C&&this.#N){q.ttl=this.#C[X];const Y=Y0.now()-this.#N[X];q.start=Math.floor(Date.now()-Y)}if(this.#F)q.size=this.#F[X];Q.unshift([$,q])}return Q}load(Q){this.clear();for(let[X,$]of Q){if($.start){const Z=Date.now()-$.start;$.start=Y0.now()-Z}this.set(X,$.value,$)}}set(Q,X,$={}){if(X===void 0)return this.delete(Q),this;const{ttl:Z=this.ttl,start:J,noDisposeOnSet:q=this.noDisposeOnSet,sizeCalculation:Y=this.sizeCalculation,status:K}=$;let{noUpdateTTL:_=this.noUpdateTTL}=$;const j=this.#y(Q,X,$.size||0,Y);if(this.maxEntrySize&&j>this.maxEntrySize){if(K)K.set="miss",K.maxEntrySizeExceeded=!0;return this.delete(Q),this}let H=this.#j===0?void 0:this.#_.get(Q);if(H===void 0){if(H=this.#j===0?this.#V:this.#L.length!==0?this.#L.pop():this.#j===this.#Q?this.#E(!1):this.#j,this.#Y[H]=Q,this.#X[H]=X,this.#_.set(Q,H),this.#z[this.#V]=H,this.#M[H]=this.#V,this.#V=H,this.#j++,this.#b(H,j,K),K)K.set="add";_=!1}else{this.#v(H);const V=this.#X[H];if(X!==V){if(this.#P&&this.#H(V)){V.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:W}=V;if(W!==void 0&&!q){if(this.#R)this.#q?.(W,Q,"set");if(this.#G)this.#B?.push([W,Q,"set"])}}else if(!q){if(this.#R)this.#q?.(V,Q,"set");if(this.#G)this.#B?.push([V,Q,"set"])}if(this.#D(H),this.#b(H,j,K),this.#X[H]=X,K){K.set="replace";const W=V&&this.#H(V)?V.__staleWhileFetching:V;if(W!==void 0)K.oldValue=W}}else if(K)K.set="update"}if(Z!==0&&!this.#C)this.#O();if(this.#C){if(!_)this.#J(H,Z,J);if(K)this.#I(K,H)}if(!q&&this.#G&&this.#B){const V=this.#B;let W;while(W=V?.shift())this.#Z?.(...W)}return this}pop(){try{while(this.#j){const Q=this.#X[this.#U];if(this.#E(!0),this.#H(Q)){if(Q.__staleWhileFetching)return Q.__staleWhileFetching}else if(Q!==void 0)return Q}}finally{if(this.#G&&this.#B){const Q=this.#B;let X;while(X=Q?.shift())this.#Z?.(...X)}}}#E(Q){const X=this.#U,$=this.#Y[X],Z=this.#X[X];if(this.#P&&this.#H(Z))Z.__abortController.abort(new Error("evicted"));else if(this.#R||this.#G){if(this.#R)this.#q?.(Z,$,"evict");if(this.#G)this.#B?.push([Z,$,"evict"])}if(this.#D(X),Q)this.#Y[X]=void 0,this.#X[X]=void 0,this.#L.push(X);if(this.#j===1)this.#U=this.#V=0,this.#L.length=0;else this.#U=this.#z[X];return this.#_.delete($),this.#j--,X}has(Q,X={}){const{updateAgeOnHas:$=this.updateAgeOnHas,status:Z}=X,J=this.#_.get(Q);if(J!==void 0){const q=this.#X[J];if(this.#H(q)&&q.__staleWhileFetching===void 0)return!1;if(!this.#w(J)){if($)this.#T(J);if(Z)Z.has="hit",this.#I(Z,J);return!0}else if(Z)Z.has="stale",this.#I(Z,J)}else if(Z)Z.has="miss";return!1}peek(Q,X={}){const{allowStale:$=this.allowStale}=X,Z=this.#_.get(Q);if(Z===void 0||!$&&this.#w(Z))return;const J=this.#X[Z];return this.#H(J)?J.__staleWhileFetching:J}#x(Q,X,$,Z){const J=X===void 0?void 0:this.#X[X];if(this.#H(J))return J;const q=new x0,{signal:Y}=$;Y?.addEventListener("abort",()=>q.abort(Y.reason),{signal:q.signal});const K={signal:q.signal,options:$,context:Z},_=(G,z=!1)=>{const{aborted:B}=q.signal,R=$.ignoreFetchAbort&&G!==void 0;if($.status)if(B&&!z){if($.status.fetchAborted=!0,$.status.fetchError=q.signal.reason,R)$.status.fetchAbortIgnored=!0}else $.status.fetchResolved=!0;if(B&&!R&&!z)return H(q.signal.reason);const w=W;if(this.#X[X]===W)if(G===void 0)if(w.__staleWhileFetching)this.#X[X]=w.__staleWhileFetching;else this.delete(Q);else{if($.status)$.status.fetchUpdated=!0;this.set(Q,G,K.options)}return G},j=(G)=>{if($.status)$.status.fetchRejected=!0,$.status.fetchError=G;return H(G)},H=(G)=>{const{aborted:z}=q.signal,B=z&&$.allowStaleOnFetchAbort,R=B||$.allowStaleOnFetchRejection,w=R||$.noDeleteOnFetchRejection,M=W;if(this.#X[X]===W){if(!w||M.__staleWhileFetching===void 0)this.delete(Q);else if(!B)this.#X[X]=M.__staleWhileFetching}if(R){if($.status&&M.__staleWhileFetching!==void 0)$.status.returnedStale=!0;return M.__staleWhileFetching}else if(M.__returned===M)throw G},V=(G,z)=>{const B=this.#K?.(Q,J,K);if(B&&B instanceof Promise)B.then((R)=>G(R===void 0?void 0:R),z);q.signal.addEventListener("abort",()=>{if(!$.ignoreFetchAbort||$.allowStaleOnFetchAbort){if(G(void 0),$.allowStaleOnFetchAbort)G=(R)=>_(R,!0)}})};if($.status)$.status.fetchDispatched=!0;const W=new Promise(V).then(_,j),U=Object.assign(W,{__abortController:q,__staleWhileFetching:J,__returned:void 0});if(X===void 0)this.set(Q,U,{...K.options,status:void 0}),X=this.#_.get(Q);else this.#X[X]=U;return U}#H(Q){if(!this.#P)return!1;const X=Q;return!!X&&X instanceof Promise&&X.hasOwnProperty("__staleWhileFetching")&&X.__abortController instanceof x0}async fetch(Q,X={}){const{allowStale:$=this.allowStale,updateAgeOnGet:Z=this.updateAgeOnGet,noDeleteOnStaleGet:J=this.noDeleteOnStaleGet,ttl:q=this.ttl,noDisposeOnSet:Y=this.noDisposeOnSet,size:K=0,sizeCalculation:_=this.sizeCalculation,noUpdateTTL:j=this.noUpdateTTL,noDeleteOnFetchRejection:H=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:V=this.allowStaleOnFetchRejection,ignoreFetchAbort:W=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:G,forceRefresh:z=!1,status:B,signal:R}=X;if(!this.#P){if(B)B.fetch="get";return this.get(Q,{allowStale:$,updateAgeOnGet:Z,noDeleteOnStaleGet:J,status:B})}const w={allowStale:$,updateAgeOnGet:Z,noDeleteOnStaleGet:J,ttl:q,noDisposeOnSet:Y,size:K,sizeCalculation:_,noUpdateTTL:j,noDeleteOnFetchRejection:H,allowStaleOnFetchRejection:V,allowStaleOnFetchAbort:U,ignoreFetchAbort:W,status:B,signal:R};let M=this.#_.get(Q);if(M===void 0){if(B)B.fetch="miss";const D=this.#x(Q,M,w,G);return D.__returned=D}else{const D=this.#X[M];if(this.#H(D)){const p=$&&D.__staleWhileFetching!==void 0;if(B){if(B.fetch="inflight",p)B.returnedStale=!0}return p?D.__staleWhileFetching:D.__returned=D}const E=this.#w(M);if(!z&&!E){if(B)B.fetch="hit";if(this.#v(M),Z)this.#T(M);if(B)this.#I(B,M);return D}const O=this.#x(Q,M,w,G),W0=O.__staleWhileFetching!==void 0&&$;if(B){if(B.fetch=E?"stale":"refresh",W0&&E)B.returnedStale=!0}return W0?O.__staleWhileFetching:O.__returned=O}}get(Q,X={}){const{allowStale:$=this.allowStale,updateAgeOnGet:Z=this.updateAgeOnGet,noDeleteOnStaleGet:J=this.noDeleteOnStaleGet,status:q}=X,Y=this.#_.get(Q);if(Y!==void 0){const K=this.#X[Y],_=this.#H(K);if(q)this.#I(q,Y);if(this.#w(Y)){if(q)q.get="stale";if(!_){if(!J)this.delete(Q);if(q&&$)q.returnedStale=!0;return $?K:void 0}else{if(q&&$&&K.__staleWhileFetching!==void 0)q.returnedStale=!0;return $?K.__staleWhileFetching:void 0}}else{if(q)q.get="hit";if(_)return K.__staleWhileFetching;if(this.#v(Y),Z)this.#T(Y);return K}}else if(q)q.get="miss"}#u(Q,X){this.#M[X]=Q,this.#z[Q]=X}#v(Q){if(Q!==this.#V){if(Q===this.#U)this.#U=this.#z[Q];else this.#u(this.#M[Q],this.#z[Q]);this.#u(this.#V,Q),this.#V=Q}}delete(Q){let X=!1;if(this.#j!==0){const $=this.#_.get(Q);if($!==void 0)if(X=!0,this.#j===1)this.clear();else{this.#D($);const Z=this.#X[$];if(this.#H(Z))Z.__abortController.abort(new Error("deleted"));else if(this.#R||this.#G){if(this.#R)this.#q?.(Z,Q,"delete");if(this.#G)this.#B?.push([Z,Q,"delete"])}if(this.#_.delete(Q),this.#Y[$]=void 0,this.#X[$]=void 0,$===this.#V)this.#V=this.#M[$];else if($===this.#U)this.#U=this.#z[$];else{const J=this.#M[$];this.#z[J]=this.#z[$];const q=this.#z[$];this.#M[q]=this.#M[$]}this.#j--,this.#L.push($)}}if(this.#G&&this.#B?.length){const $=this.#B;let Z;while(Z=$?.shift())this.#Z?.(...Z)}return X}clear(){for(let Q of this.#S({allowStale:!0})){const X=this.#X[Q];if(this.#H(X))X.__abortController.abort(new Error("deleted"));else{const $=this.#Y[Q];if(this.#R)this.#q?.(X,$,"delete");if(this.#G)this.#B?.push([X,$,"delete"])}}if(this.#_.clear(),this.#X.fill(void 0),this.#Y.fill(void 0),this.#C&&this.#N)this.#C.fill(0),this.#N.fill(0);if(this.#F)this.#F.fill(0);if(this.#U=0,this.#V=0,this.#L.length=0,this.#W=0,this.#j=0,this.#G&&this.#B){const Q=this.#B;let X;while(X=Q?.shift())this.#Z?.(...X)}}}import{posix as N7,win32 as C6} from"path";import{fileURLToPath as T7} from"url";import*as P7 from"fs";import{lstatSync as S7,readdir as O7,readdirSync as k7,readlinkSync as E7,realpathSync as v7} from"fs";import{lstat as b7,readdir as y7,readlink as f7,realpath as u7} from"fs/promises";import{EventEmitter as M6} from"events";import x8 from"stream";import{StringDecoder as B7} from"string_decoder";var O8=typeof process==="object"&&process?process:{stdout:null,stderr:null},M7=(Q)=>!!Q&&typeof Q==="object"&&(Q instanceof $0||Q instanceof x8||w7(Q)||R7(Q)),w7=(Q)=>!!Q&&typeof Q==="object"&&Q instanceof M6&&typeof Q.pipe==="function"&&Q.pipe!==x8.Writable.prototype.pipe,R7=(Q)=>!!Q&&typeof Q==="object"&&Q instanceof M6&&typeof Q.write==="function"&&typeof Q.end==="function",s=Symbol("EOF"),a=Symbol("maybeEmitEnd"),Q0=Symbol("emittedEnd"),b0=Symbol("emittingEnd"),w0=Symbol("emittedError"),y0=Symbol("closed"),k8=Symbol("read"),f0=Symbol("flush"),E8=Symbol("flushChunk"),d=Symbol("encoding"),_0=Symbol("decoder"),F=Symbol("flowing"),R0=Symbol("paused"),j0=Symbol("resume"),N=Symbol("buffer"),x=Symbol("pipes"),T=Symbol("bufferLength"),V6=Symbol("bufferPush"),u0=Symbol("bufferShift"),k=Symbol("objectMode"),A=Symbol("destroyed"),U6=Symbol("error"),G6=Symbol("emitData"),v8=Symbol("emitEnd"),z6=Symbol("emitEnd2"),i=Symbol("async"),B6=Symbol("abort"),h0=Symbol("aborted"),L0=Symbol("signal"),X0=Symbol("dataListeners"),y=Symbol("discarded"),C0=(Q)=>Promise.resolve().then(Q),L7=(Q)=>Q(),C7=(Q)=>Q==="end"||Q==="finish"||Q==="prefinish",I7=(Q)=>Q instanceof ArrayBuffer||!!Q&&typeof Q==="object"&&Q.constructor&&Q.constructor.name==="ArrayBuffer"&&Q.byteLength>=0,D7=(Q)=>!Buffer.isBuffer(Q)&&ArrayBuffer.isView(Q);class w6{src;dest;opts;ondrain;constructor(Q,X,$){this.src=Q,this.dest=X,this.opts=$,this.ondrain=()=>Q[j0](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(Q){}end(){if(this.unpipe(),this.opts.end)this.dest.end()}}class b8 extends w6{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(Q,X,$){super(Q,X,$);this.proxyErrors=(Z)=>X.emit("error",Z),Q.on("error",this.proxyErrors)}}var A7=(Q)=>!!Q.objectMode,F7=(Q)=>!Q.objectMode&&!!Q.encoding&&Q.encoding!=="buffer";class $0 extends M6{[F]=!1;[R0]=!1;[x]=[];[N]=[];[k];[d];[i];[_0];[s]=!1;[Q0]=!1;[b0]=!1;[y0]=!1;[w0]=null;[T]=0;[A]=!1;[L0];[h0]=!1;[X0]=0;[y]=!1;writable=!0;readable=!0;constructor(...Q){const X=Q[0]||{};super();if(X.objectMode&&typeof X.encoding==="string")throw new TypeError("Encoding and objectMode may not be used together");if(A7(X))this[k]=!0,this[d]=null;else if(F7(X))this[d]=X.encoding,this[k]=!1;else this[k]=!1,this[d]=null;if(this[i]=!!X.async,this[_0]=this[d]?new B7(this[d]):null,X&&X.debugExposeBuffer===!0)Object.defineProperty(this,"buffer",{get:()=>this[N]});if(X&&X.debugExposePipes===!0)Object.defineProperty(this,"pipes",{get:()=>this[x]});const{signal:$}=X;if($)if(this[L0]=$,$.aborted)this[B6]();else $.addEventListener("abort",()=>this[B6]())}get bufferLength(){return this[T]}get encoding(){return this[d]}set encoding(Q){throw new Error("Encoding must be set at instantiation time")}setEncoding(Q){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[k]}set objectMode(Q){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[i]}set["async"](Q){this[i]=this[i]||!!Q}[B6](){this[h0]=!0,this.emit("abort",this[L0]?.reason),this.destroy(this[L0]?.reason)}get aborted(){return this[h0]}set aborted(Q){}write(Q,X,$){if(this[h0])return!1;if(this[s])throw new Error("write after end");if(this[A])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;if(typeof X==="function")$=X,X="utf8";if(!X)X="utf8";const Z=this[i]?C0:L7;if(!this[k]&&!Buffer.isBuffer(Q)){if(D7(Q))Q=Buffer.from(Q.buffer,Q.byteOffset,Q.byteLength);else if(I7(Q))Q=Buffer.from(Q);else if(typeof Q!=="string")throw new Error("Non-contiguous data written to non-objectMode stream")}if(this[k]){if(this[F]&&this[T]!==0)this[f0](!0);if(this[F])this.emit("data",Q);else this[V6](Q);if(this[T]!==0)this.emit("readable");if($)Z($);return this[F]}if(!Q.length){if(this[T]!==0)this.emit("readable");if($)Z($);return this[F]}if(typeof Q==="string"&&!(X===this[d]&&!this[_0]?.lastNeed))Q=Buffer.from(Q,X);if(Buffer.isBuffer(Q)&&this[d])Q=this[_0].write(Q);if(this[F]&&this[T]!==0)this[f0](!0);if(this[F])this.emit("data",Q);else this[V6](Q);if(this[T]!==0)this.emit("readable");if($)Z($);return this[F]}read(Q){if(this[A])return null;if(this[y]=!1,this[T]===0||Q===0||Q&&Q>this[T])return this[a](),null;if(this[k])Q=null;if(this[N].length>1&&!this[k])this[N]=[this[d]?this[N].join(""):Buffer.concat(this[N],this[T])];const X=this[k8](Q||null,this[N][0]);return this[a](),X}[k8](Q,X){if(this[k])this[u0]();else{const $=X;if(Q===$.length||Q===null)this[u0]();else if(typeof $==="string")this[N][0]=$.slice(Q),X=$.slice(0,Q),this[T]-=Q;else this[N][0]=$.subarray(Q),X=$.subarray(0,Q),this[T]-=Q}if(this.emit("data",X),!this[N].length&&!this[s])this.emit("drain");return X}end(Q,X,$){if(typeof Q==="function")$=Q,Q=void 0;if(typeof X==="function")$=X,X="utf8";if(Q!==void 0)this.write(Q,X);if($)this.once("end",$);if(this[s]=!0,this.writable=!1,this[F]||!this[R0])this[a]();return this}[j0](){if(this[A])return;if(!this[X0]&&!this[x].length)this[y]=!0;if(this[R0]=!1,this[F]=!0,this.emit("resume"),this[N].length)this[f0]();else if(this[s])this[a]();else this.emit("drain")}resume(){return this[j0]()}pause(){this[F]=!1,this[R0]=!0,this[y]=!1}get destroyed(){return this[A]}get flowing(){return this[F]}get paused(){return this[R0]}[V6](Q){if(this[k])this[T]+=1;else this[T]+=Q.length;this[N].push(Q)}[u0](){if(this[k])this[T]-=1;else this[T]-=this[N][0].length;return this[N].shift()}[f0](Q=!1){do;while(this[E8](this[u0]())&&this[N].length);if(!Q&&!this[N].length&&!this[s])this.emit("drain")}[E8](Q){return this.emit("data",Q),this[F]}pipe(Q,X){if(this[A])return Q;this[y]=!1;const $=this[Q0];if(X=X||{},Q===O8.stdout||Q===O8.stderr)X.end=!1;else X.end=X.end!==!1;if(X.proxyErrors=!!X.proxyErrors,$){if(X.end)Q.end()}else if(this[x].push(!X.proxyErrors?new w6(this,Q,X):new b8(this,Q,X)),this[i])C0(()=>this[j0]());else this[j0]();return Q}unpipe(Q){const X=this[x].find(($)=>$.dest===Q);if(X){if(this[x].length===1){if(this[F]&&this[X0]===0)this[F]=!1;this[x]=[]}else this[x].splice(this[x].indexOf(X),1);X.unpipe()}}addListener(Q,X){return this.on(Q,X)}on(Q,X){const $=super.on(Q,X);if(Q==="data"){if(this[y]=!1,this[X0]++,!this[x].length&&!this[F])this[j0]()}else if(Q==="readable"&&this[T]!==0)super.emit("readable");else if(C7(Q)&&this[Q0])super.emit(Q),this.removeAllListeners(Q);else if(Q==="error"&&this[w0]){const Z=X;if(this[i])C0(()=>Z.call(this,this[w0]));else Z.call(this,this[w0])}return $}removeListener(Q,X){return this.off(Q,X)}off(Q,X){const $=super.off(Q,X);if(Q==="data"){if(this[X0]=this.listeners("data").length,this[X0]===0&&!this[y]&&!this[x].length)this[F]=!1}return $}removeAllListeners(Q){const X=super.removeAllListeners(Q);if(Q==="data"||Q===void 0){if(this[X0]=0,!this[y]&&!this[x].length)this[F]=!1}return X}get emittedEnd(){return this[Q0]}[a](){if(!this[b0]&&!this[Q0]&&!this[A]&&this[N].length===0&&this[s]){if(this[b0]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[y0])this.emit("close");this[b0]=!1}}emit(Q,...X){const $=X[0];if(Q!=="error"&&Q!=="close"&&Q!==A&&this[A])return!1;else if(Q==="data")return!this[k]&&!$?!1:this[i]?(C0(()=>this[G6]($)),!0):this[G6]($);else if(Q==="end")return this[v8]();else if(Q==="close"){if(this[y0]=!0,!this[Q0]&&!this[A])return!1;const J=super.emit("close");return this.removeAllListeners("close"),J}else if(Q==="error"){this[w0]=$,super.emit(U6,$);const J=!this[L0]||this.listeners("error").length?super.emit("error",$):!1;return this[a](),J}else if(Q==="resume"){const J=super.emit("resume");return this[a](),J}else if(Q==="finish"||Q==="prefinish"){const J=super.emit(Q);return this.removeAllListeners(Q),J}const Z=super.emit(Q,...X);return this[a](),Z}[G6](Q){for(let $ of this[x])if($.dest.write(Q)===!1)this.pause();const X=this[y]?!1:super.emit("data",Q);return this[a](),X}[v8](){if(this[Q0])return!1;return this[Q0]=!0,this.readable=!1,this[i]?(C0(()=>this[z6]()),!0):this[z6]()}[z6](){if(this[_0]){const X=this[_0].end();if(X){for(let $ of this[x])$.dest.write(X);if(!this[y])super.emit("data",X)}}for(let X of this[x])X.end();const Q=super.emit("end");return this.removeAllListeners("end"),Q}async collect(){const Q=Object.assign([],{dataLength:0});if(!this[k])Q.dataLength=0;const X=this.promise();return this.on("data",($)=>{if(Q.push($),!this[k])Q.dataLength+=$.length}),await X,Q}async concat(){if(this[k])throw new Error("cannot concat in objectMode");const Q=await this.collect();return this[d]?Q.join(""):Buffer.concat(Q,Q.dataLength)}async promise(){return new Promise((Q,X)=>{this.on(A,()=>X(new Error("stream destroyed"))),this.on("error",($)=>X($)),this.on("end",()=>Q())})}[Symbol.asyncIterator](){this[y]=!1;let Q=!1;const X=async()=>{return this.pause(),Q=!0,{value:void 0,done:!0}};return{next:()=>{if(Q)return X();const Z=this.read();if(Z!==null)return Promise.resolve({done:!1,value:Z});if(this[s])return X();let J,q;const Y=(H)=>{this.off("data",K),this.off("end",_),this.off(A,j),X(),q(H)},K=(H)=>{this.off("error",Y),this.off("end",_),this.off(A,j),this.pause(),J({value:H,done:!!this[s]})},_=()=>{this.off("error",Y),this.off("data",K),this.off(A,j),X(),J({done:!0,value:void 0})},j=()=>Y(new Error("stream destroyed"));return new Promise((H,V)=>{q=V,J=H,this.once(A,j),this.once("error",Y),this.once("end",_),this.once("data",K)})},throw:X,return:X,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[y]=!1;let Q=!1;const X=()=>{return this.pause(),this.off(U6,X),this.off(A,X),this.off("end",X),Q=!0,{done:!0,value:void 0}},$=()=>{if(Q)return X();const Z=this.read();return Z===null?X():{done:!1,value:Z}};return this.once("end",X),this.once(U6,X),this.once(A,X),{next:$,throw:X,return:X,[Symbol.iterator](){return this}}}destroy(Q){if(this[A]){if(Q)this.emit("error",Q);else this.emit(A);return this}this[A]=!0,this[y]=!0,this[N].length=0,this[T]=0;const X=this;if(typeof X.close==="function"&&!this[y0])X.close();if(Q)this.emit("error",Q);else this.emit(A);return this}static get isStream(){return M7}}var x7=v7.native,D0={lstatSync:S7,readdir:O7,readdirSync:k7,readlinkSync:E7,realpathSync:x7,promises:{lstat:b7,readdir:y7,readlink:f7,realpath:u7}},g8=(Q)=>!Q||Q===D0||Q===P7?D0:{...D0,...Q,promises:{...D0.promises,...Q.promises||{}}},m8=/^\\\\\?\\([a-z]:)\\?$/i,h7=(Q)=>Q.replace(/\//g,"\\").replace(m8,"$1\\"),g7=/[\\\/]/,g=0,c8=1,d8=2,n=4,l8=6,p8=8,Z0=10,i8=12,h=15,I0=~h,R6=16,y8=32,A0=64,l=128,g0=256,c0=512,f8=A0|l|c0,m7=1023,L6=(Q)=>Q.isFile()?p8:Q.isDirectory()?n:Q.isSymbolicLink()?Z0:Q.isCharacterDevice()?d8:Q.isBlockDevice()?l8:Q.isSocket()?i8:Q.isFIFO()?c8:g,u8=new Map,F0=(Q)=>{const X=u8.get(Q);if(X)return X;const $=Q.normalize("NFKD");return u8.set(Q,$),$},h8=new Map,m0=(Q)=>{const X=h8.get(Q);if(X)return X;const $=F0(Q.toLowerCase());return h8.set(Q,$),$};class I6 extends M0{constructor(){super({max:256})}}class n8 extends M0{constructor(Q=16384){super({maxSize:Q,sizeCalculation:(X)=>X.length+1})}}var r8=Symbol("PathScurry setAsCwd");class b{name;root;roots;parent;nocase;#Q;#$;get dev(){return this.#$}#q;get mode(){return this.#q}#Z;get nlink(){return this.#Z}#K;get uid(){return this.#K}#j;get gid(){return this.#j}#W;get rdev(){return this.#W}#_;get blksize(){return this.#_}#Y;get ino(){return this.#Y}#X;get size(){return this.#X}#z;get blocks(){return this.#z}#M;get atimeMs(){return this.#M}#U;get mtimeMs(){return this.#U}#V;get ctimeMs(){return this.#V}#L;get birthtimeMs(){return this.#L}#B;get atime(){return this.#B}#F;get mtime(){return this.#F}#N;get ctime(){return this.#N}#C;get birthtime(){return this.#C}#R;#P;#G;#O;#T;#I;#J;#w;#k;#D;get path(){return(this.parent||this).fullpath()}constructor(Q,X=g,$,Z,J,q,Y){if(this.name=Q,this.#R=J?m0(Q):F0(Q),this.#J=X&m7,this.nocase=J,this.roots=Z,this.root=$||this,this.#w=q,this.#G=Y.fullpath,this.#T=Y.relative,this.#I=Y.relativePosix,this.parent=Y.parent,this.parent)this.#Q=this.parent.#Q;else this.#Q=g8(Y.fs)}depth(){if(this.#P!==void 0)return this.#P;if(!this.parent)return this.#P=0;return this.#P=this.parent.depth()+1}childrenCache(){return this.#w}resolve(Q){if(!Q)return this;const X=this.getRootString(Q),Z=Q.substring(X.length).split(this.splitSep);return X?this.getRoot(X).#b(Z):this.#b(Z)}#b(Q){let X=this;for(let $ of Q)X=X.child($);return X}children(){const Q=this.#w.get(this);if(Q)return Q;const X=Object.assign([],{provisional:0});return this.#w.set(this,X),this.#J&=~R6,X}child(Q,X){if(Q===""||Q===".")return this;if(Q==="..")return this.parent||this;const $=this.children(),Z=this.nocase?m0(Q):F0(Q);for(let K of $)if(K.#R===Z)return K;const J=this.parent?this.sep:"",q=this.#G?this.#G+J+Q:void 0,Y=this.newChild(Q,g,{...X,parent:this,fullpath:q});if(!this.canReaddir())Y.#J|=l;return $.push(Y),Y}relative(){if(this.#T!==void 0)return this.#T;const Q=this.name,X=this.parent;if(!X)return this.#T=this.name;const $=X.relative();return $+(!$||!X.parent?"":this.sep)+Q}relativePosix(){if(this.sep==="/")return this.relative();if(this.#I!==void 0)return this.#I;const Q=this.name,X=this.parent;if(!X)return this.#I=this.fullpathPosix();const $=X.relativePosix();return $+(!$||!X.parent?"":"/")+Q}fullpath(){if(this.#G!==void 0)return this.#G;const Q=this.name,X=this.parent;if(!X)return this.#G=this.name;const Z=X.fullpath()+(!X.parent?"":this.sep)+Q;return this.#G=Z}fullpathPosix(){if(this.#O!==void 0)return this.#O;if(this.sep==="/")return this.#O=this.fullpath();if(!this.parent){const Z=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(Z))return this.#O=`//?/${Z}`;else return this.#O=Z}const Q=this.parent,X=Q.fullpathPosix(),$=X+(!X||!Q.parent?"":"/")+this.name;return this.#O=$}isUnknown(){return(this.#J&h)===g}isType(Q){return this[`is${Q}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#J&h)===p8}isDirectory(){return(this.#J&h)===n}isCharacterDevice(){return(this.#J&h)===d8}isBlockDevice(){return(this.#J&h)===l8}isFIFO(){return(this.#J&h)===c8}isSocket(){return(this.#J&h)===i8}isSymbolicLink(){return(this.#J&Z0)===Z0}lstatCached(){return this.#J&y8?this:void 0}readlinkCached(){return this.#k}realpathCached(){return this.#D}readdirCached(){const Q=this.children();return Q.slice(0,Q.provisional)}canReadlink(){if(this.#k)return!0;if(!this.parent)return!1;const Q=this.#J&h;return!(Q!==g&&Q!==Z0||this.#J&g0||this.#J&l)}calledReaddir(){return!!(this.#J&R6)}isENOENT(){return!!(this.#J&l)}isNamed(Q){return!this.nocase?this.#R===F0(Q):this.#R===m0(Q)}async readlink(){const Q=this.#k;if(Q)return Q;if(!this.canReadlink())return;if(!this.parent)return;try{const X=await this.#Q.promises.readlink(this.fullpath()),$=this.parent.resolve(X);if($)return this.#k=$}catch(X){this.#u(X.code);return}}readlinkSync(){const Q=this.#k;if(Q)return Q;if(!this.canReadlink())return;if(!this.parent)return;try{const X=this.#Q.readlinkSync(this.fullpath()),$=this.parent.resolve(X);if($)return this.#k=$}catch(X){this.#u(X.code);return}}#y(Q){this.#J|=R6;for(let X=Q.provisional;X<Q.length;X++)Q[X].#A()}#A(){if(this.#J&l)return;this.#J=(this.#J|l)&I0,this.#S()}#S(){const Q=this.children();Q.provisional=0;for(let X of Q)X.#A()}#f(){this.#J|=c0,this.#E()}#E(){if(this.#J&A0)return;let Q=this.#J;if((Q&h)===n)Q&=I0;this.#J=Q|A0,this.#S()}#x(Q=""){if(Q==="ENOTDIR"||Q==="EPERM")this.#E();else if(Q==="ENOENT")this.#A();else this.children().provisional=0}#H(Q=""){if(Q==="ENOTDIR")this.parent.#E();else if(Q==="ENOENT")this.#A()}#u(Q=""){let X=this.#J;if(X|=g0,Q==="ENOENT")X|=l;if(Q==="EINVAL"||Q==="UNKNOWN")X&=I0;if(this.#J=X,Q==="ENOTDIR"&&this.parent)this.parent.#E()}#v(Q,X){return this.#l(Q,X)||this.#d(Q,X)}#d(Q,X){const $=L6(Q),Z=this.newChild(Q.name,$,{parent:this}),J=Z.#J&h;if(J!==n&&J!==Z0&&J!==g)Z.#J|=A0;return X.unshift(Z),X.provisional++,Z}#l(Q,X){for(let $=X.provisional;$<X.length;$++){const Z=X[$];if((this.nocase?m0(Q.name):F0(Q.name))!==Z.#R)continue;return this.#p(Q,Z,$,X)}}#p(Q,X,$,Z){const J=X.name;if(X.#J=X.#J&I0|L6(Q),J!==Q.name)X.name=Q.name;if($!==Z.provisional){if($===Z.length-1)Z.pop();else Z.splice($,1);Z.unshift(X)}return Z.provisional++,X}async lstat(){if((this.#J&l)===0)try{return this.#c(await this.#Q.promises.lstat(this.fullpath())),this}catch(Q){this.#H(Q.code)}}lstatSync(){if((this.#J&l)===0)try{return this.#c(this.#Q.lstatSync(this.fullpath())),this}catch(Q){this.#H(Q.code)}}#c(Q){const{atime:X,atimeMs:$,birthtime:Z,birthtimeMs:J,blksize:q,blocks:Y,ctime:K,ctimeMs:_,dev:j,gid:H,ino:V,mode:W,mtime:U,mtimeMs:G,nlink:z,rdev:B,size:R,uid:w}=Q;this.#B=X,this.#M=$,this.#C=Z,this.#L=J,this.#_=q,this.#z=Y,this.#N=K,this.#V=_,this.#$=j,this.#j=H,this.#Y=V,this.#q=W,this.#F=U,this.#U=G,this.#Z=z,this.#W=B,this.#X=R,this.#K=w;const M=L6(Q);if(this.#J=this.#J&I0|M|y8,M!==g&&M!==n&&M!==Z0)this.#J|=A0}#g=[];#m=!1;#i(Q){this.#m=!1;const X=this.#g.slice();this.#g.length=0,X.forEach(($)=>$(null,Q))}readdirCB(Q,X=!1){if(!this.canReaddir()){if(X)Q(null,[]);else queueMicrotask(()=>Q(null,[]));return}const $=this.children();if(this.calledReaddir()){const J=$.slice(0,$.provisional);if(X)Q(null,J);else queueMicrotask(()=>Q(null,J));return}if(this.#g.push(Q),this.#m)return;this.#m=!0;const Z=this.fullpath();this.#Q.readdir(Z,{withFileTypes:!0},(J,q)=>{if(J)this.#x(J.code),$.provisional=0;else{for(let Y of q)this.#v(Y,$);this.#y($)}this.#i($.slice(0,$.provisional));return})}#h;async readdir(){if(!this.canReaddir())return[];const Q=this.children();if(this.calledReaddir())return Q.slice(0,Q.provisional);const X=this.fullpath();if(this.#h)await this.#h;else{let $=()=>{};this.#h=new Promise((Z)=>$=Z);try{for(let Z of await this.#Q.promises.readdir(X,{withFileTypes:!0}))this.#v(Z,Q);this.#y(Q)}catch(Z){this.#x(Z.code),Q.provisional=0}this.#h=void 0,$()}return Q.slice(0,Q.provisional)}readdirSync(){if(!this.canReaddir())return[];const Q=this.children();if(this.calledReaddir())return Q.slice(0,Q.provisional);const X=this.fullpath();try{for(let $ of this.#Q.readdirSync(X,{withFileTypes:!0}))this.#v($,Q);this.#y(Q)}catch($){this.#x($.code),Q.provisional=0}return Q.slice(0,Q.provisional)}canReaddir(){if(this.#J&f8)return!1;const Q=h&this.#J;if(!(Q===g||Q===n||Q===Z0))return!1;return!0}shouldWalk(Q,X){return(this.#J&n)===n&&!(this.#J&f8)&&!Q.has(this)&&(!X||X(this))}async realpath(){if(this.#D)return this.#D;if((c0|g0|l)&this.#J)return;try{const Q=await this.#Q.promises.realpath(this.fullpath());return this.#D=this.resolve(Q)}catch(Q){this.#f()}}realpathSync(){if(this.#D)return this.#D;if((c0|g0|l)&this.#J)return;try{const Q=this.#Q.realpathSync(this.fullpath());return this.#D=this.resolve(Q)}catch(Q){this.#f()}}[r8](Q){if(Q===this)return;const X=new Set([]);let $=[],Z=this;while(Z&&Z.parent)X.add(Z),Z.#T=$.join(this.sep),Z.#I=$.join("/"),Z=Z.parent,$.push("..");Z=Q;while(Z&&Z.parent&&!X.has(Z))Z.#T=void 0,Z.#I=void 0,Z=Z.parent}}class d0 extends b{sep="\\";splitSep=g7;constructor(Q,X=g,$,Z,J,q,Y){super(Q,X,$,Z,J,q,Y)}newChild(Q,X=g,$={}){return new d0(Q,X,this.root,this.roots,this.nocase,this.childrenCache(),$)}getRootString(Q){return C6.parse(Q).root}getRoot(Q){if(Q=h7(Q.toUpperCase()),Q===this.root.name)return this.root;for(let[X,$]of Object.entries(this.roots))if(this.sameRoot(Q,X))return this.roots[Q]=$;return this.roots[Q]=new N0(Q,this).root}sameRoot(Q,X=this.root.name){return Q=Q.toUpperCase().replace(/\//g,"\\").replace(m8,"$1\\"),Q===X}}class l0 extends b{splitSep="/";sep="/";constructor(Q,X=g,$,Z,J,q,Y){super(Q,X,$,Z,J,q,Y)}getRootString(Q){return Q.startsWith("/")?"/":""}getRoot(Q){return this.root}newChild(Q,X=g,$={}){return new l0(Q,X,this.root,this.roots,this.nocase,this.childrenCache(),$)}}class D6{root;rootPath;roots;cwd;#Q;#$;#q;nocase;#Z;constructor(Q=process.cwd(),X,$,{nocase:Z,childrenCacheSize:J=16384,fs:q=D0}={}){if(this.#Z=g8(q),Q instanceof URL||Q.startsWith("file://"))Q=T7(Q);const Y=X.resolve(Q);this.roots=Object.create(null),this.rootPath=this.parseRootPath(Y),this.#Q=new I6,this.#$=new I6,this.#q=new n8(J);const K=Y.substring(this.rootPath.length).split($);if(K.length===1&&!K[0])K.pop();if(Z===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=Z,this.root=this.newRoot(this.#Z),this.roots[this.rootPath]=this.root;let _=this.root,j=K.length-1;const H=X.sep;let V=this.rootPath,W=!1;for(let U of K){const G=j--;_=_.child(U,{relative:new Array(G).fill("..").join(H),relativePosix:new Array(G).fill("..").join("/"),fullpath:V+=(W?"":H)+U}),W=!0}this.cwd=_}depth(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.depth()}childrenCache(){return this.#q}resolve(...Q){let X="";for(let J=Q.length-1;J>=0;J--){const q=Q[J];if(!q||q===".")continue;if(X=X?`${q}/${X}`:q,this.isAbsolute(q))break}const $=this.#Q.get(X);if($!==void 0)return $;const Z=this.cwd.resolve(X).fullpath();return this.#Q.set(X,Z),Z}resolvePosix(...Q){let X="";for(let J=Q.length-1;J>=0;J--){const q=Q[J];if(!q||q===".")continue;if(X=X?`${q}/${X}`:q,this.isAbsolute(q))break}const $=this.#$.get(X);if($!==void 0)return $;const Z=this.cwd.resolve(X).fullpathPosix();return this.#$.set(X,Z),Z}relative(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.relative()}relativePosix(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.relativePosix()}basename(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.name}dirname(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return(Q.parent||Q).fullpath()}async readdir(Q=this.cwd,X={withFileTypes:!0}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$}=X;if(!Q.canReaddir())return[];else{const Z=await Q.readdir();return $?Z:Z.map((J)=>J.name)}}readdirSync(Q=this.cwd,X={withFileTypes:!0}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0}=X;if(!Q.canReaddir())return[];else if($)return Q.readdirSync();else return Q.readdirSync().map((Z)=>Z.name)}async lstat(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.lstat()}lstatSync(Q=this.cwd){if(typeof Q==="string")Q=this.cwd.resolve(Q);return Q.lstatSync()}async readlink(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=await Q.readlink();return X?$:$?.fullpath()}readlinkSync(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=Q.readlinkSync();return X?$:$?.fullpath()}async realpath(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=await Q.realpath();return X?$:$?.fullpath()}realpathSync(Q=this.cwd,{withFileTypes:X}={withFileTypes:!1}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q.withFileTypes,Q=this.cwd;const $=Q.realpathSync();return X?$:$?.fullpath()}async walk(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=[];if(!J||J(Q))Y.push($?Q:Q.fullpath());const K=new Set,_=(H,V)=>{K.add(H),H.readdirCB((W,U)=>{if(W)return V(W);let G=U.length;if(!G)return V();const z=()=>{if(--G===0)V()};for(let B of U){if(!J||J(B))Y.push($?B:B.fullpath());if(Z&&B.isSymbolicLink())B.realpath().then((R)=>R?.isUnknown()?R.lstat():R).then((R)=>R?.shouldWalk(K,q)?_(R,z):z());else if(B.shouldWalk(K,q))_(B,z);else z()}},!0)},j=Q;return new Promise((H,V)=>{_(j,(W)=>{if(W)return V(W);H(Y)})})}walkSync(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=[];if(!J||J(Q))Y.push($?Q:Q.fullpath());const K=new Set([Q]);for(let _ of K){const j=_.readdirSync();for(let H of j){if(!J||J(H))Y.push($?H:H.fullpath());let V=H;if(H.isSymbolicLink()){if(!(Z&&(V=H.realpathSync())))continue;if(V.isUnknown())V.lstatSync()}if(V.shouldWalk(K,q))K.add(V)}}return Y}[Symbol.asyncIterator](){return this.iterate()}iterate(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;return this.stream(Q,X)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X;if(!J||J(Q))yield $?Q:Q.fullpath();const Y=new Set([Q]);for(let K of Y){const _=K.readdirSync();for(let j of _){if(!J||J(j))yield $?j:j.fullpath();let H=j;if(j.isSymbolicLink()){if(!(Z&&(H=j.realpathSync())))continue;if(H.isUnknown())H.lstatSync()}if(H.shouldWalk(Y,q))Y.add(H)}}}stream(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=new $0({objectMode:!0});if(!J||J(Q))Y.write($?Q:Q.fullpath());const K=new Set,_=[Q];let j=0;const H=()=>{let V=!1;while(!V){const W=_.shift();if(!W){if(j===0)Y.end();return}j++,K.add(W);const U=(z,B,R=!1)=>{if(z)return Y.emit("error",z);if(Z&&!R){const w=[];for(let M of B)if(M.isSymbolicLink())w.push(M.realpath().then((D)=>D?.isUnknown()?D.lstat():D));if(w.length){Promise.all(w).then(()=>U(null,B,!0));return}}for(let w of B)if(w&&(!J||J(w))){if(!Y.write($?w:w.fullpath()))V=!0}j--;for(let w of B){const M=w.realpathCached()||w;if(M.shouldWalk(K,q))_.push(M)}if(V&&!Y.flowing)Y.once("drain",H);else if(!G)H()};let G=!0;W.readdirCB(U,!0),G=!1}};return H(),Y}streamSync(Q=this.cwd,X={}){if(typeof Q==="string")Q=this.cwd.resolve(Q);else if(!(Q instanceof b))X=Q,Q=this.cwd;const{withFileTypes:$=!0,follow:Z=!1,filter:J,walkFilter:q}=X,Y=new $0({objectMode:!0}),K=new Set;if(!J||J(Q))Y.write($?Q:Q.fullpath());const _=[Q];let j=0;const H=()=>{let V=!1;while(!V){const W=_.shift();if(!W){if(j===0)Y.end();return}j++,K.add(W);const U=W.readdirSync();for(let G of U)if(!J||J(G)){if(!Y.write($?G:G.fullpath()))V=!0}j--;for(let G of U){let z=G;if(G.isSymbolicLink()){if(!(Z&&(z=G.realpathSync())))continue;if(z.isUnknown())z.lstatSync()}if(z.shouldWalk(K,q))_.push(z)}}if(V&&!Y.flowing)Y.once("drain",H)};return H(),Y}chdir(Q=this.cwd){const X=this.cwd;this.cwd=typeof Q==="string"?this.cwd.resolve(Q):Q,this.cwd[r8](X)}}class N0 extends D6{sep="\\";constructor(Q=process.cwd(),X={}){const{nocase:$=!0}=X;super(Q,C6,"\\",{...X,nocase:$});this.nocase=$;for(let Z=this.cwd;Z;Z=Z.parent)Z.nocase=this.nocase}parseRootPath(Q){return C6.parse(Q).root.toUpperCase()}newRoot(Q){return new d0(this.rootPath,n,void 0,this.roots,this.nocase,this.childrenCache(),{fs:Q})}isAbsolute(Q){return Q.startsWith("/")||Q.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(Q)}}class T0 extends D6{sep="/";constructor(Q=process.cwd(),X={}){const{nocase:$=!1}=X;super(Q,N7,"/",{...X,nocase:$});this.nocase=$}parseRootPath(Q){return"/"}newRoot(Q){return new l0(this.rootPath,n,void 0,this.roots,this.nocase,this.childrenCache(),{fs:Q})}isAbsolute(Q){return Q.startsWith("/")}}class p0 extends T0{constructor(Q=process.cwd(),X={}){const{nocase:$=!0}=X;super(Q,{...X,nocase:$})}}var PQ=process.platform==="win32"?d0:l0,o8=process.platform==="win32"?N0:process.platform==="darwin"?p0:T0;import{fileURLToPath as i7} from"url";var c7=(Q)=>Q.length>=1,d7=(Q)=>Q.length>=1;class H0{#Q;#$;#q;length;#Z;#K;#j;#W;#_;#Y;#X=!0;constructor(Q,X,$,Z){if(!c7(Q))throw new TypeError("empty pattern list");if(!d7(X))throw new TypeError("empty glob list");if(X.length!==Q.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=Q.length,$<0||$>=this.length)throw new TypeError("index out of range");if(this.#Q=Q,this.#$=X,this.#q=$,this.#Z=Z,this.#q===0){if(this.isUNC()){const[J,q,Y,K,..._]=this.#Q,[j,H,V,W,...U]=this.#$;if(_[0]==="")_.shift(),U.shift();const G=[J,q,Y,K,""].join("/"),z=[j,H,V,W,""].join("/");this.#Q=[G,..._],this.#$=[z,...U],this.length=this.#Q.length}else if(this.isDrive()||this.isAbsolute()){const[J,...q]=this.#Q,[Y,...K]=this.#$;if(q[0]==="")q.shift(),K.shift();const _=J+"/",j=Y+"/";this.#Q=[_,...q],this.#$=[j,...K],this.length=this.#Q.length}}}pattern(){return this.#Q[this.#q]}isString(){return typeof this.#Q[this.#q]==="string"}isGlobstar(){return this.#Q[this.#q]===S}isRegExp(){return this.#Q[this.#q]instanceof RegExp}globString(){return this.#j=this.#j||(this.#q===0?this.isAbsolute()?this.#$[0]+this.#$.slice(1).join("/"):this.#$.join("/"):this.#$.slice(this.#q).join("/"))}hasMore(){return this.length>this.#q+1}rest(){if(this.#K!==void 0)return this.#K;if(!this.hasMore())return this.#K=null;return this.#K=new H0(this.#Q,this.#$,this.#q+1,this.#Z),this.#K.#Y=this.#Y,this.#K.#_=this.#_,this.#K.#W=this.#W,this.#K}isUNC(){const Q=this.#Q;return this.#_!==void 0?this.#_:this.#_=this.#Z==="win32"&&this.#q===0&&Q[0]===""&&Q[1]===""&&typeof Q[2]==="string"&&!!Q[2]&&typeof Q[3]==="string"&&!!Q[3]}isDrive(){const Q=this.#Q;return this.#W!==void 0?this.#W:this.#W=this.#Z==="win32"&&this.#q===0&&this.length>1&&typeof Q[0]==="string"&&/^[a-z]:$/i.test(Q[0])}isAbsolute(){const Q=this.#Q;return this.#Y!==void 0?this.#Y:this.#Y=Q[0]===""&&Q.length>1||this.isDrive()||this.isUNC()}root(){const Q=this.#Q[0];return typeof Q==="string"&&this.isAbsolute()&&this.#q===0?Q:""}checkFollowGlobstar(){return!(this.#q===0||!this.isGlobstar()||!this.#X)}markFollowGlobstar(){if(this.#q===0||!this.isGlobstar()||!this.#X)return!1;return this.#X=!1,!0}}var l7=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class i0{relative;relativeChildren;absolute;absoluteChildren;constructor(Q,{nobrace:X,nocase:$,noext:Z,noglobstar:J,platform:q=l7}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];const Y={dot:!0,nobrace:X,nocase:$,noext:Z,noglobstar:J,optimizationLevel:2,platform:q,nocomment:!0,nonegate:!0};for(let K of Q){const _=new u(K,Y);for(let j=0;j<_.set.length;j++){const H=_.set[j],V=_.globParts[j];if(!H||!V)throw new Error("invalid pattern object");const W=new H0(H,V,0,q),U=new u(W.globString(),Y),G=V[V.length-1]==="**",z=W.isAbsolute();if(z)this.absolute.push(U);else this.relative.push(U);if(G)if(z)this.absoluteChildren.push(U);else this.relativeChildren.push(U)}}}ignored(Q){const X=Q.fullpath(),$=`${X}/`,Z=Q.relative()||".",J=`${Z}/`;for(let q of this.relative)if(q.match(Z)||q.match(J))return!0;for(let q of this.absolute)if(q.match(X)||q.match($))return!0;return!1}childrenIgnored(Q){const X=Q.fullpath()+"/",$=(Q.relative()||".")+"/";for(let Z of this.relativeChildren)if(Z.match($))return!0;for(let Z of this.absoluteChildren)if(Z.match(X))return!0;return!1}}class A6{store;constructor(Q=new Map){this.store=Q}copy(){return new A6(new Map(this.store))}hasWalked(Q,X){return this.store.get(Q.fullpath())?.has(X.globString())}storeWalked(Q,X){const $=Q.fullpath(),Z=this.store.get($);if(Z)Z.add(X.globString());else this.store.set($,new Set([X.globString()]))}}class s8{store=new Map;add(Q,X,$){const Z=(X?2:0)|($?1:0),J=this.store.get(Q);this.store.set(Q,J===void 0?Z:Z&J)}entries(){return[...this.store.entries()].map(([Q,X])=>[Q,!!(X&2),!!(X&1)])}}class a8{store=new Map;add(Q,X){if(!Q.canReaddir())return;const $=this.store.get(Q);if($){if(!$.find((Z)=>Z.globString()===X.globString()))$.push(X)}else this.store.set(Q,[X])}get(Q){const X=this.store.get(Q);if(!X)throw new Error("attempting to walk unknown path");return X}entries(){return this.keys().map((Q)=>[Q,this.store.get(Q)])}keys(){return[...this.store.keys()].filter((Q)=>Q.canReaddir())}}class P0{hasWalkedCache;matches=new s8;subwalks=new a8;patterns;follow;dot;opts;constructor(Q,X){this.opts=Q,this.follow=!!Q.follow,this.dot=!!Q.dot,this.hasWalkedCache=X?X.copy():new A6}processPatterns(Q,X){this.patterns=X;const $=X.map((Z)=>[Q,Z]);for(let[Z,J]of $){this.hasWalkedCache.storeWalked(Z,J);const q=J.root(),Y=J.isAbsolute()&&this.opts.absolute!==!1;if(q){Z=Z.resolve(q==="/"&&this.opts.root!==void 0?this.opts.root:q);const H=J.rest();if(!H){this.matches.add(Z,!0,!1);continue}else J=H}if(Z.isENOENT())continue;let K,_,j=!1;while(typeof(K=J.pattern())==="string"&&(_=J.rest()))Z=Z.resolve(K),J=_,j=!0;if(K=J.pattern(),_=J.rest(),j){if(this.hasWalkedCache.hasWalked(Z,J))continue;this.hasWalkedCache.storeWalked(Z,J)}if(typeof K==="string"){const H=K===".."||K===""||K===".";this.matches.add(Z.resolve(K),Y,H);continue}else if(K===S){if(!Z.isSymbolicLink()||this.follow||J.checkFollowGlobstar())this.subwalks.add(Z,J);const H=_?.pattern(),V=_?.rest();if(!_||(H===""||H===".")&&!V)this.matches.add(Z,Y,H===""||H===".");else if(H===".."){const W=Z.parent||Z;if(!V)this.matches.add(W,Y,!0);else if(!this.hasWalkedCache.hasWalked(W,V))this.subwalks.add(W,V)}}else if(K instanceof RegExp)this.subwalks.add(Z,J)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new P0(this.opts,this.hasWalkedCache)}filterEntries(Q,X){const $=this.subwalks.get(Q),Z=this.child();for(let J of X)for(let q of $){const Y=q.isAbsolute(),K=q.pattern(),_=q.rest();if(K===S)Z.testGlobstar(J,q,_,Y);else if(K instanceof RegExp)Z.testRegExp(J,K,_,Y);else Z.testString(J,K,_,Y)}return Z}testGlobstar(Q,X,$,Z){if(this.dot||!Q.name.startsWith(".")){if(!X.hasMore())this.matches.add(Q,Z,!1);if(Q.canReaddir()){if(this.follow||!Q.isSymbolicLink())this.subwalks.add(Q,X);else if(Q.isSymbolicLink()){if($&&X.checkFollowGlobstar())this.subwalks.add(Q,$);else if(X.markFollowGlobstar())this.subwalks.add(Q,X)}}}if($){const J=$.pattern();if(typeof J==="string"&&J!==".."&&J!==""&&J!==".")this.testString(Q,J,$.rest(),Z);else if(J===".."){const q=Q.parent||Q;this.subwalks.add(q,$)}else if(J instanceof RegExp)this.testRegExp(Q,J,$.rest(),Z)}}testRegExp(Q,X,$,Z){if(!X.test(Q.name))return;if(!$)this.matches.add(Q,Z,!1);else this.subwalks.add(Q,$)}testString(Q,X,$,Z){if(!Q.isNamed(X))return;if(!$)this.matches.add(Q,Z,!1);else this.subwalks.add(Q,$)}}var p7=(Q,X)=>typeof Q==="string"?new i0([Q],X):Array.isArray(Q)?new i0(Q,X):Q;class F6{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#Q=[];#$;#q;signal;maxDepth;constructor(Q,X,$){if(this.patterns=Q,this.path=X,this.opts=$,this.#q=!$.posix&&$.platform==="win32"?"\\":"/",$.ignore)this.#$=p7($.ignore,$);if(this.maxDepth=$.maxDepth||Infinity,$.signal)this.signal=$.signal,this.signal.addEventListener("abort",()=>{this.#Q.length=0})}#Z(Q){return this.seen.has(Q)||!!this.#$?.ignored?.(Q)}#K(Q){return!!this.#$?.childrenIgnored?.(Q)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let Q=void 0;while(!this.paused&&(Q=this.#Q.shift()))Q()}onResume(Q){if(this.signal?.aborted)return;if(!this.paused)Q();else this.#Q.push(Q)}async matchCheck(Q,X){if(X&&this.opts.nodir)return;let $;if(this.opts.realpath){if($=Q.realpathCached()||await Q.realpath(),!$)return;Q=$}const Z=Q.isUnknown()||this.opts.stat;return this.matchCheckTest(Z?await Q.lstat():Q,X)}matchCheckTest(Q,X){return Q&&(this.maxDepth===Infinity||Q.depth()<=this.maxDepth)&&(!X||Q.canReaddir())&&(!this.opts.nodir||!Q.isDirectory())&&!this.#Z(Q)?Q:void 0}matchCheckSync(Q,X){if(X&&this.opts.nodir)return;let $;if(this.opts.realpath){if($=Q.realpathCached()||Q.realpathSync(),!$)return;Q=$}const Z=Q.isUnknown()||this.opts.stat;return this.matchCheckTest(Z?Q.lstatSync():Q,X)}matchFinish(Q,X){if(this.#Z(Q))return;const $=this.opts.absolute===void 0?X:this.opts.absolute;this.seen.add(Q);const Z=this.opts.mark&&Q.isDirectory()?this.#q:"";if(this.opts.withFileTypes)this.matchEmit(Q);else if($){const J=this.opts.posix?Q.fullpathPosix():Q.fullpath();this.matchEmit(J+Z)}else{const J=this.opts.posix?Q.relativePosix():Q.relative(),q=this.opts.dotRelative&&!J.startsWith(".."+this.#q)?"."+this.#q:"";this.matchEmit(!J?"."+Z:q+J+Z)}}async match(Q,X,$){const Z=await this.matchCheck(Q,$);if(Z)this.matchFinish(Z,X)}matchSync(Q,X,$){const Z=this.matchCheckSync(Q,$);if(Z)this.matchFinish(Z,X)}walkCB(Q,X,$){if(this.signal?.aborted)$();this.walkCB2(Q,X,new P0(this.opts),$)}walkCB2(Q,X,$,Z){if(this.#K(Q))return Z();if(this.signal?.aborted)Z();if(this.paused){this.onResume(()=>this.walkCB2(Q,X,$,Z));return}$.processPatterns(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,_]of $.matches.entries()){if(this.#Z(Y))continue;J++,this.match(Y,K,_).then(()=>q())}for(let Y of $.subwalkTargets()){if(this.maxDepth!==Infinity&&Y.depth()>=this.maxDepth)continue;J++;const K=Y.readdirCached();if(Y.calledReaddir())this.walkCB3(Y,K,$,q);else Y.readdirCB((_,j)=>this.walkCB3(Y,j,$,q),!0)}q()}walkCB3(Q,X,$,Z){$=$.filterEntries(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,_]of $.matches.entries()){if(this.#Z(Y))continue;J++,this.match(Y,K,_).then(()=>q())}for(let[Y,K]of $.subwalks.entries())J++,this.walkCB2(Y,K,$.child(),q);q()}walkCBSync(Q,X,$){if(this.signal?.aborted)$();this.walkCB2Sync(Q,X,new P0(this.opts),$)}walkCB2Sync(Q,X,$,Z){if(this.#K(Q))return Z();if(this.signal?.aborted)Z();if(this.paused){this.onResume(()=>this.walkCB2Sync(Q,X,$,Z));return}$.processPatterns(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,_]of $.matches.entries()){if(this.#Z(Y))continue;this.matchSync(Y,K,_)}for(let Y of $.subwalkTargets()){if(this.maxDepth!==Infinity&&Y.depth()>=this.maxDepth)continue;J++;const K=Y.readdirSync();this.walkCB3Sync(Y,K,$,q)}q()}walkCB3Sync(Q,X,$,Z){$=$.filterEntries(Q,X);let J=1;const q=()=>{if(--J===0)Z()};for(let[Y,K,_]of $.matches.entries()){if(this.#Z(Y))continue;this.matchSync(Y,K,_)}for(let[Y,K]of $.subwalks.entries())J++,this.walkCB2Sync(Y,K,$.child(),q);q()}}class n0 extends F6{matches;constructor(Q,X,$){super(Q,X,$);this.matches=new Set}matchEmit(Q){this.matches.add(Q)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())await this.path.lstat();return await new Promise((Q,X)=>{this.walkCB(this.path,this.patterns,()=>{if(this.signal?.aborted)X(this.signal.reason);else Q(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}}class r0 extends F6{results;constructor(Q,X,$){super(Q,X,$);this.results=new $0({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(Q){if(this.results.write(Q),!this.results.flowing)this.pause()}stream(){const Q=this.path;if(Q.isUnknown())Q.lstat().then(()=>{this.walkCB(Q,this.patterns,()=>this.results.end())});else this.walkCB(Q,this.patterns,()=>this.results.end());return this.results}streamSync(){if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}var n7=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class r{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(Q,X){if(!X)throw new TypeError("glob options required");if(this.withFileTypes=!!X.withFileTypes,this.signal=X.signal,this.follow=!!X.follow,this.dot=!!X.dot,this.dotRelative=!!X.dotRelative,this.nodir=!!X.nodir,this.mark=!!X.mark,!X.cwd)this.cwd="";else if(X.cwd instanceof URL||X.cwd.startsWith("file://"))X.cwd=i7(X.cwd);if(this.cwd=X.cwd||"",this.root=X.root,this.magicalBraces=!!X.magicalBraces,this.nobrace=!!X.nobrace,this.noext=!!X.noext,this.realpath=!!X.realpath,this.absolute=X.absolute,this.noglobstar=!!X.noglobstar,this.matchBase=!!X.matchBase,this.maxDepth=typeof X.maxDepth==="number"?X.maxDepth:Infinity,this.stat=!!X.stat,this.ignore=X.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof Q==="string")Q=[Q];if(this.windowsPathsNoEscape=!!X.windowsPathsNoEscape||X.allowWindowsEscape===!1,this.windowsPathsNoEscape)Q=Q.map((K)=>K.replace(/\\/g,"/"));if(this.matchBase){if(X.noglobstar)throw new TypeError("base matching requires globstar");Q=Q.map((K)=>K.includes("/")?K:`./**/${K}`)}if(this.pattern=Q,this.platform=X.platform||n7,this.opts={...X,platform:this.platform},X.scurry){if(this.scurry=X.scurry,X.nocase!==void 0&&X.nocase!==X.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const K=X.platform==="win32"?N0:X.platform==="darwin"?p0:X.platform?T0:o8;this.scurry=new K(this.cwd,{nocase:X.nocase,fs:X.fs})}this.nocase=this.scurry.nocase;const $=this.platform==="darwin"||this.platform==="win32",Z={...X,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:$,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},J=this.pattern.map((K)=>new u(K,Z)),[q,Y]=J.reduce((K,_)=>{return K[0].push(..._.set),K[1].push(..._.globParts),K},[[],[]]);this.patterns=q.map((K,_)=>{const j=Y[_];if(!j)throw new Error("invalid pattern object");return new H0(K,j,0,this.platform)})}async walk(){return[...await new n0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new n0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new r0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new r0(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}var N6=(Q,X={})=>{if(!Array.isArray(Q))Q=[Q];for(let $ of Q)if(new u($,X).hasMagic())return!0;return!1};function s0(Q,X={}){return new r(Q,X).streamSync()}function e8(Q,X={}){return new r(Q,X).stream()}function Q9(Q,X={}){return new r(Q,X).walkSync()}async function t8(Q,X={}){return new r(Q,X).walk()}function a0(Q,X={}){return new r(Q,X).iterateSync()}function X9(Q,X={}){return new r(Q,X).iterate()}var r7=s0,o7=Object.assign(e8,{sync:s0}),s7=a0,a7=Object.assign(X9,{sync:a0}),t7=Object.assign(Q9,{stream:s0,iterate:a0}),o0=Object.assign(t8,{glob:t8,globSync:Q9,sync:t7,globStream:e8,stream:o7,globStreamSync:s0,streamSync:r7,globIterate:X9,iterate:a7,globIterateSync:a0,iterateSync:s7,Glob:r,hasMagic:N6,escape:q0,unescape:c});o0.glob=o0;var y6=Q6(g9(),1);async function P5(Q){try{return await S0.promises.access(Q,S0.constants.F_OK),!0}catch(X){return!1}}var O5=function(Q){if(Q=Q.trim(),Q==="")return{type:"ok"};if(!Q.startsWith("An error occurred during typechecking"))return{type:"unknown"};const X=S5.exec(Q);if(X){const Z=Array.from(X[1].matchAll(b6),(q)=>q[1]),J=Array.from(X[2].matchAll(b6),(q)=>q[1]);if(Z.length===0||J.length===0)return{type:"unknown"};return{type:"type-error",primaryTags:Z,alternativeTags:J}}const $=Array.from(Q.matchAll(b6),(Z)=>Z[1]);if($.length!==1)return{type:"unknown"};return{type:"type-error",primaryTags:$,alternativeTags:[]}},k5=function(Q){const X=O5(Q.expectedOutput);switch(X.type){case"ok":return Q.actualExitCode===0?"correct":"incorrect";case"type-error":if(X.primaryTags.some(($)=>Q.actualOutput.includes($)))return"correct";else if(X.alternativeTags.some(($)=>Q.actualOutput.includes($)))return"partially-correct";else return"incorrect";case"unknown":return"unknown"}};async function E5(Q,X){return new Promise(($)=>{const Z=T5(`"${Q}"`,(J,q,Y)=>{$({exitCode:J?.code??0,stdout:q,stderr:Y})});if(!Z.stdin)throw new Error("child.stdin is null");Z.stdin.on("error",(J)=>{console.error("Error writing to stdin of a process:",J)}),Z.stdin.write(X),Z.stdin.end()})}async function v5(){E0.name("test-typechecker").description("Test your Stella typechecker implementation against a set of .stella files and save the results to a JSON file.").argument("<tests-path>","path to directory with files to typecheck and .out files generated by correct Stella implementation").requiredOption("-t, --typechecker <path>","path to the typechecker executable").option("-o, --out <path>","path where to save typechecker results","./typechecker-report.json").parse();const[Q]=E0.args,X=E0.opts(),$=e0.resolve(X.out),Z=e0.resolve(X.typechecker),J=await o0(e0.resolve(Q,"**/*.stella").replace(/\\/g,"/"));console.log(`Testing typechecker with ${J.length} Stella files...`);const q=new y6.default.SingleBar({},y6.default.Presets.shades_classic);q.start(J.length,0);const Y={testcases:{}};for(let K=0;K<J.length;K++){const _=J[K],j=_.replace(/\.stella$/,".stella.out");if(!await P5(j)){console.log(`No .stella.out file found for ${_}, skipping...`);continue}const H=(await S0.promises.readFile(_)).toString(),V=(await S0.promises.readFile(j)).toString(),W=await E5(Z,H),U=k5({expectedOutput:V,actualOutput:`${W.stdout}\n${W.stderr}`,actualExitCode:W.exitCode}),G=e0.relative(Q,_);if(Y.testcases[G]={conclusion:U,snippet:H,expected:V,exitCode:W.exitCode,actualStdout:W.stdout,actualStderr:W.stderr},U==="unknown")console.log(""),console.warn(`WARNING: unable to make conclusion for test "${G}"`);q.increment(1)}q.stop(),await S0.promises.writeFile($,JSON.stringify(Y,null,2))}var b6=/\[(ERROR_\w+)\]/g,S5=/^An error occurred during typechecking!\s+===================\s*Primary type error:\s*===================([\S\s]+)========================\s*Alternative type errors:\s*========================([\S\s]+)$/;v5();
